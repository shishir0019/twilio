(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ai(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const de={},$t=[],rt=()=>{},fs=()=>!1,lr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ci=e=>e.startsWith("onUpdate:"),Ie=Object.assign,ui=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Ka=Object.prototype.hasOwnProperty,ue=(e,t)=>Ka.call(e,t),ne=Array.isArray,zt=e=>fr(e)==="[object Map]",ds=e=>fr(e)==="[object Set]",oe=e=>typeof e=="function",ve=e=>typeof e=="string",St=e=>typeof e=="symbol",ge=e=>e!==null&&typeof e=="object",ps=e=>(ge(e)||oe(e))&&oe(e.then)&&oe(e.catch),hs=Object.prototype.toString,fr=e=>hs.call(e),Xa=e=>fr(e).slice(8,-1),gs=e=>fr(e)==="[object Object]",li=e=>ve(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,dn=ai(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dr=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Qa=/-\w/g,bt=dr(e=>e.replace(Qa,t=>t.slice(1).toUpperCase())),Ya=/\B([A-Z])/g,jt=dr(e=>e.replace(Ya,"-$1").toLowerCase()),_s=dr(e=>e.charAt(0).toUpperCase()+e.slice(1)),Pr=dr(e=>e?`on${_s(e)}`:""),Ot=(e,t)=>!Object.is(e,t),Jn=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},ms=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Vr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Mi;const pr=()=>Mi||(Mi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function fi(e){if(ne(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=ve(r)?nc(r):fi(r);if(i)for(const o in i)t[o]=i[o]}return t}else if(ve(e)||ge(e))return e}const Za=/;(?![^(]*\))/g,ec=/:([^]+)/,tc=/\/\*[^]*?\*\//g;function nc(e){const t={};return e.replace(tc,"").split(Za).forEach(n=>{if(n){const r=n.split(ec);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function di(e){let t="";if(ve(e))t=e;else if(ne(e))for(let n=0;n<e.length;n++){const r=di(e[n]);r&&(t+=r+" ")}else if(ge(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const rc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ic=ai(rc);function vs(e){return!!e||e===""}const ys=e=>!!(e&&e.__v_isRef===!0),bs=e=>ve(e)?e:e==null?"":ne(e)||ge(e)&&(e.toString===hs||!oe(e.toString))?ys(e)?bs(e.value):JSON.stringify(e,Ss,2):String(e),Ss=(e,t)=>ys(t)?Ss(e,t.value):zt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],o)=>(n[Ir(r,o)+" =>"]=i,n),{})}:ds(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ir(n))}:St(t)?Ir(t):ge(t)&&!ne(t)&&!gs(t)?String(t):t,Ir=(e,t="")=>{var n;return St(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Oe;class oc{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Oe,!t&&Oe&&(this.index=(Oe.scopes||(Oe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Oe;try{return Oe=this,t()}finally{Oe=n}}}on(){++this._on===1&&(this.prevScope=Oe,Oe=this)}off(){this._on>0&&--this._on===0&&(Oe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function sc(){return Oe}let he;const Ar=new WeakSet;class ws{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Oe&&Oe.active&&Oe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ar.has(this)&&(Ar.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Es(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Li(this),Ts(this);const t=he,n=Ve;he=this,Ve=!0;try{return this.fn()}finally{Ps(this),he=t,Ve=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)gi(t);this.deps=this.depsTail=void 0,Li(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ar.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wr(this)&&this.run()}get dirty(){return Wr(this)}}let Cs=0,pn,hn;function Es(e,t=!1){if(e.flags|=8,t){e.next=hn,hn=e;return}e.next=pn,pn=e}function pi(){Cs++}function hi(){if(--Cs>0)return;if(hn){let t=hn;for(hn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;pn;){let t=pn;for(pn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Ts(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ps(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),gi(r),ac(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function Wr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Is(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Is(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===bn)||(e.globalVersion=bn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Wr(e))))return;e.flags|=2;const t=e.dep,n=he,r=Ve;he=e,Ve=!0;try{Ts(e);const i=e.fn(e._value);(t.version===0||Ot(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{he=n,Ve=r,Ps(e),e.flags&=-3}}function gi(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)gi(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function ac(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ve=!0;const As=[];function pt(){As.push(Ve),Ve=!1}function ht(){const e=As.pop();Ve=e===void 0?!0:e}function Li(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=he;he=void 0;try{t()}finally{he=n}}}let bn=0;class cc{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Rs{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!he||!Ve||he===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==he)n=this.activeLink=new cc(he,this),he.deps?(n.prevDep=he.depsTail,he.depsTail.nextDep=n,he.depsTail=n):he.deps=he.depsTail=n,xs(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=he.depsTail,n.nextDep=void 0,he.depsTail.nextDep=n,he.depsTail=n,he.deps===n&&(he.deps=r)}return n}trigger(t){this.version++,bn++,this.notify(t)}notify(t){pi();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{hi()}}}function xs(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)xs(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Gr=new WeakMap,kt=Symbol(""),$r=Symbol(""),Sn=Symbol("");function be(e,t,n){if(Ve&&he){let r=Gr.get(e);r||Gr.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new Rs),i.map=r,i.key=n),i.track()}}function ft(e,t,n,r,i,o){const s=Gr.get(e);if(!s){bn++;return}const c=_=>{_&&_.trigger()};if(pi(),t==="clear")s.forEach(c);else{const _=ne(e),C=_&&li(n);if(_&&n==="length"){const g=Number(r);s.forEach((y,b)=>{(b==="length"||b===Sn||!St(b)&&b>=g)&&c(y)})}else switch((n!==void 0||s.has(void 0))&&c(s.get(n)),C&&c(s.get(Sn)),t){case"add":_?C&&c(s.get("length")):(c(s.get(kt)),zt(e)&&c(s.get($r)));break;case"delete":_||(c(s.get(kt)),zt(e)&&c(s.get($r)));break;case"set":zt(e)&&c(s.get(kt));break}}hi()}function Nt(e){const t=fe(e);return t===e?t:(be(t,"iterate",Sn),it(e)?t:t.map(Ne))}function _i(e){return be(e=fe(e),"iterate",Sn),e}const uc={__proto__:null,[Symbol.iterator](){return Rr(this,Symbol.iterator,Ne)},concat(...e){return Nt(this).concat(...e.map(t=>ne(t)?Nt(t):t))},entries(){return Rr(this,"entries",e=>(e[1]=Ne(e[1]),e))},every(e,t){return st(this,"every",e,t,void 0,arguments)},filter(e,t){return st(this,"filter",e,t,n=>n.map(Ne),arguments)},find(e,t){return st(this,"find",e,t,Ne,arguments)},findIndex(e,t){return st(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return st(this,"findLast",e,t,Ne,arguments)},findLastIndex(e,t){return st(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return st(this,"forEach",e,t,void 0,arguments)},includes(...e){return xr(this,"includes",e)},indexOf(...e){return xr(this,"indexOf",e)},join(e){return Nt(this).join(e)},lastIndexOf(...e){return xr(this,"lastIndexOf",e)},map(e,t){return st(this,"map",e,t,void 0,arguments)},pop(){return on(this,"pop")},push(...e){return on(this,"push",e)},reduce(e,...t){return ji(this,"reduce",e,t)},reduceRight(e,...t){return ji(this,"reduceRight",e,t)},shift(){return on(this,"shift")},some(e,t){return st(this,"some",e,t,void 0,arguments)},splice(...e){return on(this,"splice",e)},toReversed(){return Nt(this).toReversed()},toSorted(e){return Nt(this).toSorted(e)},toSpliced(...e){return Nt(this).toSpliced(...e)},unshift(...e){return on(this,"unshift",e)},values(){return Rr(this,"values",Ne)}};function Rr(e,t,n){const r=_i(e),i=r[t]();return r!==e&&!it(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=n(o.value)),o}),i}const lc=Array.prototype;function st(e,t,n,r,i,o){const s=_i(e),c=s!==e&&!it(e),_=s[t];if(_!==lc[t]){const y=_.apply(e,o);return c?Ne(y):y}let C=n;s!==e&&(c?C=function(y,b){return n.call(this,Ne(y),b,e)}:n.length>2&&(C=function(y,b){return n.call(this,y,b,e)}));const g=_.call(s,C,r);return c&&i?i(g):g}function ji(e,t,n,r){const i=_i(e);let o=n;return i!==e&&(it(e)?n.length>3&&(o=function(s,c,_){return n.call(this,s,c,_,e)}):o=function(s,c,_){return n.call(this,s,Ne(c),_,e)}),i[t](o,...r)}function xr(e,t,n){const r=fe(e);be(r,"iterate",Sn);const i=r[t](...n);return(i===-1||i===!1)&&bi(n[0])?(n[0]=fe(n[0]),r[t](...n)):i}function on(e,t,n=[]){pt(),pi();const r=fe(e)[t].apply(e,n);return hi(),ht(),r}const fc=ai("__proto__,__v_isRef,__isVue"),Os=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(St));function dc(e){St(e)||(e=String(e));const t=fe(this);return be(t,"has",e),t.hasOwnProperty(e)}class ks{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?wc:js:o?Ls:Ms).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const s=ne(t);if(!i){let _;if(s&&(_=uc[n]))return _;if(n==="hasOwnProperty")return dc}const c=Reflect.get(t,n,Pe(t)?t:r);return(St(n)?Os.has(n):fc(n))||(i||be(t,"get",n),o)?c:Pe(c)?s&&li(n)?c:c.value:ge(c)?i?Ns(c):vi(c):c}}class Ds extends ks{constructor(t=!1){super(!1,t)}set(t,n,r,i){let o=t[n];if(!this._isShallow){const _=Xt(o);if(!it(r)&&!Xt(r)&&(o=fe(o),r=fe(r)),!ne(t)&&Pe(o)&&!Pe(r))return _||(o.value=r),!0}const s=ne(t)&&li(n)?Number(n)<t.length:ue(t,n),c=Reflect.set(t,n,r,Pe(t)?t:i);return t===fe(i)&&(s?Ot(r,o)&&ft(t,"set",n,r):ft(t,"add",n,r)),c}deleteProperty(t,n){const r=ue(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&ft(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!St(n)||!Os.has(n))&&be(t,"has",n),r}ownKeys(t){return be(t,"iterate",ne(t)?"length":kt),Reflect.ownKeys(t)}}class pc extends ks{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const hc=new Ds,gc=new pc,_c=new Ds(!0);const zr=e=>e,kn=e=>Reflect.getPrototypeOf(e);function mc(e,t,n){return function(...r){const i=this.__v_raw,o=fe(i),s=zt(o),c=e==="entries"||e===Symbol.iterator&&s,_=e==="keys"&&s,C=i[e](...r),g=n?zr:t?Jr:Ne;return!t&&be(o,"iterate",_?$r:kt),{next(){const{value:y,done:b}=C.next();return b?{value:y,done:b}:{value:c?[g(y[0]),g(y[1])]:g(y),done:b}},[Symbol.iterator](){return this}}}}function Dn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function vc(e,t){const n={get(i){const o=this.__v_raw,s=fe(o),c=fe(i);e||(Ot(i,c)&&be(s,"get",i),be(s,"get",c));const{has:_}=kn(s),C=t?zr:e?Jr:Ne;if(_.call(s,i))return C(o.get(i));if(_.call(s,c))return C(o.get(c));o!==s&&o.get(i)},get size(){const i=this.__v_raw;return!e&&be(fe(i),"iterate",kt),i.size},has(i){const o=this.__v_raw,s=fe(o),c=fe(i);return e||(Ot(i,c)&&be(s,"has",i),be(s,"has",c)),i===c?o.has(i):o.has(i)||o.has(c)},forEach(i,o){const s=this,c=s.__v_raw,_=fe(c),C=t?zr:e?Jr:Ne;return!e&&be(_,"iterate",kt),c.forEach((g,y)=>i.call(o,C(g),C(y),s))}};return Ie(n,e?{add:Dn("add"),set:Dn("set"),delete:Dn("delete"),clear:Dn("clear")}:{add(i){!t&&!it(i)&&!Xt(i)&&(i=fe(i));const o=fe(this);return kn(o).has.call(o,i)||(o.add(i),ft(o,"add",i,i)),this},set(i,o){!t&&!it(o)&&!Xt(o)&&(o=fe(o));const s=fe(this),{has:c,get:_}=kn(s);let C=c.call(s,i);C||(i=fe(i),C=c.call(s,i));const g=_.call(s,i);return s.set(i,o),C?Ot(o,g)&&ft(s,"set",i,o):ft(s,"add",i,o),this},delete(i){const o=fe(this),{has:s,get:c}=kn(o);let _=s.call(o,i);_||(i=fe(i),_=s.call(o,i)),c&&c.call(o,i);const C=o.delete(i);return _&&ft(o,"delete",i,void 0),C},clear(){const i=fe(this),o=i.size!==0,s=i.clear();return o&&ft(i,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=mc(i,e,t)}),n}function mi(e,t){const n=vc(e,t);return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(ue(n,i)&&i in r?n:r,i,o)}const yc={get:mi(!1,!1)},bc={get:mi(!1,!0)},Sc={get:mi(!0,!1)};const Ms=new WeakMap,Ls=new WeakMap,js=new WeakMap,wc=new WeakMap;function Cc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ec(e){return e.__v_skip||!Object.isExtensible(e)?0:Cc(Xa(e))}function vi(e){return Xt(e)?e:yi(e,!1,hc,yc,Ms)}function Tc(e){return yi(e,!1,_c,bc,Ls)}function Ns(e){return yi(e,!0,gc,Sc,js)}function yi(e,t,n,r,i){if(!ge(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Ec(e);if(o===0)return e;const s=i.get(e);if(s)return s;const c=new Proxy(e,o===2?r:n);return i.set(e,c),c}function gn(e){return Xt(e)?gn(e.__v_raw):!!(e&&e.__v_isReactive)}function Xt(e){return!!(e&&e.__v_isReadonly)}function it(e){return!!(e&&e.__v_isShallow)}function bi(e){return e?!!e.__v_raw:!1}function fe(e){const t=e&&e.__v_raw;return t?fe(t):e}function Pc(e){return!ue(e,"__v_skip")&&Object.isExtensible(e)&&ms(e,"__v_skip",!0),e}const Ne=e=>ge(e)?vi(e):e,Jr=e=>ge(e)?Ns(e):e;function Pe(e){return e?e.__v_isRef===!0:!1}function Ic(e){return Pe(e)?e.value:e}const Ac={get:(e,t,n)=>t==="__v_raw"?e:Ic(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Pe(i)&&!Pe(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Us(e){return gn(e)?e:new Proxy(e,Ac)}class Rc{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Rs(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=bn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&he!==this)return Es(this,!0),!0}get value(){const t=this.dep.track();return Is(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function xc(e,t,n=!1){let r,i;return oe(e)?r=e:(r=e.get,i=e.set),new Rc(r,i,n)}const Mn={},nr=new WeakMap;let Rt;function Oc(e,t=!1,n=Rt){if(n){let r=nr.get(n);r||nr.set(n,r=[]),r.push(e)}}function kc(e,t,n=de){const{immediate:r,deep:i,once:o,scheduler:s,augmentJob:c,call:_}=n,C=d=>i?d:it(d)||i===!1||i===0?dt(d,1):dt(d);let g,y,b,E,h=!1,a=!1;if(Pe(e)?(y=()=>e.value,h=it(e)):gn(e)?(y=()=>C(e),h=!0):ne(e)?(a=!0,h=e.some(d=>gn(d)||it(d)),y=()=>e.map(d=>{if(Pe(d))return d.value;if(gn(d))return C(d);if(oe(d))return _?_(d,2):d()})):oe(e)?t?y=_?()=>_(e,2):e:y=()=>{if(b){pt();try{b()}finally{ht()}}const d=Rt;Rt=g;try{return _?_(e,3,[E]):e(E)}finally{Rt=d}}:y=rt,t&&i){const d=y,l=i===!0?1/0:i;y=()=>dt(d(),l)}const u=sc(),p=()=>{g.stop(),u&&u.active&&ui(u.effects,g)};if(o&&t){const d=t;t=(...l)=>{d(...l),p()}}let f=a?new Array(e.length).fill(Mn):Mn;const m=d=>{if(!(!(g.flags&1)||!g.dirty&&!d))if(t){const l=g.run();if(i||h||(a?l.some((S,I)=>Ot(S,f[I])):Ot(l,f))){b&&b();const S=Rt;Rt=g;try{const I=[l,f===Mn?void 0:a&&f[0]===Mn?[]:f,E];f=l,_?_(t,3,I):t(...I)}finally{Rt=S}}}else g.run()};return c&&c(m),g=new ws(y),g.scheduler=s?()=>s(m,!1):m,E=d=>Oc(d,!1,g),b=g.onStop=()=>{const d=nr.get(g);if(d){if(_)_(d,4);else for(const l of d)l();nr.delete(g)}},t?r?m(!0):f=g.run():s?s(m.bind(null,!0),!0):g.run(),p.pause=g.pause.bind(g),p.resume=g.resume.bind(g),p.stop=p,p}function dt(e,t=1/0,n){if(t<=0||!ge(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Pe(e))dt(e.value,t,n);else if(ne(e))for(let r=0;r<e.length;r++)dt(e[r],t,n);else if(ds(e)||zt(e))e.forEach(r=>{dt(r,t,n)});else if(gs(e)){for(const r in e)dt(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&dt(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Pn(e,t,n,r){try{return r?e(...r):e()}catch(i){hr(i,t,n)}}function ot(e,t,n,r){if(oe(e)){const i=Pn(e,t,n,r);return i&&ps(i)&&i.catch(o=>{hr(o,t,n)}),i}if(ne(e)){const i=[];for(let o=0;o<e.length;o++)i.push(ot(e[o],t,n,r));return i}}function hr(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||de;if(t){let c=t.parent;const _=t.proxy,C=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const g=c.ec;if(g){for(let y=0;y<g.length;y++)if(g[y](e,_,C)===!1)return}c=c.parent}if(o){pt(),Pn(o,null,10,[e,_,C]),ht();return}}Dc(e,n,i,r,s)}function Dc(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const Ee=[];let tt=-1;const Jt=[];let vt=null,Wt=0;const Fs=Promise.resolve();let rr=null;function Mc(e){const t=rr||Fs;return e?t.then(this?e.bind(this):e):t}function Lc(e){let t=tt+1,n=Ee.length;for(;t<n;){const r=t+n>>>1,i=Ee[r],o=wn(i);o<e||o===e&&i.flags&2?t=r+1:n=r}return t}function Si(e){if(!(e.flags&1)){const t=wn(e),n=Ee[Ee.length-1];!n||!(e.flags&2)&&t>=wn(n)?Ee.push(e):Ee.splice(Lc(t),0,e),e.flags|=1,Bs()}}function Bs(){rr||(rr=Fs.then(qs))}function jc(e){ne(e)?Jt.push(...e):vt&&e.id===-1?vt.splice(Wt+1,0,e):e.flags&1||(Jt.push(e),e.flags|=1),Bs()}function Ni(e,t,n=tt+1){for(;n<Ee.length;n++){const r=Ee[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Ee.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Hs(e){if(Jt.length){const t=[...new Set(Jt)].sort((n,r)=>wn(n)-wn(r));if(Jt.length=0,vt){vt.push(...t);return}for(vt=t,Wt=0;Wt<vt.length;Wt++){const n=vt[Wt];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}vt=null,Wt=0}}const wn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function qs(e){try{for(tt=0;tt<Ee.length;tt++){const t=Ee[tt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Pn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;tt<Ee.length;tt++){const t=Ee[tt];t&&(t.flags&=-2)}tt=-1,Ee.length=0,Hs(),rr=null,(Ee.length||Jt.length)&&qs()}}let He=null,Vs=null;function ir(e){const t=He;return He=e,Vs=e&&e.type.__scopeId||null,t}function Nc(e,t=He,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&zi(-1);const o=ir(t);let s;try{s=e(...i)}finally{ir(o),r._d&&zi(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function Uc(e,t){if(He===null)return e;const n=vr(He),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,s,c,_=de]=t[i];o&&(oe(o)&&(o={mounted:o,updated:o}),o.deep&&dt(s),r.push({dir:o,instance:n,value:s,oldValue:void 0,arg:c,modifiers:_}))}return e}function Ct(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const c=i[s];o&&(c.oldValue=o[s].value);let _=c.dir[r];_&&(pt(),ot(_,n,8,[e.el,c,e,t]),ht())}}const Fc=Symbol("_vte"),Bc=e=>e.__isTeleport,Hc=Symbol("_leaveCb");function wi(e,t){e.shapeFlag&6&&e.component?(e.transition=t,wi(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ws(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const or=new WeakMap;function _n(e,t,n,r,i=!1){if(ne(e)){e.forEach((h,a)=>_n(h,t&&(ne(t)?t[a]:t),n,r,i));return}if(mn(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&_n(e,t,n,r.component.subTree);return}const o=r.shapeFlag&4?vr(r.component):r.el,s=i?null:o,{i:c,r:_}=e,C=t&&t.r,g=c.refs===de?c.refs={}:c.refs,y=c.setupState,b=fe(y),E=y===de?fs:h=>ue(b,h);if(C!=null&&C!==_){if(Ui(t),ve(C))g[C]=null,E(C)&&(y[C]=null);else if(Pe(C)){C.value=null;const h=t;h.k&&(g[h.k]=null)}}if(oe(_))Pn(_,c,12,[s,g]);else{const h=ve(_),a=Pe(_);if(h||a){const u=()=>{if(e.f){const p=h?E(_)?y[_]:g[_]:_.value;if(i)ne(p)&&ui(p,o);else if(ne(p))p.includes(o)||p.push(o);else if(h)g[_]=[o],E(_)&&(y[_]=g[_]);else{const f=[o];_.value=f,e.k&&(g[e.k]=f)}}else h?(g[_]=s,E(_)&&(y[_]=s)):a&&(_.value=s,e.k&&(g[e.k]=s))};if(s){const p=()=>{u(),or.delete(e)};p.id=-1,or.set(e,p),je(p,n)}else Ui(e),u()}}}function Ui(e){const t=or.get(e);t&&(t.flags|=8,or.delete(e))}pr().requestIdleCallback;pr().cancelIdleCallback;const mn=e=>!!e.type.__asyncLoader,Gs=e=>e.type.__isKeepAlive;function qc(e,t){$s(e,"a",t)}function Vc(e,t){$s(e,"da",t)}function $s(e,t,n=Te){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(gr(t,r,n),n){let i=n.parent;for(;i&&i.parent;)Gs(i.parent.vnode)&&Wc(r,t,n,i),i=i.parent}}function Wc(e,t,n,r){const i=gr(t,e,r,!0);zs(()=>{ui(r[t],i)},n)}function gr(e,t,n=Te,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...s)=>{pt();const c=In(n),_=ot(t,n,e,s);return c(),ht(),_});return r?i.unshift(o):i.push(o),o}}const gt=e=>(t,n=Te)=>{(!En||e==="sp")&&gr(e,(...r)=>t(...r),n)},Gc=gt("bm"),$c=gt("m"),zc=gt("bu"),Jc=gt("u"),Kc=gt("bum"),zs=gt("um"),Xc=gt("sp"),Qc=gt("rtg"),Yc=gt("rtc");function Zc(e,t=Te){gr("ec",e,t)}const eu=Symbol.for("v-ndc"),Kr=e=>e?ha(e)?vr(e):Kr(e.parent):null,vn=Ie(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Kr(e.parent),$root:e=>Kr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ks(e),$forceUpdate:e=>e.f||(e.f=()=>{Si(e.update)}),$nextTick:e=>e.n||(e.n=Mc.bind(e.proxy)),$watch:e=>wu.bind(e)}),Or=(e,t)=>e!==de&&!e.__isScriptSetup&&ue(e,t),tu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:c,appContext:_}=e;let C;if(t[0]!=="$"){const E=s[t];if(E!==void 0)switch(E){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(Or(r,t))return s[t]=1,r[t];if(i!==de&&ue(i,t))return s[t]=2,i[t];if((C=e.propsOptions[0])&&ue(C,t))return s[t]=3,o[t];if(n!==de&&ue(n,t))return s[t]=4,n[t];Xr&&(s[t]=0)}}const g=vn[t];let y,b;if(g)return t==="$attrs"&&be(e.attrs,"get",""),g(e);if((y=c.__cssModules)&&(y=y[t]))return y;if(n!==de&&ue(n,t))return s[t]=4,n[t];if(b=_.config.globalProperties,ue(b,t))return b[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return Or(i,t)?(i[t]=n,!0):r!==de&&ue(r,t)?(r[t]=n,!0):ue(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o,type:s}},c){let _,C;return!!(n[c]||e!==de&&c[0]!=="$"&&ue(e,c)||Or(t,c)||(_=o[0])&&ue(_,c)||ue(r,c)||ue(vn,c)||ue(i.config.globalProperties,c)||(C=s.__cssModules)&&C[c])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ue(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Fi(e){return ne(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Xr=!0;function nu(e){const t=Ks(e),n=e.proxy,r=e.ctx;Xr=!1,t.beforeCreate&&Bi(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:s,watch:c,provide:_,inject:C,created:g,beforeMount:y,mounted:b,beforeUpdate:E,updated:h,activated:a,deactivated:u,beforeDestroy:p,beforeUnmount:f,destroyed:m,unmounted:d,render:l,renderTracked:S,renderTriggered:I,errorCaptured:w,serverPrefetch:N,expose:P,inheritAttrs:A,components:T,directives:x,filters:v}=t;if(C&&ru(C,r,null),s)for(const q in s){const k=s[q];oe(k)&&(r[q]=k.bind(n))}if(i){const q=i.call(n,n);ge(q)&&(e.data=vi(q))}if(Xr=!0,o)for(const q in o){const k=o[q],H=oe(k)?k.bind(n,n):oe(k.get)?k.get.bind(n,n):rt,M=!oe(k)&&oe(k.set)?k.set.bind(n):rt,L=zu({get:H,set:M});Object.defineProperty(r,q,{enumerable:!0,configurable:!0,get:()=>L.value,set:K=>L.value=K})}if(c)for(const q in c)Js(c[q],r,n,q);if(_){const q=oe(_)?_.call(n):_;Reflect.ownKeys(q).forEach(k=>{uu(k,q[k])})}g&&Bi(g,e,"c");function R(q,k){ne(k)?k.forEach(H=>q(H.bind(n))):k&&q(k.bind(n))}if(R(Gc,y),R($c,b),R(zc,E),R(Jc,h),R(qc,a),R(Vc,u),R(Zc,w),R(Yc,S),R(Qc,I),R(Kc,f),R(zs,d),R(Xc,N),ne(P))if(P.length){const q=e.exposed||(e.exposed={});P.forEach(k=>{Object.defineProperty(q,k,{get:()=>n[k],set:H=>n[k]=H,enumerable:!0})})}else e.exposed||(e.exposed={});l&&e.render===rt&&(e.render=l),A!=null&&(e.inheritAttrs=A),T&&(e.components=T),x&&(e.directives=x),N&&Ws(e)}function ru(e,t,n=rt){ne(e)&&(e=Qr(e));for(const r in e){const i=e[r];let o;ge(i)?"default"in i?o=Kn(i.from||r,i.default,!0):o=Kn(i.from||r):o=Kn(i),Pe(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):t[r]=o}}function Bi(e,t,n){ot(ne(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Js(e,t,n,r){let i=r.includes(".")?ca(n,r):()=>n[r];if(ve(e)){const o=t[e];oe(o)&&Dr(i,o)}else if(oe(e))Dr(i,e.bind(n));else if(ge(e))if(ne(e))e.forEach(o=>Js(o,t,n,r));else{const o=oe(e.handler)?e.handler.bind(n):t[e.handler];oe(o)&&Dr(i,o,e)}}function Ks(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,c=o.get(t);let _;return c?_=c:!i.length&&!n&&!r?_=t:(_={},i.length&&i.forEach(C=>sr(_,C,s,!0)),sr(_,t,s)),ge(t)&&o.set(t,_),_}function sr(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&sr(e,o,n,!0),i&&i.forEach(s=>sr(e,s,n,!0));for(const s in t)if(!(r&&s==="expose")){const c=iu[s]||n&&n[s];e[s]=c?c(e[s],t[s]):t[s]}return e}const iu={data:Hi,props:qi,emits:qi,methods:fn,computed:fn,beforeCreate:Ce,created:Ce,beforeMount:Ce,mounted:Ce,beforeUpdate:Ce,updated:Ce,beforeDestroy:Ce,beforeUnmount:Ce,destroyed:Ce,unmounted:Ce,activated:Ce,deactivated:Ce,errorCaptured:Ce,serverPrefetch:Ce,components:fn,directives:fn,watch:su,provide:Hi,inject:ou};function Hi(e,t){return t?e?function(){return Ie(oe(e)?e.call(this,this):e,oe(t)?t.call(this,this):t)}:t:e}function ou(e,t){return fn(Qr(e),Qr(t))}function Qr(e){if(ne(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ce(e,t){return e?[...new Set([].concat(e,t))]:t}function fn(e,t){return e?Ie(Object.create(null),e,t):t}function qi(e,t){return e?ne(e)&&ne(t)?[...new Set([...e,...t])]:Ie(Object.create(null),Fi(e),Fi(t??{})):t}function su(e,t){if(!e)return t;if(!t)return e;const n=Ie(Object.create(null),e);for(const r in t)n[r]=Ce(e[r],t[r]);return n}function Xs(){return{app:null,config:{isNativeTag:fs,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let au=0;function cu(e,t){return function(r,i=null){oe(r)||(r=Ie({},r)),i!=null&&!ge(i)&&(i=null);const o=Xs(),s=new WeakSet,c=[];let _=!1;const C=o.app={_uid:au++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:Ju,get config(){return o.config},set config(g){},use(g,...y){return s.has(g)||(g&&oe(g.install)?(s.add(g),g.install(C,...y)):oe(g)&&(s.add(g),g(C,...y))),C},mixin(g){return o.mixins.includes(g)||o.mixins.push(g),C},component(g,y){return y?(o.components[g]=y,C):o.components[g]},directive(g,y){return y?(o.directives[g]=y,C):o.directives[g]},mount(g,y,b){if(!_){const E=C._ceVNode||Dt(r,i);return E.appContext=o,b===!0?b="svg":b===!1&&(b=void 0),e(E,g,b),_=!0,C._container=g,g.__vue_app__=C,vr(E.component)}},onUnmount(g){c.push(g)},unmount(){_&&(ot(c,C._instance,16),e(null,C._container),delete C._container.__vue_app__)},provide(g,y){return o.provides[g]=y,C},runWithContext(g){const y=Kt;Kt=C;try{return g()}finally{Kt=y}}};return C}}let Kt=null;function uu(e,t){if(Te){let n=Te.provides;const r=Te.parent&&Te.parent.provides;r===n&&(n=Te.provides=Object.create(r)),n[e]=t}}function Kn(e,t,n=!1){const r=Hu();if(r||Kt){let i=Kt?Kt._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&oe(t)?t.call(r&&r.proxy):t}}const Qs={},Ys=()=>Object.create(Qs),Zs=e=>Object.getPrototypeOf(e)===Qs;function lu(e,t,n,r=!1){const i={},o=Ys();e.propsDefaults=Object.create(null),ea(e,t,i,o);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);n?e.props=r?i:Tc(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function fu(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,c=fe(i),[_]=e.propsOptions;let C=!1;if((r||s>0)&&!(s&16)){if(s&8){const g=e.vnode.dynamicProps;for(let y=0;y<g.length;y++){let b=g[y];if(_r(e.emitsOptions,b))continue;const E=t[b];if(_)if(ue(o,b))E!==o[b]&&(o[b]=E,C=!0);else{const h=bt(b);i[h]=Yr(_,c,h,E,e,!1)}else E!==o[b]&&(o[b]=E,C=!0)}}}else{ea(e,t,i,o)&&(C=!0);let g;for(const y in c)(!t||!ue(t,y)&&((g=jt(y))===y||!ue(t,g)))&&(_?n&&(n[y]!==void 0||n[g]!==void 0)&&(i[y]=Yr(_,c,y,void 0,e,!0)):delete i[y]);if(o!==c)for(const y in o)(!t||!ue(t,y))&&(delete o[y],C=!0)}C&&ft(e.attrs,"set","")}function ea(e,t,n,r){const[i,o]=e.propsOptions;let s=!1,c;if(t)for(let _ in t){if(dn(_))continue;const C=t[_];let g;i&&ue(i,g=bt(_))?!o||!o.includes(g)?n[g]=C:(c||(c={}))[g]=C:_r(e.emitsOptions,_)||(!(_ in r)||C!==r[_])&&(r[_]=C,s=!0)}if(o){const _=fe(n),C=c||de;for(let g=0;g<o.length;g++){const y=o[g];n[y]=Yr(i,_,y,C[y],e,!ue(C,y))}}return s}function Yr(e,t,n,r,i,o){const s=e[n];if(s!=null){const c=ue(s,"default");if(c&&r===void 0){const _=s.default;if(s.type!==Function&&!s.skipFactory&&oe(_)){const{propsDefaults:C}=i;if(n in C)r=C[n];else{const g=In(i);r=C[n]=_.call(null,t),g()}}else r=_;i.ce&&i.ce._setProp(n,r)}s[0]&&(o&&!c?r=!1:s[1]&&(r===""||r===jt(n))&&(r=!0))}return r}const du=new WeakMap;function ta(e,t,n=!1){const r=n?du:t.propsCache,i=r.get(e);if(i)return i;const o=e.props,s={},c=[];let _=!1;if(!oe(e)){const g=y=>{_=!0;const[b,E]=ta(y,t,!0);Ie(s,b),E&&c.push(...E)};!n&&t.mixins.length&&t.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!o&&!_)return ge(e)&&r.set(e,$t),$t;if(ne(o))for(let g=0;g<o.length;g++){const y=bt(o[g]);Vi(y)&&(s[y]=de)}else if(o)for(const g in o){const y=bt(g);if(Vi(y)){const b=o[g],E=s[y]=ne(b)||oe(b)?{type:b}:Ie({},b),h=E.type;let a=!1,u=!0;if(ne(h))for(let p=0;p<h.length;++p){const f=h[p],m=oe(f)&&f.name;if(m==="Boolean"){a=!0;break}else m==="String"&&(u=!1)}else a=oe(h)&&h.name==="Boolean";E[0]=a,E[1]=u,(a||ue(E,"default"))&&c.push(y)}}const C=[s,c];return ge(e)&&r.set(e,C),C}function Vi(e){return e[0]!=="$"&&!dn(e)}const Ci=e=>e==="_"||e==="_ctx"||e==="$stable",Ei=e=>ne(e)?e.map(nt):[nt(e)],pu=(e,t,n)=>{if(t._n)return t;const r=Nc((...i)=>Ei(t(...i)),n);return r._c=!1,r},na=(e,t,n)=>{const r=e._ctx;for(const i in e){if(Ci(i))continue;const o=e[i];if(oe(o))t[i]=pu(i,o,r);else if(o!=null){const s=Ei(o);t[i]=()=>s}}},ra=(e,t)=>{const n=Ei(t);e.slots.default=()=>n},ia=(e,t,n)=>{for(const r in t)(n||!Ci(r))&&(e[r]=t[r])},hu=(e,t,n)=>{const r=e.slots=Ys();if(e.vnode.shapeFlag&32){const i=t._;i?(ia(r,t,n),n&&ms(r,"_",i,!0)):na(t,r)}else t&&ra(e,t)},gu=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,s=de;if(r.shapeFlag&32){const c=t._;c?n&&c===1?o=!1:ia(i,t,n):(o=!t.$stable,na(t,i)),s=t}else t&&(ra(e,t),s={default:1});if(o)for(const c in i)!Ci(c)&&s[c]==null&&delete i[c]},je=xu;function _u(e){return mu(e)}function mu(e,t){const n=pr();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:c,createComment:_,setText:C,setElementText:g,parentNode:y,nextSibling:b,setScopeId:E=rt,insertStaticContent:h}=e,a=(O,D,U,G=null,V=null,W=null,X=void 0,J=null,z=!!D.dynamicChildren)=>{if(O===D)return;O&&!sn(O,D)&&(G=ce(O),K(O,V,W,!0),O=null),D.patchFlag===-2&&(z=!1,D.dynamicChildren=null);const{type:$,ref:Z,shapeFlag:Q}=D;switch($){case mr:u(O,D,U,G);break;case Qt:p(O,D,U,G);break;case Mr:O==null&&f(D,U,G,X);break;case lt:T(O,D,U,G,V,W,X,J,z);break;default:Q&1?l(O,D,U,G,V,W,X,J,z):Q&6?x(O,D,U,G,V,W,X,J,z):(Q&64||Q&128)&&$.process(O,D,U,G,V,W,X,J,z,nn)}Z!=null&&V?_n(Z,O&&O.ref,W,D||O,!D):Z==null&&O&&O.ref!=null&&_n(O.ref,null,W,O,!0)},u=(O,D,U,G)=>{if(O==null)r(D.el=c(D.children),U,G);else{const V=D.el=O.el;D.children!==O.children&&C(V,D.children)}},p=(O,D,U,G)=>{O==null?r(D.el=_(D.children||""),U,G):D.el=O.el},f=(O,D,U,G)=>{[O.el,O.anchor]=h(O.children,D,U,G,O.el,O.anchor)},m=({el:O,anchor:D},U,G)=>{let V;for(;O&&O!==D;)V=b(O),r(O,U,G),O=V;r(D,U,G)},d=({el:O,anchor:D})=>{let U;for(;O&&O!==D;)U=b(O),i(O),O=U;i(D)},l=(O,D,U,G,V,W,X,J,z)=>{D.type==="svg"?X="svg":D.type==="math"&&(X="mathml"),O==null?S(D,U,G,V,W,X,J,z):N(O,D,V,W,X,J,z)},S=(O,D,U,G,V,W,X,J)=>{let z,$;const{props:Z,shapeFlag:Q,transition:Y,dirs:ee}=O;if(z=O.el=s(O.type,W,Z&&Z.is,Z),Q&8?g(z,O.children):Q&16&&w(O.children,z,null,G,V,kr(O,W),X,J),ee&&Ct(O,null,G,"created"),I(z,O,O.scopeId,X,G),Z){for(const pe in Z)pe!=="value"&&!dn(pe)&&o(z,pe,null,Z[pe],W,G);"value"in Z&&o(z,"value",null,Z.value,W),($=Z.onVnodeBeforeMount)&&Ke($,G,O)}ee&&Ct(O,null,G,"beforeMount");const ae=vu(V,Y);ae&&Y.beforeEnter(z),r(z,D,U),(($=Z&&Z.onVnodeMounted)||ae||ee)&&je(()=>{$&&Ke($,G,O),ae&&Y.enter(z),ee&&Ct(O,null,G,"mounted")},V)},I=(O,D,U,G,V)=>{if(U&&E(O,U),G)for(let W=0;W<G.length;W++)E(O,G[W]);if(V){let W=V.subTree;if(D===W||la(W.type)&&(W.ssContent===D||W.ssFallback===D)){const X=V.vnode;I(O,X,X.scopeId,X.slotScopeIds,V.parent)}}},w=(O,D,U,G,V,W,X,J,z=0)=>{for(let $=z;$<O.length;$++){const Z=O[$]=J?yt(O[$]):nt(O[$]);a(null,Z,D,U,G,V,W,X,J)}},N=(O,D,U,G,V,W,X)=>{const J=D.el=O.el;let{patchFlag:z,dynamicChildren:$,dirs:Z}=D;z|=O.patchFlag&16;const Q=O.props||de,Y=D.props||de;let ee;if(U&&Et(U,!1),(ee=Y.onVnodeBeforeUpdate)&&Ke(ee,U,D,O),Z&&Ct(D,O,U,"beforeUpdate"),U&&Et(U,!0),(Q.innerHTML&&Y.innerHTML==null||Q.textContent&&Y.textContent==null)&&g(J,""),$?P(O.dynamicChildren,$,J,U,G,kr(D,V),W):X||k(O,D,J,null,U,G,kr(D,V),W,!1),z>0){if(z&16)A(J,Q,Y,U,V);else if(z&2&&Q.class!==Y.class&&o(J,"class",null,Y.class,V),z&4&&o(J,"style",Q.style,Y.style,V),z&8){const ae=D.dynamicProps;for(let pe=0;pe<ae.length;pe++){const le=ae[pe],Ae=Q[le],Re=Y[le];(Re!==Ae||le==="value")&&o(J,le,Ae,Re,V,U)}}z&1&&O.children!==D.children&&g(J,D.children)}else!X&&$==null&&A(J,Q,Y,U,V);((ee=Y.onVnodeUpdated)||Z)&&je(()=>{ee&&Ke(ee,U,D,O),Z&&Ct(D,O,U,"updated")},G)},P=(O,D,U,G,V,W,X)=>{for(let J=0;J<D.length;J++){const z=O[J],$=D[J],Z=z.el&&(z.type===lt||!sn(z,$)||z.shapeFlag&198)?y(z.el):U;a(z,$,Z,null,G,V,W,X,!0)}},A=(O,D,U,G,V)=>{if(D!==U){if(D!==de)for(const W in D)!dn(W)&&!(W in U)&&o(O,W,D[W],null,V,G);for(const W in U){if(dn(W))continue;const X=U[W],J=D[W];X!==J&&W!=="value"&&o(O,W,J,X,V,G)}"value"in U&&o(O,"value",D.value,U.value,V)}},T=(O,D,U,G,V,W,X,J,z)=>{const $=D.el=O?O.el:c(""),Z=D.anchor=O?O.anchor:c("");let{patchFlag:Q,dynamicChildren:Y,slotScopeIds:ee}=D;ee&&(J=J?J.concat(ee):ee),O==null?(r($,U,G),r(Z,U,G),w(D.children||[],U,Z,V,W,X,J,z)):Q>0&&Q&64&&Y&&O.dynamicChildren?(P(O.dynamicChildren,Y,U,V,W,X,J),(D.key!=null||V&&D===V.subTree)&&oa(O,D,!0)):k(O,D,U,Z,V,W,X,J,z)},x=(O,D,U,G,V,W,X,J,z)=>{D.slotScopeIds=J,O==null?D.shapeFlag&512?V.ctx.activate(D,U,G,X,z):v(D,U,G,V,W,X,z):F(O,D,z)},v=(O,D,U,G,V,W,X)=>{const J=O.component=Bu(O,G,V);if(Gs(O)&&(J.ctx.renderer=nn),qu(J,!1,X),J.asyncDep){if(V&&V.registerDep(J,R,X),!O.el){const z=J.subTree=Dt(Qt);p(null,z,D,U),O.placeholder=z.el}}else R(J,O,D,U,V,W,X)},F=(O,D,U)=>{const G=D.component=O.component;if(Au(O,D,U))if(G.asyncDep&&!G.asyncResolved){q(G,D,U);return}else G.next=D,G.update();else D.el=O.el,G.vnode=D},R=(O,D,U,G,V,W,X)=>{const J=()=>{if(O.isMounted){let{next:Q,bu:Y,u:ee,parent:ae,vnode:pe}=O;{const ze=sa(O);if(ze){Q&&(Q.el=pe.el,q(O,Q,X)),ze.asyncDep.then(()=>{O.isUnmounted||J()});return}}let le=Q,Ae;Et(O,!1),Q?(Q.el=pe.el,q(O,Q,X)):Q=pe,Y&&Jn(Y),(Ae=Q.props&&Q.props.onVnodeBeforeUpdate)&&Ke(Ae,ae,Q,pe),Et(O,!0);const Re=Gi(O),$e=O.subTree;O.subTree=Re,a($e,Re,y($e.el),ce($e),O,V,W),Q.el=Re.el,le===null&&Ru(O,Re.el),ee&&je(ee,V),(Ae=Q.props&&Q.props.onVnodeUpdated)&&je(()=>Ke(Ae,ae,Q,pe),V)}else{let Q;const{el:Y,props:ee}=D,{bm:ae,m:pe,parent:le,root:Ae,type:Re}=O,$e=mn(D);Et(O,!1),ae&&Jn(ae),!$e&&(Q=ee&&ee.onVnodeBeforeMount)&&Ke(Q,le,D),Et(O,!0);{Ae.ce&&Ae.ce._def.shadowRoot!==!1&&Ae.ce._injectChildStyle(Re);const ze=O.subTree=Gi(O);a(null,ze,U,G,O,V,W),D.el=ze.el}if(pe&&je(pe,V),!$e&&(Q=ee&&ee.onVnodeMounted)){const ze=D;je(()=>Ke(Q,le,ze),V)}(D.shapeFlag&256||le&&mn(le.vnode)&&le.vnode.shapeFlag&256)&&O.a&&je(O.a,V),O.isMounted=!0,D=U=G=null}};O.scope.on();const z=O.effect=new ws(J);O.scope.off();const $=O.update=z.run.bind(z),Z=O.job=z.runIfDirty.bind(z);Z.i=O,Z.id=O.uid,z.scheduler=()=>Si(Z),Et(O,!0),$()},q=(O,D,U)=>{D.component=O;const G=O.vnode.props;O.vnode=D,O.next=null,fu(O,D.props,G,U),gu(O,D.children,U),pt(),Ni(O),ht()},k=(O,D,U,G,V,W,X,J,z=!1)=>{const $=O&&O.children,Z=O?O.shapeFlag:0,Q=D.children,{patchFlag:Y,shapeFlag:ee}=D;if(Y>0){if(Y&128){M($,Q,U,G,V,W,X,J,z);return}else if(Y&256){H($,Q,U,G,V,W,X,J,z);return}}ee&8?(Z&16&&se($,V,W),Q!==$&&g(U,Q)):Z&16?ee&16?M($,Q,U,G,V,W,X,J,z):se($,V,W,!0):(Z&8&&g(U,""),ee&16&&w(Q,U,G,V,W,X,J,z))},H=(O,D,U,G,V,W,X,J,z)=>{O=O||$t,D=D||$t;const $=O.length,Z=D.length,Q=Math.min($,Z);let Y;for(Y=0;Y<Q;Y++){const ee=D[Y]=z?yt(D[Y]):nt(D[Y]);a(O[Y],ee,U,null,V,W,X,J,z)}$>Z?se(O,V,W,!0,!1,Q):w(D,U,G,V,W,X,J,z,Q)},M=(O,D,U,G,V,W,X,J,z)=>{let $=0;const Z=D.length;let Q=O.length-1,Y=Z-1;for(;$<=Q&&$<=Y;){const ee=O[$],ae=D[$]=z?yt(D[$]):nt(D[$]);if(sn(ee,ae))a(ee,ae,U,null,V,W,X,J,z);else break;$++}for(;$<=Q&&$<=Y;){const ee=O[Q],ae=D[Y]=z?yt(D[Y]):nt(D[Y]);if(sn(ee,ae))a(ee,ae,U,null,V,W,X,J,z);else break;Q--,Y--}if($>Q){if($<=Y){const ee=Y+1,ae=ee<Z?D[ee].el:G;for(;$<=Y;)a(null,D[$]=z?yt(D[$]):nt(D[$]),U,ae,V,W,X,J,z),$++}}else if($>Y)for(;$<=Q;)K(O[$],V,W,!0),$++;else{const ee=$,ae=$,pe=new Map;for($=ae;$<=Y;$++){const Me=D[$]=z?yt(D[$]):nt(D[$]);Me.key!=null&&pe.set(Me.key,$)}let le,Ae=0;const Re=Y-ae+1;let $e=!1,ze=0;const rn=new Array(Re);for($=0;$<Re;$++)rn[$]=0;for($=ee;$<=Q;$++){const Me=O[$];if(Ae>=Re){K(Me,V,W,!0);continue}let Je;if(Me.key!=null)Je=pe.get(Me.key);else for(le=ae;le<=Y;le++)if(rn[le-ae]===0&&sn(Me,D[le])){Je=le;break}Je===void 0?K(Me,V,W,!0):(rn[Je-ae]=$+1,Je>=ze?ze=Je:$e=!0,a(Me,D[Je],U,null,V,W,X,J,z),Ae++)}const Oi=$e?yu(rn):$t;for(le=Oi.length-1,$=Re-1;$>=0;$--){const Me=ae+$,Je=D[Me],ki=D[Me+1],Di=Me+1<Z?ki.el||ki.placeholder:G;rn[$]===0?a(null,Je,U,Di,V,W,X,J,z):$e&&(le<0||$!==Oi[le]?L(Je,U,Di,2):le--)}}},L=(O,D,U,G,V=null)=>{const{el:W,type:X,transition:J,children:z,shapeFlag:$}=O;if($&6){L(O.component.subTree,D,U,G);return}if($&128){O.suspense.move(D,U,G);return}if($&64){X.move(O,D,U,nn);return}if(X===lt){r(W,D,U);for(let Q=0;Q<z.length;Q++)L(z[Q],D,U,G);r(O.anchor,D,U);return}if(X===Mr){m(O,D,U);return}if(G!==2&&$&1&&J)if(G===0)J.beforeEnter(W),r(W,D,U),je(()=>J.enter(W),V);else{const{leave:Q,delayLeave:Y,afterLeave:ee}=J,ae=()=>{O.ctx.isUnmounted?i(W):r(W,D,U)},pe=()=>{W._isLeaving&&W[Hc](!0),Q(W,()=>{ae(),ee&&ee()})};Y?Y(W,ae,pe):pe()}else r(W,D,U)},K=(O,D,U,G=!1,V=!1)=>{const{type:W,props:X,ref:J,children:z,dynamicChildren:$,shapeFlag:Z,patchFlag:Q,dirs:Y,cacheIndex:ee}=O;if(Q===-2&&(V=!1),J!=null&&(pt(),_n(J,null,U,O,!0),ht()),ee!=null&&(D.renderCache[ee]=void 0),Z&256){D.ctx.deactivate(O);return}const ae=Z&1&&Y,pe=!mn(O);let le;if(pe&&(le=X&&X.onVnodeBeforeUnmount)&&Ke(le,D,O),Z&6)ie(O.component,U,G);else{if(Z&128){O.suspense.unmount(U,G);return}ae&&Ct(O,null,D,"beforeUnmount"),Z&64?O.type.remove(O,D,U,nn,G):$&&!$.hasOnce&&(W!==lt||Q>0&&Q&64)?se($,D,U,!1,!0):(W===lt&&Q&384||!V&&Z&16)&&se(z,D,U),G&&B(O)}(pe&&(le=X&&X.onVnodeUnmounted)||ae)&&je(()=>{le&&Ke(le,D,O),ae&&Ct(O,null,D,"unmounted")},U)},B=O=>{const{type:D,el:U,anchor:G,transition:V}=O;if(D===lt){te(U,G);return}if(D===Mr){d(O);return}const W=()=>{i(U),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(O.shapeFlag&1&&V&&!V.persisted){const{leave:X,delayLeave:J}=V,z=()=>X(U,W);J?J(O.el,W,z):z()}else W()},te=(O,D)=>{let U;for(;O!==D;)U=b(O),i(O),O=U;i(D)},ie=(O,D,U)=>{const{bum:G,scope:V,job:W,subTree:X,um:J,m:z,a:$}=O;Wi(z),Wi($),G&&Jn(G),V.stop(),W&&(W.flags|=8,K(X,O,D,U)),J&&je(J,D),je(()=>{O.isUnmounted=!0},D)},se=(O,D,U,G=!1,V=!1,W=0)=>{for(let X=W;X<O.length;X++)K(O[X],D,U,G,V)},ce=O=>{if(O.shapeFlag&6)return ce(O.component.subTree);if(O.shapeFlag&128)return O.suspense.next();const D=b(O.anchor||O.el),U=D&&D[Fc];return U?b(U):D};let _e=!1;const Fe=(O,D,U)=>{O==null?D._vnode&&K(D._vnode,null,null,!0):a(D._vnode||null,O,D,null,null,null,U),D._vnode=O,_e||(_e=!0,Ni(),Hs(),_e=!1)},nn={p:a,um:K,m:L,r:B,mt:v,mc:w,pc:k,pbc:P,n:ce,o:e};return{render:Fe,hydrate:void 0,createApp:cu(Fe)}}function kr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Et({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function vu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function oa(e,t,n=!1){const r=e.children,i=t.children;if(ne(r)&&ne(i))for(let o=0;o<r.length;o++){const s=r[o];let c=i[o];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[o]=yt(i[o]),c.el=s.el),!n&&c.patchFlag!==-2&&oa(s,c)),c.type===mr&&c.patchFlag!==-1&&(c.el=s.el),c.type===Qt&&!c.el&&(c.el=s.el)}}function yu(e){const t=e.slice(),n=[0];let r,i,o,s,c;const _=e.length;for(r=0;r<_;r++){const C=e[r];if(C!==0){if(i=n[n.length-1],e[i]<C){t[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)c=o+s>>1,e[n[c]]<C?o=c+1:s=c;C<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=t[s];return n}function sa(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:sa(t)}function Wi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const bu=Symbol.for("v-scx"),Su=()=>Kn(bu);function Dr(e,t,n){return aa(e,t,n)}function aa(e,t,n=de){const{immediate:r,deep:i,flush:o,once:s}=n,c=Ie({},n),_=t&&r||!t&&o!=="post";let C;if(En){if(o==="sync"){const E=Su();C=E.__watcherHandles||(E.__watcherHandles=[])}else if(!_){const E=()=>{};return E.stop=rt,E.resume=rt,E.pause=rt,E}}const g=Te;c.call=(E,h,a)=>ot(E,g,h,a);let y=!1;o==="post"?c.scheduler=E=>{je(E,g&&g.suspense)}:o!=="sync"&&(y=!0,c.scheduler=(E,h)=>{h?E():Si(E)}),c.augmentJob=E=>{t&&(E.flags|=4),y&&(E.flags|=2,g&&(E.id=g.uid,E.i=g))};const b=kc(e,t,c);return En&&(C?C.push(b):_&&b()),b}function wu(e,t,n){const r=this.proxy,i=ve(e)?e.includes(".")?ca(r,e):()=>r[e]:e.bind(r,r);let o;oe(t)?o=t:(o=t.handler,n=t);const s=In(this),c=aa(i,o.bind(r),n);return s(),c}function ca(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const Cu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${bt(t)}Modifiers`]||e[`${jt(t)}Modifiers`];function Eu(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||de;let i=n;const o=t.startsWith("update:"),s=o&&Cu(r,t.slice(7));s&&(s.trim&&(i=n.map(g=>ve(g)?g.trim():g)),s.number&&(i=n.map(Vr)));let c,_=r[c=Pr(t)]||r[c=Pr(bt(t))];!_&&o&&(_=r[c=Pr(jt(t))]),_&&ot(_,e,6,i);const C=r[c+"Once"];if(C){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,ot(C,e,6,i)}}const Tu=new WeakMap;function ua(e,t,n=!1){const r=n?Tu:t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let s={},c=!1;if(!oe(e)){const _=C=>{const g=ua(C,t,!0);g&&(c=!0,Ie(s,g))};!n&&t.mixins.length&&t.mixins.forEach(_),e.extends&&_(e.extends),e.mixins&&e.mixins.forEach(_)}return!o&&!c?(ge(e)&&r.set(e,null),null):(ne(o)?o.forEach(_=>s[_]=null):Ie(s,o),ge(e)&&r.set(e,s),s)}function _r(e,t){return!e||!lr(t)?!1:(t=t.slice(2).replace(/Once$/,""),ue(e,t[0].toLowerCase()+t.slice(1))||ue(e,jt(t))||ue(e,t))}function Gi(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:c,emit:_,render:C,renderCache:g,props:y,data:b,setupState:E,ctx:h,inheritAttrs:a}=e,u=ir(e);let p,f;try{if(n.shapeFlag&4){const d=i||r,l=d;p=nt(C.call(l,d,g,y,E,b,h)),f=c}else{const d=t;p=nt(d.length>1?d(y,{attrs:c,slots:s,emit:_}):d(y,null)),f=t.props?c:Pu(c)}}catch(d){yn.length=0,hr(d,e,1),p=Dt(Qt)}let m=p;if(f&&a!==!1){const d=Object.keys(f),{shapeFlag:l}=m;d.length&&l&7&&(o&&d.some(ci)&&(f=Iu(f,o)),m=Yt(m,f,!1,!0))}return n.dirs&&(m=Yt(m,null,!1,!0),m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&wi(m,n.transition),p=m,ir(u),p}const Pu=e=>{let t;for(const n in e)(n==="class"||n==="style"||lr(n))&&((t||(t={}))[n]=e[n]);return t},Iu=(e,t)=>{const n={};for(const r in e)(!ci(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Au(e,t,n){const{props:r,children:i,component:o}=e,{props:s,children:c,patchFlag:_}=t,C=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&_>=0){if(_&1024)return!0;if(_&16)return r?$i(r,s,C):!!s;if(_&8){const g=t.dynamicProps;for(let y=0;y<g.length;y++){const b=g[y];if(s[b]!==r[b]&&!_r(C,b))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===s?!1:r?s?$i(r,s,C):!0:!!s;return!1}function $i(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!_r(n,o))return!0}return!1}function Ru({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const la=e=>e.__isSuspense;function xu(e,t){t&&t.pendingBranch?ne(e)?t.effects.push(...e):t.effects.push(e):jc(e)}const lt=Symbol.for("v-fgt"),mr=Symbol.for("v-txt"),Qt=Symbol.for("v-cmt"),Mr=Symbol.for("v-stc"),yn=[];let Ue=null;function Ou(e=!1){yn.push(Ue=e?null:[])}function ku(){yn.pop(),Ue=yn[yn.length-1]||null}let Cn=1;function zi(e,t=!1){Cn+=e,e<0&&Ue&&t&&(Ue.hasOnce=!0)}function Du(e){return e.dynamicChildren=Cn>0?Ue||$t:null,ku(),Cn>0&&Ue&&Ue.push(e),e}function Mu(e,t,n,r,i,o){return Du(ct(e,t,n,r,i,o,!0))}function fa(e){return e?e.__v_isVNode===!0:!1}function sn(e,t){return e.type===t.type&&e.key===t.key}const da=({key:e})=>e??null,Xn=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ve(e)||Pe(e)||oe(e)?{i:He,r:e,k:t,f:!!n}:e:null);function ct(e,t=null,n=null,r=0,i=null,o=e===lt?0:1,s=!1,c=!1){const _={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&da(t),ref:t&&Xn(t),scopeId:Vs,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:He};return c?(Ti(_,n),o&128&&e.normalize(_)):n&&(_.shapeFlag|=ve(n)?8:16),Cn>0&&!s&&Ue&&(_.patchFlag>0||o&6)&&_.patchFlag!==32&&Ue.push(_),_}const Dt=Lu;function Lu(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===eu)&&(e=Qt),fa(e)){const c=Yt(e,t,!0);return n&&Ti(c,n),Cn>0&&!o&&Ue&&(c.shapeFlag&6?Ue[Ue.indexOf(e)]=c:Ue.push(c)),c.patchFlag=-2,c}if($u(e)&&(e=e.__vccOpts),t){t=ju(t);let{class:c,style:_}=t;c&&!ve(c)&&(t.class=di(c)),ge(_)&&(bi(_)&&!ne(_)&&(_=Ie({},_)),t.style=fi(_))}const s=ve(e)?1:la(e)?128:Bc(e)?64:ge(e)?4:oe(e)?2:0;return ct(e,t,n,r,i,s,o,!0)}function ju(e){return e?bi(e)||Zs(e)?Ie({},e):e:null}function Yt(e,t,n=!1,r=!1){const{props:i,ref:o,patchFlag:s,children:c,transition:_}=e,C=t?Nu(i||{},t):i,g={__v_isVNode:!0,__v_skip:!0,type:e.type,props:C,key:C&&da(C),ref:t&&t.ref?n&&o?ne(o)?o.concat(Xn(t)):[o,Xn(t)]:Xn(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==lt?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:_,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Yt(e.ssContent),ssFallback:e.ssFallback&&Yt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return _&&r&&wi(g,_.clone(g)),g}function pa(e=" ",t=0){return Dt(mr,null,e,t)}function nt(e){return e==null||typeof e=="boolean"?Dt(Qt):ne(e)?Dt(lt,null,e.slice()):fa(e)?yt(e):Dt(mr,null,String(e))}function yt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Yt(e)}function Ti(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ne(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Ti(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!Zs(t)?t._ctx=He:i===3&&He&&(He.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else oe(t)?(t={default:t,_ctx:He},n=32):(t=String(t),r&64?(n=16,t=[pa(t)]):n=8);e.children=t,e.shapeFlag|=n}function Nu(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=di([t.class,r.class]));else if(i==="style")t.style=fi([t.style,r.style]);else if(lr(i)){const o=t[i],s=r[i];s&&o!==s&&!(ne(o)&&o.includes(s))&&(t[i]=o?[].concat(o,s):s)}else i!==""&&(t[i]=r[i])}return t}function Ke(e,t,n,r=null){ot(e,t,7,[n,r])}const Uu=Xs();let Fu=0;function Bu(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||Uu,o={uid:Fu++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new oc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ta(r,i),emitsOptions:ua(r,i),emit:null,emitted:null,propsDefaults:de,inheritAttrs:r.inheritAttrs,ctx:de,data:de,props:de,attrs:de,slots:de,refs:de,setupState:de,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Eu.bind(null,o),e.ce&&e.ce(o),o}let Te=null;const Hu=()=>Te||He;let ar,Zr;{const e=pr(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),o=>{i.length>1?i.forEach(s=>s(o)):i[0](o)}};ar=t("__VUE_INSTANCE_SETTERS__",n=>Te=n),Zr=t("__VUE_SSR_SETTERS__",n=>En=n)}const In=e=>{const t=Te;return ar(e),e.scope.on(),()=>{e.scope.off(),ar(t)}},Ji=()=>{Te&&Te.scope.off(),ar(null)};function ha(e){return e.vnode.shapeFlag&4}let En=!1;function qu(e,t=!1,n=!1){t&&Zr(t);const{props:r,children:i}=e.vnode,o=ha(e);lu(e,r,o,t),hu(e,i,n||t);const s=o?Vu(e,t):void 0;return t&&Zr(!1),s}function Vu(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,tu);const{setup:r}=n;if(r){pt();const i=e.setupContext=r.length>1?Gu(e):null,o=In(e),s=Pn(r,e,0,[e.props,i]),c=ps(s);if(ht(),o(),(c||e.sp)&&!mn(e)&&Ws(e),c){if(s.then(Ji,Ji),t)return s.then(_=>{Ki(e,_)}).catch(_=>{hr(_,e,0)});e.asyncDep=s}else Ki(e,s)}else ga(e)}function Ki(e,t,n){oe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ge(t)&&(e.setupState=Us(t)),ga(e)}function ga(e,t,n){const r=e.type;e.render||(e.render=r.render||rt);{const i=In(e);pt();try{nu(e)}finally{ht(),i()}}}const Wu={get(e,t){return be(e,"get",""),e[t]}};function Gu(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Wu),slots:e.slots,emit:e.emit,expose:t}}function vr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Us(Pc(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in vn)return vn[n](e)},has(t,n){return n in t||n in vn}})):e.proxy}function $u(e){return oe(e)&&"__vccOpts"in e}const zu=(e,t)=>xc(e,t,En),Ju="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ei;const Xi=typeof window<"u"&&window.trustedTypes;if(Xi)try{ei=Xi.createPolicy("vue",{createHTML:e=>e})}catch{}const _a=ei?e=>ei.createHTML(e):e=>e,Ku="http://www.w3.org/2000/svg",Xu="http://www.w3.org/1998/Math/MathML",ut=typeof document<"u"?document:null,Qi=ut&&ut.createElement("template"),Qu={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?ut.createElementNS(Ku,e):t==="mathml"?ut.createElementNS(Xu,e):n?ut.createElement(e,{is:n}):ut.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>ut.createTextNode(e),createComment:e=>ut.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ut.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const s=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{Qi.innerHTML=_a(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const c=Qi.content;if(r==="svg"||r==="mathml"){const _=c.firstChild;for(;_.firstChild;)c.appendChild(_.firstChild);c.removeChild(_)}t.insertBefore(c,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Yu=Symbol("_vtc");function Zu(e,t,n){const r=e[Yu];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Yi=Symbol("_vod"),el=Symbol("_vsh"),tl=Symbol(""),nl=/(?:^|;)\s*display\s*:/;function rl(e,t,n){const r=e.style,i=ve(n);let o=!1;if(n&&!i){if(t)if(ve(t))for(const s of t.split(";")){const c=s.slice(0,s.indexOf(":")).trim();n[c]==null&&Qn(r,c,"")}else for(const s in t)n[s]==null&&Qn(r,s,"");for(const s in n)s==="display"&&(o=!0),Qn(r,s,n[s])}else if(i){if(t!==n){const s=r[tl];s&&(n+=";"+s),r.cssText=n,o=nl.test(n)}}else t&&e.removeAttribute("style");Yi in e&&(e[Yi]=o?r.display:"",e[el]&&(r.display="none"))}const Zi=/\s*!important$/;function Qn(e,t,n){if(ne(n))n.forEach(r=>Qn(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=il(e,t);Zi.test(n)?e.setProperty(jt(r),n.replace(Zi,""),"important"):e[r]=n}}const eo=["Webkit","Moz","ms"],Lr={};function il(e,t){const n=Lr[t];if(n)return n;let r=bt(t);if(r!=="filter"&&r in e)return Lr[t]=r;r=_s(r);for(let i=0;i<eo.length;i++){const o=eo[i]+r;if(o in e)return Lr[t]=o}return t}const to="http://www.w3.org/1999/xlink";function no(e,t,n,r,i,o=ic(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(to,t.slice(6,t.length)):e.setAttributeNS(to,t,n):n==null||o&&!vs(n)?e.removeAttribute(t):e.setAttribute(t,o?"":St(n)?String(n):n)}function ro(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?_a(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const c=o==="OPTION"?e.getAttribute("value")||"":e.value,_=n==null?e.type==="checkbox"?"on":"":String(n);(c!==_||!("_value"in e))&&(e.value=_),n==null&&e.removeAttribute(t),e._value=n;return}let s=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=vs(n):n==null&&c==="string"?(n="",s=!0):c==="number"&&(n=0,s=!0)}try{e[t]=n}catch{}s&&e.removeAttribute(i||t)}function Gt(e,t,n,r){e.addEventListener(t,n,r)}function ol(e,t,n,r){e.removeEventListener(t,n,r)}const io=Symbol("_vei");function sl(e,t,n,r,i=null){const o=e[io]||(e[io]={}),s=o[t];if(r&&s)s.value=r;else{const[c,_]=al(t);if(r){const C=o[t]=ll(r,i);Gt(e,c,C,_)}else s&&(ol(e,c,s,_),o[t]=void 0)}}const oo=/(?:Once|Passive|Capture)$/;function al(e){let t;if(oo.test(e)){t={};let r;for(;r=e.match(oo);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):jt(e.slice(2)),t]}let jr=0;const cl=Promise.resolve(),ul=()=>jr||(cl.then(()=>jr=0),jr=Date.now());function ll(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ot(fl(r,n.value),t,5,[r])};return n.value=e,n.attached=ul(),n}function fl(e,t){if(ne(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const so=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,dl=(e,t,n,r,i,o)=>{const s=i==="svg";t==="class"?Zu(e,r,s):t==="style"?rl(e,n,r):lr(t)?ci(t)||sl(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):pl(e,t,r,s))?(ro(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&no(e,t,r,s,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ve(r))?ro(e,bt(t),r,o,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),no(e,t,r,s))};function pl(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&so(t)&&oe(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return so(t)&&ve(n)?!1:t in e}const ao=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ne(t)?n=>Jn(t,n):t};function hl(e){e.target.composing=!0}function co(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Nr=Symbol("_assign"),gl={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[Nr]=ao(i);const o=r||i.props&&i.props.type==="number";Gt(e,t?"change":"input",s=>{if(s.target.composing)return;let c=e.value;n&&(c=c.trim()),o&&(c=Vr(c)),e[Nr](c)}),n&&Gt(e,"change",()=>{e.value=e.value.trim()}),t||(Gt(e,"compositionstart",hl),Gt(e,"compositionend",co),Gt(e,"change",co))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},s){if(e[Nr]=ao(s),e.composing)return;const c=(o||e.type==="number")&&!/^0\d/.test(e.value)?Vr(e.value):e.value,_=t??"";c!==_&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===_)||(e.value=_))}},_l=Ie({patchProp:dl},Qu);let uo;function ml(){return uo||(uo=_u(_l))}const vl=((...e)=>{const t=ml().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=bl(r);if(!i)return;const o=t._component;!oe(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const s=n(i,!1,yl(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t});function yl(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function bl(e){return ve(e)?document.querySelector(e):e}var lo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ur={},_t={},Ln={exports:{}},fo;function We(){if(fo)return Ln.exports;fo=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(l,S,I){return Function.prototype.apply.call(l,S,I)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:n=function(l){return Object.getOwnPropertyNames(l)};function r(d){console&&console.warn&&console.warn(d)}var i=Number.isNaN||function(l){return l!==l};function o(){o.init.call(this)}Ln.exports=o,Ln.exports.once=p,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function c(d){if(typeof d!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof d)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(d){if(typeof d!="number"||d<0||i(d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+d+".");s=d}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(l){if(typeof l!="number"||l<0||i(l))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");return this._maxListeners=l,this};function _(d){return d._maxListeners===void 0?o.defaultMaxListeners:d._maxListeners}o.prototype.getMaxListeners=function(){return _(this)},o.prototype.emit=function(l){for(var S=[],I=1;I<arguments.length;I++)S.push(arguments[I]);var w=l==="error",N=this._events;if(N!==void 0)w=w&&N.error===void 0;else if(!w)return!1;if(w){var P;if(S.length>0&&(P=S[0]),P instanceof Error)throw P;var A=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw A.context=P,A}var T=N[l];if(T===void 0)return!1;if(typeof T=="function")t(T,this,S);else for(var x=T.length,v=h(T,x),I=0;I<x;++I)t(v[I],this,S);return!0};function C(d,l,S,I){var w,N,P;if(c(S),N=d._events,N===void 0?(N=d._events=Object.create(null),d._eventsCount=0):(N.newListener!==void 0&&(d.emit("newListener",l,S.listener?S.listener:S),N=d._events),P=N[l]),P===void 0)P=N[l]=S,++d._eventsCount;else if(typeof P=="function"?P=N[l]=I?[S,P]:[P,S]:I?P.unshift(S):P.push(S),w=_(d),w>0&&P.length>w&&!P.warned){P.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(l)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=d,A.type=l,A.count=P.length,r(A)}return d}o.prototype.addListener=function(l,S){return C(this,l,S,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(l,S){return C(this,l,S,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(d,l,S){var I={fired:!1,wrapFn:void 0,target:d,type:l,listener:S},w=g.bind(I);return w.listener=S,I.wrapFn=w,w}o.prototype.once=function(l,S){return c(S),this.on(l,y(this,l,S)),this},o.prototype.prependOnceListener=function(l,S){return c(S),this.prependListener(l,y(this,l,S)),this},o.prototype.removeListener=function(l,S){var I,w,N,P,A;if(c(S),w=this._events,w===void 0)return this;if(I=w[l],I===void 0)return this;if(I===S||I.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete w[l],w.removeListener&&this.emit("removeListener",l,I.listener||S));else if(typeof I!="function"){for(N=-1,P=I.length-1;P>=0;P--)if(I[P]===S||I[P].listener===S){A=I[P].listener,N=P;break}if(N<0)return this;N===0?I.shift():a(I,N),I.length===1&&(w[l]=I[0]),w.removeListener!==void 0&&this.emit("removeListener",l,A||S)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(l){var S,I,w;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[l]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[l]),this;if(arguments.length===0){var N=Object.keys(I),P;for(w=0;w<N.length;++w)P=N[w],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=I[l],typeof S=="function")this.removeListener(l,S);else if(S!==void 0)for(w=S.length-1;w>=0;w--)this.removeListener(l,S[w]);return this};function b(d,l,S){var I=d._events;if(I===void 0)return[];var w=I[l];return w===void 0?[]:typeof w=="function"?S?[w.listener||w]:[w]:S?u(w):h(w,w.length)}o.prototype.listeners=function(l){return b(this,l,!0)},o.prototype.rawListeners=function(l){return b(this,l,!1)},o.listenerCount=function(d,l){return typeof d.listenerCount=="function"?d.listenerCount(l):E.call(d,l)},o.prototype.listenerCount=E;function E(d){var l=this._events;if(l!==void 0){var S=l[d];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function h(d,l){for(var S=new Array(l),I=0;I<l;++I)S[I]=d[I];return S}function a(d,l){for(;l+1<d.length;l++)d[l]=d[l+1];d.pop()}function u(d){for(var l=new Array(d.length),S=0;S<l.length;++S)l[S]=d[S].listener||d[S];return l}function p(d,l){return new Promise(function(S,I){function w(P){d.removeListener(l,N),I(P)}function N(){typeof d.removeListener=="function"&&d.removeListener("error",w),S([].slice.call(arguments))}m(d,l,N,{once:!0}),l!=="error"&&f(d,w,{once:!0})})}function f(d,l,S){typeof d.on=="function"&&m(d,"error",l,S)}function m(d,l,S,I){if(typeof d.on=="function")I.once?d.once(l,S):d.on(l,S);else if(typeof d.addEventListener=="function")d.addEventListener(l,function w(N){I.once&&d.removeEventListener(l,w),S(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof d)}return Ln.exports}var Ut={},po;function ma(){if(po)return Ut;po=1;var e=Ut&&Ut.__extends||(function(){var r=function(i,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(s[_]=c[_])},r(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");r(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}})();Object.defineProperty(Ut,"__esModule",{value:!0});var t=We(),n=(function(r){e(i,r);function i(o){var s=r.call(this)||this;return Object.defineProperties(s,{_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var c=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var _=Math.random(),C=Math.floor(_*this._jitter*c);c=(Math.floor(_*10)&1)===0?c-C:c+C}return Math.min(c,this._max)|0}},_factor:{value:o.factor||2},_jitter:{value:o.jitter>0&&o.jitter<=1?o.jitter:0},_max:{value:o.max||1e4},_min:{value:o.min||100},_timeoutID:{value:null,writable:!0}}),s}return i.prototype.backoff=function(){var o=this,s=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this.emit("backoff",this._attempts,s),this._timeoutID=setTimeout(function(){o.emit("ready",o._attempts,s),o._attempts++},s)},i.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},i})(t.EventEmitter);return Ut.default=n,Ut}var Be={},Yn={exports:{}},Sl=Yn.exports,ho;function va(){return ho||(ho=1,(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(Sl,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function o(a,u){var p=a[u];if(typeof p.bind=="function")return p.bind(a);try{return Function.prototype.bind.call(p,a)}catch{return function(){return Function.prototype.apply.apply(p,[a,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(a){return a==="debug"&&(a="log"),typeof console===n?!1:a==="trace"&&r?s:console[a]!==void 0?o(console,a):console.log!==void 0?o(console,"log"):t}function _(a,u){for(var p=0;p<i.length;p++){var f=i[p];this[f]=p<a?t:this.methodFactory(f,a,u)}this.log=this.debug}function C(a,u,p){return function(){typeof console!==n&&(_.call(this,u,p),this[a].apply(this,arguments))}}function g(a,u,p){return c(a)||C.apply(this,arguments)}function y(a,u,p){var f=this,m,d="loglevel";a&&(d+=":"+a);function l(w){var N=(i[w]||"silent").toUpperCase();if(typeof window!==n){try{window.localStorage[d]=N;return}catch{}try{window.document.cookie=encodeURIComponent(d)+"="+N+";"}catch{}}}function S(){var w;if(typeof window!==n){try{w=window.localStorage[d]}catch{}if(typeof w===n)try{var N=window.document.cookie,P=N.indexOf(encodeURIComponent(d)+"=");P!==-1&&(w=/^([^;]+)/.exec(N.slice(P))[1])}catch{}return f.levels[w]===void 0&&(w=void 0),w}}f.name=a,f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=p||g,f.getLevel=function(){return m},f.setLevel=function(w,N){if(typeof w=="string"&&f.levels[w.toUpperCase()]!==void 0&&(w=f.levels[w.toUpperCase()]),typeof w=="number"&&w>=0&&w<=f.levels.SILENT){if(m=w,N!==!1&&l(w),_.call(f,w,a),typeof console===n&&w<f.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+w},f.setDefaultLevel=function(w){S()||f.setLevel(w,!1)},f.enableAll=function(w){f.setLevel(f.levels.TRACE,w)},f.disableAll=function(w){f.setLevel(f.levels.SILENT,w)};var I=S();I==null&&(I=u??"WARN"),f.setLevel(I,!1)}var b=new y,E={};b.getLogger=function(u){if(typeof u!="string"||u==="")throw new TypeError("You must supply a name when creating a logger.");var p=E[u];return p||(p=E[u]=new y(u,b.getLevel(),b.methodFactory)),p};var h=typeof window!==n?window.log:void 0;return b.noConflict=function(){return typeof window!==n&&window.log===b&&(window.log=h),b},b.getLoggers=function(){return E},b})})(Yn)),Yn.exports}var Xe={},an={},cn={},Ft={},go;function wl(){if(go)return Ft;go=1;var e=Ft&&Ft.__extends||(function(){var n=function(r,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c])},n(r,i)};return function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(r,i);function o(){this.constructor=r}r.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}})();Object.defineProperty(Ft,"__esModule",{value:!0});var t=(function(n){e(r,n);function r(i,o){var s=n.call(this)||this;Object.setPrototypeOf(s,r.prototype);var c=typeof i=="string"?i:s.explanation,_=typeof i=="object"?i:o;return s.message="".concat(s.name," (").concat(s.code,"): ").concat(c),s.originalError=_,s}return r})(Error);return Ft.default=t,Ft}var _o;function Cl(){return _o||(_o=1,(function(e){var t=cn&&cn.__extends||(function(){var b=function(E,h){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(a[p]=u[p])},b(E,h)};return function(E,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");b(E,h);function a(){this.constructor=E}E.prototype=h===null?Object.create(h):(a.prototype=h.prototype,new a)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.errorsByCode=e.MediaErrors=e.SignalingErrors=e.UserMediaErrors=e.MalformedRequestErrors=e.GeneralErrors=e.SIPServerErrors=e.ClientErrors=e.SignatureValidationErrors=e.AuthorizationErrors=e.TwilioError=void 0;var n=wl();e.TwilioError=n.default;var r;(function(b){var E=(function(u){t(p,u);function p(f,m){var d=u.call(this,f,m)||this;d.causes=[],d.code=20101,d.description="Invalid access token",d.explanation="Twilio was unable to validate your Access Token",d.name="AccessTokenInvalid",d.solutions=[],Object.setPrototypeOf(d,b.AccessTokenInvalid.prototype);var l=typeof f=="string"?f:d.explanation,S=typeof f=="object"?f:m;return d.message="".concat(d.name," (").concat(d.code,"): ").concat(l),d.originalError=S,d}return p})(n.default);b.AccessTokenInvalid=E;var h=(function(u){t(p,u);function p(f,m){var d=u.call(this,f,m)||this;d.causes=[],d.code=20104,d.description="Access token expired or expiration date invalid",d.explanation="The Access Token provided to the Twilio API has expired, the expiration time specified in the token was invalid, or the expiration time specified was too far in the future",d.name="AccessTokenExpired",d.solutions=[],Object.setPrototypeOf(d,b.AccessTokenExpired.prototype);var l=typeof f=="string"?f:d.explanation,S=typeof f=="object"?f:m;return d.message="".concat(d.name," (").concat(d.code,"): ").concat(l),d.originalError=S,d}return p})(n.default);b.AccessTokenExpired=h;var a=(function(u){t(p,u);function p(f,m){var d=u.call(this,f,m)||this;d.causes=[],d.code=20151,d.description="Authentication Failed",d.explanation="The Authentication with the provided JWT failed",d.name="AuthenticationFailed",d.solutions=[],Object.setPrototypeOf(d,b.AuthenticationFailed.prototype);var l=typeof f=="string"?f:d.explanation,S=typeof f=="object"?f:m;return d.message="".concat(d.name," (").concat(d.code,"): ").concat(l),d.originalError=S,d}return p})(n.default);b.AuthenticationFailed=a})(r||(e.AuthorizationErrors=r={}));var i;(function(b){var E=(function(h){t(a,h);function a(u,p){var f=h.call(this,u,p)||this;f.causes=["The access token has an invalid Account SID, API Key, or API Key Secret."],f.code=31202,f.description="Signature validation failed.",f.explanation="The provided access token failed signature validation.",f.name="AccessTokenSignatureValidationFailed",f.solutions=["Ensure the Account SID, API Key, and API Key Secret are valid when generating your access token."],Object.setPrototypeOf(f,b.AccessTokenSignatureValidationFailed.prototype);var m=typeof u=="string"?u:f.explanation,d=typeof u=="object"?u:p;return f.message="".concat(f.name," (").concat(f.code,"): ").concat(m),f.originalError=d,f}return a})(n.default);b.AccessTokenSignatureValidationFailed=E})(i||(e.SignatureValidationErrors=i={}));var o;(function(b){var E=(function(p){t(f,p);function f(m,d){var l=p.call(this,m,d)||this;l.causes=[],l.code=31400,l.description="Bad Request (HTTP/SIP)",l.explanation="The request could not be understood due to malformed syntax.",l.name="BadRequest",l.solutions=[],Object.setPrototypeOf(l,b.BadRequest.prototype);var S=typeof m=="string"?m:l.explanation,I=typeof m=="object"?m:d;return l.message="".concat(l.name," (").concat(l.code,"): ").concat(S),l.originalError=I,l}return f})(n.default);b.BadRequest=E;var h=(function(p){t(f,p);function f(m,d){var l=p.call(this,m,d)||this;l.causes=["The outbound call was made to an invalid phone number.","The TwiML application sid is missing a Voice URL."],l.code=31404,l.description="Not Found (HTTP/SIP)",l.explanation="The server has not found anything matching the request.",l.name="NotFound",l.solutions=["Ensure the phone number dialed is valid.","Ensure the TwiML application is configured correctly with a Voice URL link."],Object.setPrototypeOf(l,b.NotFound.prototype);var S=typeof m=="string"?m:l.explanation,I=typeof m=="object"?m:d;return l.message="".concat(l.name," (").concat(l.code,"): ").concat(S),l.originalError=I,l}return f})(n.default);b.NotFound=h;var a=(function(p){t(f,p);function f(m,d){var l=p.call(this,m,d)||this;l.causes=[],l.code=31480,l.description="Temporarily Unavailable (SIP)",l.explanation="The callee is currently unavailable.",l.name="TemporarilyUnavailable",l.solutions=[],Object.setPrototypeOf(l,b.TemporarilyUnavailable.prototype);var S=typeof m=="string"?m:l.explanation,I=typeof m=="object"?m:d;return l.message="".concat(l.name," (").concat(l.code,"): ").concat(S),l.originalError=I,l}return f})(n.default);b.TemporarilyUnavailable=a;var u=(function(p){t(f,p);function f(m,d){var l=p.call(this,m,d)||this;l.causes=[],l.code=31486,l.description="Busy Here (SIP)",l.explanation="The callee is busy.",l.name="BusyHere",l.solutions=[],Object.setPrototypeOf(l,b.BusyHere.prototype);var S=typeof m=="string"?m:l.explanation,I=typeof m=="object"?m:d;return l.message="".concat(l.name," (").concat(l.code,"): ").concat(S),l.originalError=I,l}return f})(n.default);b.BusyHere=u})(o||(e.ClientErrors=o={}));var s;(function(b){var E=(function(h){t(a,h);function a(u,p){var f=h.call(this,u,p)||this;f.causes=[],f.code=31603,f.description="Decline (SIP)",f.explanation="The callee does not wish to participate in the call.",f.name="Decline",f.solutions=[],Object.setPrototypeOf(f,b.Decline.prototype);var m=typeof u=="string"?u:f.explanation,d=typeof u=="object"?u:p;return f.message="".concat(f.name," (").concat(f.code,"): ").concat(m),f.originalError=d,f}return a})(n.default);b.Decline=E})(s||(e.SIPServerErrors=s={}));var c;(function(b){var E=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=[],w.code=31e3,w.description="Unknown Error",w.explanation="An unknown error has occurred. See error details for more information.",w.name="UnknownError",w.solutions=[],Object.setPrototypeOf(w,b.UnknownError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.UnknownError=E;var h=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=[],w.code=31001,w.description="Application Not Found",w.explanation="",w.name="ApplicationNotFoundError",w.solutions=[],Object.setPrototypeOf(w,b.ApplicationNotFoundError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.ApplicationNotFoundError=h;var a=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=[],w.code=31002,w.description="Connection Declined",w.explanation="",w.name="ConnectionDeclinedError",w.solutions=[],Object.setPrototypeOf(w,b.ConnectionDeclinedError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.ConnectionDeclinedError=a;var u=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=[],w.code=31003,w.description="Connection Timeout",w.explanation="The server could not produce a response within a suitable amount of time.",w.name="ConnectionTimeoutError",w.solutions=[],Object.setPrototypeOf(w,b.ConnectionTimeoutError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.ConnectionTimeoutError=u;var p=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=[],w.code=31005,w.description="Connection error",w.explanation="A connection error occurred during the call",w.name="ConnectionError",w.solutions=[],Object.setPrototypeOf(w,b.ConnectionError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.ConnectionError=p;var f=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=["The incoming call was cancelled because it was not answered in time or it was accepted/rejected by another application instance registered with the same identity."],w.code=31008,w.description="Call cancelled",w.explanation="Unable to answer because the call has ended",w.name="CallCancelledError",w.solutions=[],Object.setPrototypeOf(w,b.CallCancelledError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.CallCancelledError=f;var m=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=[],w.code=31009,w.description="Transport error",w.explanation="No transport available to send or receive messages",w.name="TransportError",w.solutions=[],Object.setPrototypeOf(w,b.TransportError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.TransportError=m})(c||(e.GeneralErrors=c={}));var _;(function(b){var E=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=["Invalid content or MessageType passed to sendMessage method."],w.code=31100,w.description="The request had malformed syntax.",w.explanation="The request could not be understood due to malformed syntax.",w.name="MalformedRequestError",w.solutions=["Ensure content and MessageType passed to sendMessage method are valid."],Object.setPrototypeOf(w,b.MalformedRequestError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.MalformedRequestError=E;var h=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=[],w.code=31101,w.description="Missing parameter array in request",w.explanation="",w.name="MissingParameterArrayError",w.solutions=[],Object.setPrototypeOf(w,b.MissingParameterArrayError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.MissingParameterArrayError=h;var a=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=[],w.code=31102,w.description="Authorization token missing in request.",w.explanation="",w.name="AuthorizationTokenMissingError",w.solutions=[],Object.setPrototypeOf(w,b.AuthorizationTokenMissingError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.AuthorizationTokenMissingError=a;var u=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=[],w.code=31103,w.description="Maximum parameter length has been exceeded.",w.explanation="Length of parameters cannot exceed MAX_PARAM_LENGTH.",w.name="MaxParameterLengthExceededError",w.solutions=[],Object.setPrototypeOf(w,b.MaxParameterLengthExceededError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.MaxParameterLengthExceededError=u;var p=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=[],w.code=31104,w.description="Invalid bridge token",w.explanation="",w.name="InvalidBridgeTokenError",w.solutions=[],Object.setPrototypeOf(w,b.InvalidBridgeTokenError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.InvalidBridgeTokenError=p;var f=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=["Client name contains invalid characters."],w.code=31105,w.description="Invalid client name",w.explanation="Client name should not contain control, space, delims, or unwise characters.",w.name="InvalidClientNameError",w.solutions=["Make sure that client name does not contain any of the invalid characters."],Object.setPrototypeOf(w,b.InvalidClientNameError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.InvalidClientNameError=f;var m=(function(d){t(l,d);function l(S,I){var w=d.call(this,S,I)||this;w.causes=[],w.code=31107,w.description="The reconnect parameter is invalid",w.explanation="",w.name="ReconnectParameterInvalidError",w.solutions=[],Object.setPrototypeOf(w,b.ReconnectParameterInvalidError.prototype);var N=typeof S=="string"?S:w.explanation,P=typeof S=="object"?S:I;return w.message="".concat(w.name," (").concat(w.code,"): ").concat(N),w.originalError=P,w}return l})(n.default);b.ReconnectParameterInvalidError=m})(_||(e.MalformedRequestErrors=_={})),(function(b){var E=(function(S){t(I,S);function I(w,N){var P=S.call(this,w,N)||this;P.causes=[],P.code=31201,P.description="Authorization error",P.explanation="The request requires user authentication. The server understood the request, but is refusing to fulfill it.",P.name="AuthorizationError",P.solutions=[],Object.setPrototypeOf(P,b.AuthorizationError.prototype);var A=typeof w=="string"?w:P.explanation,T=typeof w=="object"?w:N;return P.message="".concat(P.name," (").concat(P.code,"): ").concat(A),P.originalError=T,P}return I})(n.default);b.AuthorizationError=E;var h=(function(S){t(I,S);function I(w,N){var P=S.call(this,w,N)||this;P.causes=[],P.code=31203,P.description="No valid account",P.explanation="",P.name="NoValidAccountError",P.solutions=[],Object.setPrototypeOf(P,b.NoValidAccountError.prototype);var A=typeof w=="string"?w:P.explanation,T=typeof w=="object"?w:N;return P.message="".concat(P.name," (").concat(P.code,"): ").concat(A),P.originalError=T,P}return I})(n.default);b.NoValidAccountError=h;var a=(function(S){t(I,S);function I(w,N){var P=S.call(this,w,N)||this;P.causes=[],P.code=31204,P.description="Invalid JWT token",P.explanation="",P.name="InvalidJWTTokenError",P.solutions=[],Object.setPrototypeOf(P,b.InvalidJWTTokenError.prototype);var A=typeof w=="string"?w:P.explanation,T=typeof w=="object"?w:N;return P.message="".concat(P.name," (").concat(P.code,"): ").concat(A),P.originalError=T,P}return I})(n.default);b.InvalidJWTTokenError=a;var u=(function(S){t(I,S);function I(w,N){var P=S.call(this,w,N)||this;P.causes=[],P.code=31205,P.description="JWT token expired",P.explanation="",P.name="JWTTokenExpiredError",P.solutions=[],Object.setPrototypeOf(P,b.JWTTokenExpiredError.prototype);var A=typeof w=="string"?w:P.explanation,T=typeof w=="object"?w:N;return P.message="".concat(P.name," (").concat(P.code,"): ").concat(A),P.originalError=T,P}return I})(n.default);b.JWTTokenExpiredError=u;var p=(function(S){t(I,S);function I(w,N){var P=S.call(this,w,N)||this;P.causes=["Rate limit exceeded."],P.code=31206,P.description="Rate exceeded authorized limit.",P.explanation="The request performed exceeds the authorized limit.",P.name="RateExceededError",P.solutions=["Ensure message send rate does not exceed authorized limits."],Object.setPrototypeOf(P,b.RateExceededError.prototype);var A=typeof w=="string"?w:P.explanation,T=typeof w=="object"?w:N;return P.message="".concat(P.name," (").concat(P.code,"): ").concat(A),P.originalError=T,P}return I})(n.default);b.RateExceededError=p;var f=(function(S){t(I,S);function I(w,N){var P=S.call(this,w,N)||this;P.causes=[],P.code=31207,P.description="JWT token expiration too long",P.explanation="",P.name="JWTTokenExpirationTooLongError",P.solutions=[],Object.setPrototypeOf(P,b.JWTTokenExpirationTooLongError.prototype);var A=typeof w=="string"?w:P.explanation,T=typeof w=="object"?w:N;return P.message="".concat(P.name," (").concat(P.code,"): ").concat(A),P.originalError=T,P}return I})(n.default);b.JWTTokenExpirationTooLongError=f;var m=(function(S){t(I,S);function I(w,N){var P=S.call(this,w,N)||this;P.causes=[],P.code=31209,P.description="Reconnect attempt is not authorized.",P.explanation="",P.name="ReconnectAttemptError",P.solutions=[],Object.setPrototypeOf(P,b.ReconnectAttemptError.prototype);var A=typeof w=="string"?w:P.explanation,T=typeof w=="object"?w:N;return P.message="".concat(P.name," (").concat(P.code,"): ").concat(A),P.originalError=T,P}return I})(n.default);b.ReconnectAttemptError=m;var d=(function(S){t(I,S);function I(w,N){var P=S.call(this,w,N)||this;P.causes=["The Call Message Event Type is invalid and is not understood by Twilio Voice."],P.code=31210,P.description="Call Message Event Type is invalid.",P.explanation="The Call Message Event Type is invalid and is not understood by Twilio Voice.",P.name="CallMessageEventTypeInvalidError",P.solutions=["Ensure the Call Message Event Type is Valid and understood by Twilio Voice and try again."],Object.setPrototypeOf(P,b.CallMessageEventTypeInvalidError.prototype);var A=typeof w=="string"?w:P.explanation,T=typeof w=="object"?w:N;return P.message="".concat(P.name," (").concat(P.code,"): ").concat(A),P.originalError=T,P}return I})(n.default);b.CallMessageEventTypeInvalidError=d;var l=(function(S){t(I,S);function I(w,N){var P=S.call(this,w,N)||this;P.causes=["The payload size of Call Message Event exceeds the authorized limit."],P.code=31212,P.description="Call Message Event Payload size exceeded authorized limit.",P.explanation="The request performed to send a Call Message Event exceeds the payload size authorized limit",P.name="PayloadSizeExceededError",P.solutions=["Reduce payload size of Call Message Event to be within the authorized limit and try again."],Object.setPrototypeOf(P,b.PayloadSizeExceededError.prototype);var A=typeof w=="string"?w:P.explanation,T=typeof w=="object"?w:N;return P.message="".concat(P.name," (").concat(P.code,"): ").concat(A),P.originalError=T,P}return I})(n.default);b.PayloadSizeExceededError=l})(r||(e.AuthorizationErrors=r={}));var C;(function(b){var E=(function(a){t(u,a);function u(p,f){var m=a.call(this,p,f)||this;m.causes=["The user denied the getUserMedia request.","The browser denied the getUserMedia request."],m.code=31401,m.description="UserMedia Permission Denied Error",m.explanation="The browser or end-user denied permissions to user media. Therefore we were unable to acquire input audio.",m.name="PermissionDeniedError",m.solutions=["The user should accept the request next time prompted. If the browser saved the deny, the user should change that permission in their browser.","The user should to verify that the browser has permission to access the microphone at this address."],Object.setPrototypeOf(m,b.PermissionDeniedError.prototype);var d=typeof p=="string"?p:m.explanation,l=typeof p=="object"?p:f;return m.message="".concat(m.name," (").concat(m.code,"): ").concat(d),m.originalError=l,m}return u})(n.default);b.PermissionDeniedError=E;var h=(function(a){t(u,a);function u(p,f){var m=a.call(this,p,f)||this;m.causes=["NotFoundError - The deviceID specified was not found.","The getUserMedia constraints were overconstrained and no devices matched."],m.code=31402,m.description="UserMedia Acquisition Failed Error",m.explanation="The browser and end-user allowed permissions, however getting the media failed. Usually this is due to bad constraints, but can sometimes fail due to browser, OS or hardware issues.",m.name="AcquisitionFailedError",m.solutions=["Ensure the deviceID being specified exists.","Try acquiring media with fewer constraints."],Object.setPrototypeOf(m,b.AcquisitionFailedError.prototype);var d=typeof p=="string"?p:m.explanation,l=typeof p=="object"?p:f;return m.message="".concat(m.name," (").concat(m.code,"): ").concat(d),m.originalError=l,m}return u})(n.default);b.AcquisitionFailedError=h})(C||(e.UserMediaErrors=C={}));var g;(function(b){var E=(function(a){t(u,a);function u(p,f){var m=a.call(this,p,f)||this;m.causes=[],m.code=53e3,m.description="Signaling connection error",m.explanation="Raised whenever a signaling connection error occurs that is not covered by a more specific error code.",m.name="ConnectionError",m.solutions=[],Object.setPrototypeOf(m,b.ConnectionError.prototype);var d=typeof p=="string"?p:m.explanation,l=typeof p=="object"?p:f;return m.message="".concat(m.name," (").concat(m.code,"): ").concat(d),m.originalError=l,m}return u})(n.default);b.ConnectionError=E;var h=(function(a){t(u,a);function u(p,f){var m=a.call(this,p,f)||this;m.causes=["The device running your application lost its Internet connection."],m.code=53001,m.description="Signaling connection disconnected",m.explanation="Raised whenever the signaling connection is unexpectedly disconnected.",m.name="ConnectionDisconnected",m.solutions=["Ensure the device running your application has access to a stable Internet connection."],Object.setPrototypeOf(m,b.ConnectionDisconnected.prototype);var d=typeof p=="string"?p:m.explanation,l=typeof p=="object"?p:f;return m.message="".concat(m.name," (").concat(m.code,"): ").concat(d),m.originalError=l,m}return u})(n.default);b.ConnectionDisconnected=h})(g||(e.SignalingErrors=g={}));var y;(function(b){var E=(function(u){t(p,u);function p(f,m){var d=u.call(this,f,m)||this;d.causes=["The Client may not be using a supported WebRTC implementation.","The Client may not have the necessary resources to create or apply a new media description."],d.code=53400,d.description="Client is unable to create or apply a local media description",d.explanation="Raised whenever a Client is unable to create or apply a local media description.",d.name="ClientLocalDescFailed",d.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(d,b.ClientLocalDescFailed.prototype);var l=typeof f=="string"?f:d.explanation,S=typeof f=="object"?f:m;return d.message="".concat(d.name," (").concat(d.code,"): ").concat(l),d.originalError=S,d}return p})(n.default);b.ClientLocalDescFailed=E;var h=(function(u){t(p,u);function p(f,m){var d=u.call(this,f,m)||this;d.causes=["The Client may not be using a supported WebRTC implementation.","The Client may be connecting peer-to-peer with another Participant that is not using a supported WebRTC implementation.","The Client may not have the necessary resources to apply a new media description."],d.code=53402,d.description="Client is unable to apply a remote media description",d.explanation="Raised whenever the Client receives a remote media description but is unable to apply it.",d.name="ClientRemoteDescFailed",d.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(d,b.ClientRemoteDescFailed.prototype);var l=typeof f=="string"?f:d.explanation,S=typeof f=="object"?f:m;return d.message="".concat(d.name," (").concat(d.code,"): ").concat(l),d.originalError=S,d}return p})(n.default);b.ClientRemoteDescFailed=h;var a=(function(u){t(p,u);function p(f,m){var d=u.call(this,f,m)||this;d.causes=["The Client was unable to establish a media connection.","A media connection which was active failed liveliness checks."],d.code=53405,d.description="Media connection failed",d.explanation="Raised by the Client or Server whenever a media connection fails.",d.name="ConnectionError",d.solutions=["If the problem persists, try connecting to another region.","Check your Client's network connectivity.","If you've provided custom ICE Servers then ensure that the URLs and credentials are valid."],Object.setPrototypeOf(d,b.ConnectionError.prototype);var l=typeof f=="string"?f:d.explanation,S=typeof f=="object"?f:m;return d.message="".concat(d.name," (").concat(d.code,"): ").concat(l),d.originalError=S,d}return p})(n.default);b.ConnectionError=a})(y||(e.MediaErrors=y={})),e.errorsByCode=new Map([[20101,r.AccessTokenInvalid],[20104,r.AccessTokenExpired],[20151,r.AuthenticationFailed],[31202,i.AccessTokenSignatureValidationFailed],[31400,o.BadRequest],[31404,o.NotFound],[31480,o.TemporarilyUnavailable],[31486,o.BusyHere],[31603,s.Decline],[31e3,c.UnknownError],[31001,c.ApplicationNotFoundError],[31002,c.ConnectionDeclinedError],[31003,c.ConnectionTimeoutError],[31005,c.ConnectionError],[31008,c.CallCancelledError],[31009,c.TransportError],[31100,_.MalformedRequestError],[31101,_.MissingParameterArrayError],[31102,_.AuthorizationTokenMissingError],[31103,_.MaxParameterLengthExceededError],[31104,_.InvalidBridgeTokenError],[31105,_.InvalidClientNameError],[31107,_.ReconnectParameterInvalidError],[31201,r.AuthorizationError],[31203,r.NoValidAccountError],[31204,r.InvalidJWTTokenError],[31205,r.JWTTokenExpiredError],[31206,r.RateExceededError],[31207,r.JWTTokenExpirationTooLongError],[31209,r.ReconnectAttemptError],[31210,r.CallMessageEventTypeInvalidError],[31212,r.PayloadSizeExceededError],[31401,C.PermissionDeniedError],[31402,C.AcquisitionFailedError],[53e3,g.ConnectionError],[53001,g.ConnectionDisconnected],[53400,y.ClientLocalDescFailed],[53402,y.ClientRemoteDescFailed],[53405,y.ConnectionError]]),Object.freeze(e.errorsByCode)})(cn)),cn}var mo;function we(){return mo||(mo=1,(function(e){var t=an&&an.__extends||(function(){var g=function(y,b){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,h){E.__proto__=h}||function(E,h){for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&(E[a]=h[a])},g(y,b)};return function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");g(y,b);function E(){this.constructor=y}y.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.UserMediaErrors=e.TwilioError=e.SIPServerErrors=e.SignatureValidationErrors=e.SignalingErrors=e.MediaErrors=e.MalformedRequestErrors=e.GeneralErrors=e.ClientErrors=e.AuthorizationErrors=e.NotSupportedError=e.InvalidStateError=e.InvalidArgumentError=void 0,e.getPreciseSignalingErrorByCode=i,e.getErrorByCode=_,e.hasErrorByCode=C;var n=Cl();Object.defineProperty(e,"AuthorizationErrors",{enumerable:!0,get:function(){return n.AuthorizationErrors}}),Object.defineProperty(e,"ClientErrors",{enumerable:!0,get:function(){return n.ClientErrors}}),Object.defineProperty(e,"GeneralErrors",{enumerable:!0,get:function(){return n.GeneralErrors}}),Object.defineProperty(e,"MalformedRequestErrors",{enumerable:!0,get:function(){return n.MalformedRequestErrors}}),Object.defineProperty(e,"MediaErrors",{enumerable:!0,get:function(){return n.MediaErrors}}),Object.defineProperty(e,"SignalingErrors",{enumerable:!0,get:function(){return n.SignalingErrors}}),Object.defineProperty(e,"SignatureValidationErrors",{enumerable:!0,get:function(){return n.SignatureValidationErrors}}),Object.defineProperty(e,"SIPServerErrors",{enumerable:!0,get:function(){return n.SIPServerErrors}}),Object.defineProperty(e,"TwilioError",{enumerable:!0,get:function(){return n.TwilioError}}),Object.defineProperty(e,"UserMediaErrors",{enumerable:!0,get:function(){return n.UserMediaErrors}});var r=new Set([31001,31002,31003,31101,31102,31103,31104,31105,31107,31201,31202,31203,31204,31205,31207,31404,31480,31486,31603]);function i(g,y){if(typeof y=="number"&&C(y)){var b=g?!0:!r.has(y);if(b)return _(y)}}var o=(function(g){t(y,g);function y(b){var E=g.call(this,b)||this;return E.name="InvalidArgumentError",E}return y})(Error);e.InvalidArgumentError=o;var s=(function(g){t(y,g);function y(b){var E=g.call(this,b)||this;return E.name="InvalidStateError",E}return y})(Error);e.InvalidStateError=s;var c=(function(g){t(y,g);function y(b){var E=g.call(this,b)||this;return E.name="NotSupportedError",E}return y})(Error);e.NotSupportedError=c;function _(g){var y=n.errorsByCode.get(g);if(!y)throw new o("Error code ".concat(g," not found"));return y}function C(g){return n.errorsByCode.has(g)}})(an)),an}var mt={},Le={},vo;function Zt(){if(vo)return Le;vo=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.SOUNDS_BASE_URL=Le.RELEASE_VERSION=Le.PACKAGE_NAME=Le.ECHO_TEST_DURATION=Le.COWBELL_AUDIO_URL=void 0;var e="@twilio/voice-sdk";Le.PACKAGE_NAME=e;var t="2.15.0";Le.RELEASE_VERSION=t;var n="https://sdk.twilio.com/js/client/sounds/releases/1.0.0";Le.SOUNDS_BASE_URL=n;var r="".concat(n,"/cowbell.mp3?cache=").concat(t);Le.COWBELL_AUDIO_URL=r;var i=2e4;return Le.ECHO_TEST_DURATION=i,Le}var yo;function qe(){if(yo)return mt;yo=1;var e=mt&&mt.__spreadArray||function(i,o,s){if(s||arguments.length===2)for(var c=0,_=o.length,C;c<_;c++)(C||!(c in o))&&(C||(C=Array.prototype.slice.call(o,0,c)),C[c]=o[c]);return i.concat(C||Array.prototype.slice.call(o))};Object.defineProperty(mt,"__esModule",{value:!0}),mt.Logger=void 0;var t=va(),n=Zt(),r=(function(){function i(o,s){this._log=i.getLogLevelInstance(s),this._prefix="[TwilioVoice][".concat(o,"]")}return i.getLogLevelInstance=function(o){if(!i.loglevelInstance)try{i.loglevelInstance=(o&&o.LogLevelModule?o.LogLevelModule:t).getLogger(n.PACKAGE_NAME)}catch{console.warn("Cannot create custom logger"),i.loglevelInstance=console}return i.loglevelInstance},i.prototype.debug=function(){for(var o,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];(o=this._log).debug.apply(o,e([this._prefix],s,!1))},i.prototype.error=function(){for(var o,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];(o=this._log).error.apply(o,e([this._prefix],s,!1))},i.prototype.info=function(){for(var o,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];(o=this._log).info.apply(o,e([this._prefix],s,!1))},i.prototype.setDefaultLevel=function(o){this._log.setDefaultLevel?this._log.setDefaultLevel(o):console.warn("Logger cannot setDefaultLevel")},i.prototype.warn=function(){for(var o,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];(o=this._log).warn.apply(o,e([this._prefix],s,!1))},i.levels=t.levels,i})();return mt.Logger=r.getLogLevelInstance(),mt.default=r,mt}var jn={},bo;function El(){if(bo)return jn;bo=1,Object.defineProperty(jn,"__esModule",{value:!0});var e=Zt(),t=we(),n=qe(),r="".concat(e.SOUNDS_BASE_URL,"/outgoing.mp3"),i=(function(){function o(s,c,_,C){this._name=s,this._availableDevices=c,this._beforeChange=_,this._isSupported=C,this._activeDevices=new Set,this._log=new n.default("OutputDeviceCollection")}return o.prototype.delete=function(s){this._log.debug(".delete",s);var c=!!this._activeDevices.delete(s),_=this._availableDevices.get("default")||Array.from(this._availableDevices.values())[0];!this._activeDevices.size&&_&&this._activeDevices.add(_);var C=Array.from(this._activeDevices.values()).map(function(g){return g.deviceId});return this._beforeChange(this._name,C),!!c},o.prototype.get=function(){return this._activeDevices},o.prototype.set=function(s){var c=this;if(this._log.debug(".set",s),!this._isSupported)return Promise.reject(new t.NotSupportedError("This browser does not support audio output selection"));var _=Array.isArray(s)?s:[s];if(!_.length)return Promise.reject(new t.InvalidArgumentError("Must specify at least one device to set"));var C=[],g=_.map(function(y){var b=c._availableDevices.get(y);return b||C.push(y),b});return C.length?Promise.reject(new t.InvalidArgumentError("Devices not found: ".concat(C.join(", ")))):new Promise(function(y){y(c._beforeChange(c._name,_))}).then(function(){c._activeDevices.clear(),g.forEach(c._activeDevices.add,c._activeDevices)})},o.prototype.test=function(s){return s===void 0&&(s=r),this._isSupported?this._activeDevices.size?Promise.all(Array.from(this._activeDevices).map(function(c){var _;return new Promise(function(C){_=new Audio(s),_.oncanplay=C}).then(function(){return _.setSinkId(c.deviceId).then(function(){return _.play()})})})):Promise.reject(new t.InvalidStateError("No active output devices to test")):Promise.reject(new t.NotSupportedError("This browser does not support audio output selection"))},o})();return jn.default=i,jn}var Nn={},So;function Tl(){if(So)return Nn;So=1,Object.defineProperty(Nn,"__esModule",{value:!0});var e=(function(){function t(n){Object.defineProperties(this,{deviceId:{get:function(){return n.deviceId}},groupId:{get:function(){return n.groupId}},kind:{get:function(){return n.kind}},label:{get:function(){return n.label}}})}return t})();return Nn.default=e,Nn}var ye={},wo;function wt(){if(wo)return ye;wo=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.Exception=void 0,ye.average=t,ye.difference=n,ye.isElectron=r,ye.isChrome=i,ye.isFirefox=o,ye.isLegacyEdge=s,ye.isSafari=c,ye.isUnifiedPlanDefault=_,ye.queryToJson=C,ye.flatMap=g,ye.promisifyEvents=y,ye.sortByMimeTypes=b;function e(h){if(!(this instanceof e))return new e(h);this.message=h}e.prototype.toString=function(){return"Twilio.Exception: ".concat(this.message)};function t(h){return h&&h.length?h.reduce(function(a,u){return a+u})/h.length:0}function n(h,a,u){u=u||(function(f){return f});var p=new Set(a.map(u));return h.filter(function(f){return!p.has(u(f))})}function r(h){return!!h.userAgent.match("Electron")}function i(h,a){var u=!!a.userAgent.match("CriOS"),p=!!a.userAgent.match("HeadlessChrome"),f=typeof h.chrome<"u"&&a.vendor==="Google Inc."&&a.userAgent.indexOf("OPR")===-1&&a.userAgent.indexOf("Edge")===-1;return u||r(a)||f||p}function o(h){return h=h||(typeof window>"u"?lo.navigator:window.navigator),!!h&&typeof h.userAgent=="string"&&/firefox|fxios/i.test(h.userAgent)}function s(h){return h=h||(typeof window>"u"?lo.navigator:window.navigator),!!h&&typeof h.userAgent=="string"&&/edge\/\d+/i.test(h.userAgent)}function c(h){return!!h.vendor&&h.vendor.indexOf("Apple")!==-1&&h.userAgent&&h.userAgent.indexOf("CriOS")===-1&&h.userAgent.indexOf("FxiOS")===-1}function _(h,a,u,p){if(typeof h>"u"||typeof a>"u"||typeof u>"u"||typeof p>"u"||typeof u.prototype>"u"||typeof p.prototype>"u")return!1;if(i(h,a)&&u.prototype.addTransceiver){var f=new u,m=!0;try{f.addTransceiver("audio")}catch{m=!1}return f.close(),m}else{if(o(a))return!0;if(c(a))return"currentDirection"in p.prototype}return!1}function C(h){return h?h.split("&").reduce(function(a,u){var p=u.split("="),f=p[0],m=decodeURIComponent((p[1]||"").replace(/\+/g,"%20"));return f&&(a[f]=m),a},{}):""}function g(h,a){var u=h instanceof Map||h instanceof Set?Array.from(h.values()):h;return a=a||(function(p){return p}),u.reduce(function(p,f){var m=a(f);return p.concat(m)},[])}function y(h,a,u){return new Promise(function(p,f){function m(){h.removeListener(u,d),p()}function d(){h.removeListener(a,m),f()}h.once(a,m),h.once(u,d)})}function b(h,a){var u=a.map(function(p){return"audio/"+p.toLowerCase()});return h.sort(function(p,f){var m=u.indexOf(p.mimeType.toLowerCase()),d=u.indexOf(f.mimeType.toLowerCase()),l=m>=0?m:Number.MAX_VALUE,S=d>=0?d:Number.MAX_VALUE;return l-S})}var E=e;return ye.Exception=E,ye}var Co;function Pl(){if(Co)return Xe;Co=1;var e=Xe&&Xe.__extends||(function(){var b=function(E,h){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(a[p]=u[p])},b(E,h)};return function(E,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");b(E,h);function a(){this.constructor=E}E.prototype=h===null?Object.create(h):(a.prototype=h.prototype,new a)}})(),t=Xe&&Xe.__awaiter||function(b,E,h,a){function u(p){return p instanceof h?p:new h(function(f){f(p)})}return new(h||(h=Promise))(function(p,f){function m(S){try{l(a.next(S))}catch(I){f(I)}}function d(S){try{l(a.throw(S))}catch(I){f(I)}}function l(S){S.done?p(S.value):u(S.value).then(m,d)}l((a=a.apply(b,E||[])).next())})},n=Xe&&Xe.__generator||function(b,E){var h={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},a,u,p,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=m(0),f.throw=m(1),f.return=m(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(l){return function(S){return d([l,S])}}function d(l){if(a)throw new TypeError("Generator is already executing.");for(;f&&(f=0,l[0]&&(h=0)),h;)try{if(a=1,u&&(p=l[0]&2?u.return:l[0]?u.throw||((p=u.return)&&p.call(u),0):u.next)&&!(p=p.call(u,l[1])).done)return p;switch(u=0,p&&(l=[l[0]&2,p.value]),l[0]){case 0:case 1:p=l;break;case 4:return h.label++,{value:l[1],done:!1};case 5:h.label++,u=l[1],l=[0];continue;case 7:l=h.ops.pop(),h.trys.pop();continue;default:if(p=h.trys,!(p=p.length>0&&p[p.length-1])&&(l[0]===6||l[0]===2)){h=0;continue}if(l[0]===3&&(!p||l[1]>p[0]&&l[1]<p[3])){h.label=l[1];break}if(l[0]===6&&h.label<p[1]){h.label=p[1],p=l;break}if(p&&h.label<p[2]){h.label=p[2],h.ops.push(l);break}p[2]&&h.ops.pop(),h.trys.pop();continue}l=E.call(b,h)}catch(S){l=[6,S],u=0}finally{a=p=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(Xe,"__esModule",{value:!0});var r=We(),i=yr(),o=we(),s=qe(),c=El(),_=Tl(),C=wt(),g={audioinput:"Audio Input",audiooutput:"Audio Output"},y=(function(b){e(E,b);function E(h,a,u){var p,f=b.call(this)||this;f.availableInputDevices=new Map,f.availableOutputDevices=new Map,f._audioConstraints=null,f._defaultInputDeviceStream=null,f._enabledSounds=(p={},p[i.default.SoundName.Disconnect]=!0,p[i.default.SoundName.Incoming]=!0,p[i.default.SoundName.Outgoing]=!0,p),f._inputDevice=null,f._inputDevicePromise=null,f._isPollingInputVolume=!1,f._log=new s.default("AudioHelper"),f._processedStream=null,f._selectedInputDeviceStream=null,f._unknownDeviceIndexes={audioinput:{},audiooutput:{}},f._updateAvailableDevices=function(){return!f._mediaDevices||!f._enumerateDevices?Promise.reject("Enumeration not supported"):f._enumerateDevices().then(function(S){f._updateDevices(S.filter(function(w){return w.kind==="audiooutput"}),f.availableOutputDevices,f._removeLostOutput),f._updateDevices(S.filter(function(w){return w.kind==="audioinput"}),f.availableInputDevices,f._removeLostInput);var I=f.availableOutputDevices.get("default")||Array.from(f.availableOutputDevices.values())[0];[f.speakerDevices,f.ringtoneDevices].forEach(function(w){!w.get().size&&f.availableOutputDevices.size&&f.isOutputSelectionSupported&&w.set(I.deviceId).catch(function(N){f._log.warn("Unable to set audio output devices. ".concat(N))})})})},f._removeLostInput=function(S){if(!f.inputDevice||f.inputDevice.deviceId!==S.deviceId)return!1;f._destroyProcessedStream(),f._replaceStream(null),f._inputDevice=null,f._maybeStopPollingVolume();var I=f.availableInputDevices.get("default")||Array.from(f.availableInputDevices.values())[0];return I&&f.setInputDevice(I.deviceId),!0},f._removeLostOutput=function(S){var I=f.speakerDevices.delete(S),w=f.ringtoneDevices.delete(S);return I||w},u=Object.assign({AudioContext:typeof AudioContext<"u"&&AudioContext,setSinkId:typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId},u),f._beforeSetInputDevice=u.beforeSetInputDevice||(function(){return Promise.resolve()}),f._updateUserOptions(u),f._audioProcessorEventObserver=u.audioProcessorEventObserver,f._mediaDevices=u.mediaDevices||navigator.mediaDevices,f._onActiveInputChanged=a,f._enumerateDevices=typeof u.enumerateDevices=="function"?u.enumerateDevices:f._mediaDevices&&f._mediaDevices.enumerateDevices.bind(f._mediaDevices);var m=!!(u.AudioContext||u.audioContext),d=!!f._enumerateDevices;u.enabledSounds&&(f._enabledSounds=u.enabledSounds);var l=typeof u.setSinkId=="function";return f.isOutputSelectionSupported=d&&l,f.isVolumeSupported=m,f.isVolumeSupported&&(f._audioContext=u.audioContext||u.AudioContext&&new u.AudioContext,f._audioContext&&(f._inputVolumeAnalyser=f._audioContext.createAnalyser(),f._inputVolumeAnalyser.fftSize=32,f._inputVolumeAnalyser.smoothingTimeConstant=.3)),f.ringtoneDevices=new c.default("ringtone",f.availableOutputDevices,h,f.isOutputSelectionSupported),f.speakerDevices=new c.default("speaker",f.availableOutputDevices,h,f.isOutputSelectionSupported),f.addListener("newListener",function(S){S==="inputVolume"&&f._maybeStartPollingVolume()}),f.addListener("removeListener",function(S){S==="inputVolume"&&f._maybeStopPollingVolume()}),f.once("newListener",function(){f.isOutputSelectionSupported||f._log.warn("Warning: This browser does not support audio output selection."),f.isVolumeSupported||f._log.warn("Warning: This browser does not support Twilio's volume indicator feature.")}),d&&f._initializeEnumeration(),navigator&&navigator.permissions&&typeof navigator.permissions.query=="function"?navigator.permissions.query({name:"microphone"}).then(function(S){if(S.state!=="granted"){var I=function(){f._updateAvailableDevices(),f._stopMicrophonePermissionListener()};S.addEventListener("change",I),f._microphonePermissionStatus=S,f._onMicrophonePermissionStatusChanged=I}}).catch(function(S){return f._log.warn("Warning: unable to listen for microphone permission changes. ".concat(S))}):f._log.warn("Warning: current browser does not support permissions API."),f}return Object.defineProperty(E.prototype,"audioConstraints",{get:function(){return this._audioConstraints},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"inputDevice",{get:function(){return this._inputDevice},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"inputStream",{get:function(){return this._processedStream||this._selectedInputDeviceStream},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"processedStream",{get:function(){return this._processedStream},enumerable:!1,configurable:!0}),E.prototype._destroy=function(){this._stopDefaultInputDeviceStream(),this._stopSelectedInputDeviceStream(),this._destroyProcessedStream(),this._maybeStopPollingVolume(),this.removeAllListeners(),this._stopMicrophonePermissionListener(),this._unbind()},E.prototype._getInputDevicePromise=function(){return this._inputDevicePromise},E.prototype._maybeStartPollingVolume=function(){var h=this;if(!(!this.isVolumeSupported||!this.inputStream)&&(this._updateVolumeSource(),!(this._isPollingInputVolume||!this._inputVolumeAnalyser))){var a=this._inputVolumeAnalyser.frequencyBinCount,u=new Uint8Array(a);this._isPollingInputVolume=!0;var p=function(){if(h._isPollingInputVolume){if(h._inputVolumeAnalyser){h._inputVolumeAnalyser.getByteFrequencyData(u);var f=(0,C.average)(u);h.emit("inputVolume",f/255)}requestAnimationFrame(p)}};requestAnimationFrame(p)}},E.prototype._maybeStopPollingVolume=function(){this.isVolumeSupported&&(!this._isPollingInputVolume||this.inputStream&&this.listenerCount("inputVolume")||(this._inputVolumeSource&&(this._inputVolumeSource.disconnect(),delete this._inputVolumeSource),this._isPollingInputVolume=!1))},E.prototype._openDefaultDeviceWithConstraints=function(h){var a=this;return this._log.info("Opening default device with constraints",h),this._getUserMedia(h).then(function(u){return a._log.info("Opened default device. Updating available devices."),a._updateAvailableDevices().catch(function(p){a._log.warn("Unable to updateAvailableDevices after gUM call",p)}),a._defaultInputDeviceStream=u,a._maybeCreateProcessedStream(u)})},E.prototype._stopDefaultInputDeviceStream=function(){this._defaultInputDeviceStream&&(this._log.info("stopping default device stream"),this._defaultInputDeviceStream.getTracks().forEach(function(h){return h.stop()}),this._defaultInputDeviceStream=null,this._destroyProcessedStream())},E.prototype._unbind=function(){var h;!((h=this._mediaDevices)===null||h===void 0)&&h.removeEventListener&&this._mediaDevices.removeEventListener("devicechange",this._updateAvailableDevices)},E.prototype._updateUserOptions=function(h){typeof h.enumerateDevices=="function"&&(this._enumerateDevices=h.enumerateDevices),typeof h.getUserMedia=="function"&&(this._getUserMedia=h.getUserMedia)},E.prototype.addProcessor=function(h){if(this._log.debug(".addProcessor"),this._processor)throw new o.NotSupportedError("Adding multiple AudioProcessors is not supported at this time.");if(typeof h!="object"||h===null)throw new o.InvalidArgumentError("Missing AudioProcessor argument.");if(typeof h.createProcessedStream!="function")throw new o.InvalidArgumentError("Missing createProcessedStream() method.");if(typeof h.destroyProcessedStream!="function")throw new o.InvalidArgumentError("Missing destroyProcessedStream() method.");return this._processor=h,this._audioProcessorEventObserver.emit("add"),this._restartStreams()},E.prototype.disconnect=function(h){return this._log.debug(".disconnect",h),this._maybeEnableSound(i.default.SoundName.Disconnect,h)},E.prototype.incoming=function(h){return this._log.debug(".incoming",h),this._maybeEnableSound(i.default.SoundName.Incoming,h)},E.prototype.outgoing=function(h){return this._log.debug(".outgoing",h),this._maybeEnableSound(i.default.SoundName.Outgoing,h)},E.prototype.removeProcessor=function(h){if(this._log.debug(".removeProcessor"),typeof h!="object"||h===null)throw new o.InvalidArgumentError("Missing AudioProcessor argument.");if(this._processor!==h)throw new o.InvalidArgumentError("Cannot remove an AudioProcessor that has not been previously added.");return this._destroyProcessedStream(),this._processor=null,this._audioProcessorEventObserver.emit("remove"),this._restartStreams()},E.prototype.setAudioConstraints=function(h){return this._log.debug(".setAudioConstraints",h),this._audioConstraints=Object.assign({},h),delete this._audioConstraints.deviceId,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()},E.prototype.setInputDevice=function(h){return this._log.debug(".setInputDevice",h),this._setInputDevice(h,!1)},E.prototype.unsetAudioConstraints=function(){return this._log.debug(".unsetAudioConstraints"),this._audioConstraints=null,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()},E.prototype.unsetInputDevice=function(){var h=this;return this._log.debug(".unsetInputDevice",this.inputDevice),this.inputDevice?(this._destroyProcessedStream(),this._onActiveInputChanged(null).then(function(){h._replaceStream(null),h._inputDevice=null,h._maybeStopPollingVolume()})):Promise.resolve()},E.prototype._destroyProcessedStream=function(){if(this._processor&&this._processedStream){this._log.info("destroying processed stream");var h=this._processedStream;this._processedStream.getTracks().forEach(function(a){return a.stop()}),this._processedStream=null,this._processor.destroyProcessedStream(h),this._audioProcessorEventObserver.emit("destroy")}},E.prototype._getUnknownDeviceIndex=function(h){var a=h.deviceId,u=h.kind,p=this._unknownDeviceIndexes[u][a];return p||(p=Object.keys(this._unknownDeviceIndexes[u]).length+1,this._unknownDeviceIndexes[u][a]=p),p},E.prototype._initializeEnumeration=function(){var h=this;if(!this._mediaDevices||!this._enumerateDevices)throw new o.NotSupportedError("Enumeration is not supported");this._mediaDevices.addEventListener&&this._mediaDevices.addEventListener("devicechange",this._updateAvailableDevices),this._updateAvailableDevices().then(function(){h.isOutputSelectionSupported&&Promise.all([h.speakerDevices.set("default"),h.ringtoneDevices.set("default")]).catch(function(a){h._log.warn("Warning: Unable to set audio output devices. ".concat(a))})})},E.prototype._maybeCreateProcessedStream=function(h){var a=this;return this._processor?(this._log.info("Creating processed stream"),this._processor.createProcessedStream(h).then(function(u){return a._processedStream=u,a._audioProcessorEventObserver.emit("create"),a._processedStream})):Promise.resolve(h)},E.prototype._maybeEnableSound=function(h,a){return typeof a<"u"&&(this._enabledSounds[h]=a),this._enabledSounds[h]},E.prototype._replaceStream=function(h){this._log.info("Replacing with new stream."),this._selectedInputDeviceStream&&(this._log.info("Old stream detected. Stopping tracks."),this._stopSelectedInputDeviceStream()),this._selectedInputDeviceStream=h},E.prototype._restartStreams=function(){if(this.inputDevice&&this._selectedInputDeviceStream)return this._log.info("Restarting selected input device"),this._setInputDevice(this.inputDevice.deviceId,!0);if(this._defaultInputDeviceStream){var h=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return this._log.info("Restarting default input device, now becoming selected."),this._setInputDevice(h.deviceId,!0)}return Promise.resolve()},E.prototype._setInputDevice=function(h,a){return t(this,void 0,void 0,function(){var u,p=this;return n(this,function(f){return u=function(){return t(p,void 0,void 0,function(){var m,d,l=this;return n(this,function(S){switch(S.label){case 0:return[4,this._beforeSetInputDevice()];case 1:if(S.sent(),typeof h!="string")return[2,Promise.reject(new o.InvalidArgumentError("Must specify the device to set"))];if(m=this.availableInputDevices.get(h),!m)return[2,Promise.reject(new o.InvalidArgumentError("Device not found: ".concat(h)))];if(this._log.info("Setting input device. ID: "+h),this._inputDevice&&this._inputDevice.deviceId===h&&this._selectedInputDeviceStream){if(!a)return[2,Promise.resolve()];this._log.info("Same track detected on setInputDevice, stopping old tracks."),this._stopSelectedInputDeviceStream()}return this._stopDefaultInputDeviceStream(),d={audio:Object.assign({deviceId:{exact:h}},this.audioConstraints)},this._log.info("setInputDevice: getting new tracks."),[2,this._getUserMedia(d).then(function(I){return l._destroyProcessedStream(),l._maybeCreateProcessedStream(I).then(function(w){return l._log.info("setInputDevice: invoking _onActiveInputChanged."),l._onActiveInputChanged(w).then(function(){l._replaceStream(I),l._inputDevice=m,l._maybeStartPollingVolume()})})})]}})})},[2,this._inputDevicePromise=u().finally(function(){p._inputDevicePromise=null})]})})},E.prototype._stopMicrophonePermissionListener=function(){var h;!((h=this._microphonePermissionStatus)===null||h===void 0)&&h.removeEventListener&&this._microphonePermissionStatus.removeEventListener("change",this._onMicrophonePermissionStatusChanged)},E.prototype._stopSelectedInputDeviceStream=function(){this._selectedInputDeviceStream&&(this._log.info("Stopping selected device stream"),this._selectedInputDeviceStream.getTracks().forEach(function(h){return h.stop()}))},E.prototype._updateDevices=function(h,a,u){var p=this,f=h.map(function(P){return P.deviceId}),m=Array.from(a.values()).map(function(P){return P.deviceId}),d=[],l=(0,C.difference)(m,f);l.forEach(function(P){var A=a.get(P);A&&(a.delete(P),u(A)&&d.push(A))});var S=!1;if(h.forEach(function(P){var A=a.get(P.deviceId),T=p._wrapMediaDeviceInfo(P);(!A||A.label!==T.label)&&(a.set(P.deviceId,T),S=!0)}),S||l.length){var I="default",w=this.inputDevice&&this.inputDevice.deviceId===I,N=this._defaultInputDeviceStream&&this.availableInputDevices.get(I);(w||N)&&(this._log.warn("Calling getUserMedia after device change to ensure that the           tracks of the active device (default) have not gone stale."),setTimeout(function(){p._setInputDevice(I,!0)},0)),this._log.debug("#deviceChange",d),this.emit("deviceChange",d)}},E.prototype._updateVolumeSource=function(){if(!(!this.inputStream||!this._audioContext||!this._inputVolumeAnalyser)){this._inputVolumeSource&&this._inputVolumeSource.disconnect();try{this._inputVolumeSource=this._audioContext.createMediaStreamSource(this.inputStream),this._inputVolumeSource.connect(this._inputVolumeAnalyser)}catch(h){this._log.warn("Unable to update volume source",h),delete this._inputVolumeSource}}},E.prototype._wrapMediaDeviceInfo=function(h){var a={deviceId:h.deviceId,groupId:h.groupId,kind:h.kind,label:h.label};if(!a.label)if(a.deviceId==="default")a.label="Default";else{var u=this._getUnknownDeviceIndex(h);a.label="Unknown ".concat(g[a.kind]," Device ").concat(u)}return new _.default(a)},E})(r.EventEmitter);return y||(y={}),Xe.default=y,Xe}var Tt={},Eo;function Il(){if(Eo)return Tt;Eo=1;var e=Tt&&Tt.__extends||(function(){var i=function(o,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,_){c.__proto__=_}||function(c,_){for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&(c[C]=_[C])},i(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");i(o,s);function c(){this.constructor=o}o.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}})();Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.AudioProcessorEventObserver=void 0;var t=We(),n=qe(),r=(function(i){e(o,i);function o(){var s=i.call(this)||this;return s._log=new n.default("AudioProcessorEventObserver"),s._log.info("Creating AudioProcessorEventObserver instance"),s.on("enabled",function(){return s._reEmitEvent("enabled")}),s.on("add",function(){return s._reEmitEvent("add")}),s.on("remove",function(){return s._reEmitEvent("remove")}),s.on("create",function(){return s._reEmitEvent("create-processed-stream")}),s.on("destroy",function(){return s._reEmitEvent("destroy-processed-stream")}),s}return o.prototype.destroy=function(){this.removeAllListeners()},o.prototype._reEmitEvent=function(s){this._log.info("AudioProcessor:".concat(s)),this.emit("event",{name:s,group:"audio-processor"})},o})(t.EventEmitter);return Tt.AudioProcessorEventObserver=r,Tt}var Un={},To;function Al(){if(To)return Un;To=1,Object.defineProperty(Un,"__esModule",{value:!0});var e=we(),t={dtmf0:[1360,960],dtmf1:[1230,720],dtmf2:[1360,720],dtmf3:[1480,720],dtmf4:[1230,790],dtmf5:[1360,790],dtmf6:[1480,790],dtmf7:[1230,870],dtmf8:[1360,870],dtmf9:[1480,870],dtmfh:[1480,960],dtmfs:[1230,960]},n=(function(){function r(i){var o=this;this._context=i,this._gainNodes=[],this._gainNodes=[this._context.createGain(),this._context.createGain()],this._gainNodes.forEach(function(s){s.connect(o._context.destination),s.gain.value=.1,o._gainNodes.push(s)})}return r.prototype.cleanup=function(){this._gainNodes.forEach(function(i){i.disconnect()})},r.prototype.play=function(i){var o=this,s=t[i];if(!s)throw new e.InvalidArgumentError("Invalid DTMF sound name");var c=[this._context.createOscillator(),this._context.createOscillator()];c.forEach(function(_,C){_.type="sine",_.frequency.value=s[C],_.connect(o._gainNodes[C]),_.start(),_.stop(o._context.currentTime+.1),_.addEventListener("ended",function(){return _.disconnect()})})},r})();return Un.default=n,Un}var Bt={},Fn={},Po;function Rl(){if(Po)return Fn;Po=1,Object.defineProperty(Fn,"__esModule",{value:!0});function e(n,r,i){var o=JSON.stringify(r.body||{}),s=new Headers;r.headers=r.headers||[],Object.entries(r.headers).forEach(function(c){var _=c[0],C=c[1];return s.append(_,C)}),fetch(r.url,{body:o,headers:s,method:n}).then(function(c){return c.text()},i).then(function(c){return i(null,c)},i)}var t=e;return t.get=function(r,i){return new this("GET",r,i)},t.post=function(r,i){return new this("POST",r,i)},Fn.default=t,Fn}var Io;function xl(){if(Io)return Bt;Io=1;var e=Bt&&Bt.__extends||(function(){var s=function(c,_){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,g){C.__proto__=g}||function(C,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(C[y]=g[y])},s(c,_)};return function(c,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");s(c,_);function C(){this.constructor=c}c.prototype=_===null?Object.create(_):(C.prototype=_.prototype,new C)}})();Object.defineProperty(Bt,"__esModule",{value:!0});var t=We(),n=qe(),r=Rl(),i=(function(s){e(c,s);function c(_,C,g){var y=s.call(this)||this;if(!(y instanceof c))return new c(_,C,g);g=Object.assign({defaultPayload:function(){return{}}},g);var b=g.defaultPayload;typeof b!="function"&&(b=function(){return Object.assign({},g.defaultPayload)});var E=!0,h=Object.assign({app_name:void 0,app_version:void 0},g.metadata);return Object.defineProperties(y,{_defaultPayload:{value:b},_host:{value:g.host,writable:!0},_isEnabled:{get:function(){return E},set:function(a){E=a}},_log:{value:new n.default("EventPublisher")},_request:{value:g.request||r.default,writable:!0},_token:{value:C,writable:!0},isEnabled:{enumerable:!0,get:function(){return E}},metadata:{enumerable:!0,get:function(){return h}},productName:{enumerable:!0,value:_},token:{enumerable:!0,get:function(){return this._token}}}),y}return c})(t.EventEmitter);i.prototype._post=function(c,_,C,g,y,b,E){var h=this;if(!this.isEnabled&&!E||!this._host)return this._log.debug("Publishing cancelled",JSON.stringify({isEnabled:this.isEnabled,force:E,host:this._host})),Promise.resolve();if(!b||(!b.parameters||!b.parameters.CallSid)&&!b.outboundConnectionId)return b?this._log.debug("Publishing cancelled. Missing connection info",JSON.stringify({outboundConnectionId:b.outboundConnectionId,parameters:b.parameters})):this._log.debug("Publishing cancelled. Missing connection object"),Promise.resolve();var a={group:C,level:_.toUpperCase(),name:g,payload:y&&y.forEach?y.slice(0):Object.assign(this._defaultPayload(b),y),payload_type:"application/json",private:!1,publisher:this.productName,timestamp:new Date().toISOString()};this.metadata&&(a.publisher_metadata=this.metadata),c==="EndpointEvents"&&this._log.debug("Publishing insights",JSON.stringify({endpointName:c,event:a,force:E,host:this._host}));var u={body:a,headers:{"Content-Type":"application/json","X-Twilio-Token":this.token},url:"https://".concat(this._host,"/v4/").concat(c)};return new Promise(function(p,f){h._request.post(u,function(m){m?(h.emit("error",m),f(m)):p()})}).catch(function(p){h._log.error("Unable to post ".concat(C," ").concat(g," event to Insights. Received error: ").concat(p))})},i.prototype.post=function(c,_,C,g,y,b){return this._post("EndpointEvents",c,_,C,g,y,b)},i.prototype.debug=function(c,_,C,g){return this.post("debug",c,_,C,g)},i.prototype.info=function(c,_,C,g){return this.post("info",c,_,C,g)},i.prototype.warn=function(c,_,C,g){return this.post("warning",c,_,C,g)},i.prototype.error=function(c,_,C,g){return this.post("error",c,_,C,g)},i.prototype.postMetrics=function(c,_,C,g,y){var b=this;return new Promise(function(E){var h=C.map(o).map(function(a){return Object.assign(a,g)});E(b._post("EndpointMetrics","info",c,_,h,y))})},i.prototype.setHost=function(c){this._host=c},i.prototype.setToken=function(c){this._token=c},i.prototype.enable=function(){this._isEnabled=!0},i.prototype.disable=function(){this._isEnabled=!1};function o(s){return{audio_codec:s.codecName,audio_level_in:s.audioInputLevel,audio_level_out:s.audioOutputLevel,bytes_received:s.bytesReceived,bytes_sent:s.bytesSent,call_volume_input:s.inputVolume,call_volume_output:s.outputVolume,jitter:s.jitter,mos:s.mos&&Math.round(s.mos*100)/100,packets_lost:s.packetsLost,packets_lost_fraction:s.packetsLostFraction&&Math.round(s.packetsLostFraction*100)/100,packets_received:s.packetsReceived,rtt:s.rtt,timestamp:new Date(s.timestamp).toISOString(),total_bytes_received:s.totals.bytesReceived,total_bytes_sent:s.totals.bytesSent,total_packets_lost:s.totals.packetsLost,total_packets_received:s.totals.packetsReceived,total_packets_sent:s.totals.packetsSent}}return Bt.default=i,Bt}var xe={},Pt={},Bn={},Ao;function Ol(){if(Ao)return Bn;Ao=1,Object.defineProperty(Bn,"__esModule",{value:!0});var e=32767,t=typeof window<"u"?window.RTCStatsReport:void 0;function n(m){if(!(this instanceof n))return new n(m);var d=this;Object.defineProperties(this,{_map:{value:m},size:{enumerable:!0,get:function(){return d._map.size}}}),this[Symbol.iterator]=m[Symbol.iterator]}t&&(n.prototype=Object.create(t.prototype),n.prototype.constructor=n),["entries","forEach","get","has","keys","values"].forEach(function(m){n.prototype[m]=function(){for(var d,l=[],S=0;S<arguments.length;S++)l[S]=arguments[S];return(d=this._map)[m].apply(d,l)}}),n.fromArray=function(d){return new n(d.reduce(function(l,S){return l.set(S.id,S),l},new Map))},n.fromRTCStatsResponse=function(d){var l,S=new Map,I=d.result().reduce(function(N,P){var A=P.id;switch(P.type){case"googCertificate":N.set(A,y(P));break;case"datachannel":N.set(A,b(P));break;case"googCandidatePair":p(P,"googActiveConnection")&&(l=A),N.set(A,g(P));break;case"localcandidate":N.set(A,C(P,!1));break;case"remotecandidate":N.set(A,C(P,!0));break;case"ssrc":f(P,"packetsReceived")?N.set("rtp-".concat(A),c(P)):N.set("rtp-".concat(A),_(P)),N.set("track-".concat(A),o(P)),N.set("codec-".concat(A),i(P));break;case"googComponent":var T=r(P);S.set(T.selectedCandidatePairId,A),N.set(A,r(P));break}return N},new Map);if(l){var w=S.get(l);w&&(I.get(w).dtlsState="connected")}return new n(I)};function r(m){return{bytesReceived:void 0,bytesSent:void 0,dtlsState:void 0,id:m.id,localCertificateId:m.stat("localCertificateId"),remoteCertificateId:m.stat("remoteCertificateId"),rtcpTransportStatsId:void 0,selectedCandidatePairId:m.stat("selectedCandidatePairId"),timestamp:Date.parse(m.timestamp),type:"transport"}}function i(m){return{channels:void 0,clockRate:void 0,id:m.id,implementation:void 0,mimeType:"".concat(m.stat("mediaType"),"/").concat(m.stat("googCodecName")),payloadType:void 0,sdpFmtpLine:void 0,timestamp:Date.parse(m.timestamp),type:"codec"}}function o(m){return{audioLevel:f(m,"audioOutputLevel")?a(m,"audioOutputLevel")/e:(a(m,"audioInputLevel")||0)/e,detached:void 0,echoReturnLoss:u(m,"googEchoCancellationReturnLoss"),echoReturnLossEnhancement:u(m,"googEchoCancellationReturnLossEnhancement"),ended:void 0,frameHeight:f(m,"googFrameHeightReceived")?a(m,"googFrameHeightReceived"):a(m,"googFrameHeightSent"),frameWidth:f(m,"googFrameWidthReceived")?a(m,"googFrameWidthReceived"):a(m,"googFrameWidthSent"),framesCorrupted:void 0,framesDecoded:a(m,"framesDecoded"),framesDropped:void 0,framesPerSecond:void 0,framesReceived:void 0,framesSent:a(m,"framesEncoded"),fullFramesLost:void 0,id:m.id,kind:m.stat("mediaType"),partialFramesLost:void 0,remoteSource:void 0,ssrcIds:void 0,timestamp:Date.parse(m.timestamp),trackIdentifier:m.stat("googTrackId"),type:"track"}}function s(m,d){return{associateStatsId:void 0,codecId:"codec-".concat(m.id),firCount:d?a(m,"googFirsSent"):void 0,id:m.id,isRemote:void 0,mediaType:m.stat("mediaType"),nackCount:d?a(m,"googNacksSent"):a(m,"googNacksReceived"),pliCount:d?a(m,"googPlisSent"):a(m,"googPlisReceived"),qpSum:a(m,"qpSum"),sliCount:void 0,ssrc:m.stat("ssrc"),timestamp:Date.parse(m.timestamp),trackId:"track-".concat(m.id),transportId:m.stat("transportId")}}function c(m){var d=s(m,!0);return Object.assign(d,{burstDiscardCount:void 0,burstDiscardRate:void 0,burstLossCount:void 0,burstLossRate:void 0,burstPacketsDiscarded:void 0,burstPacketsLost:void 0,bytesReceived:a(m,"bytesReceived"),fractionLost:void 0,framesDecoded:a(m,"framesDecoded"),gapDiscardRate:void 0,gapLossRate:void 0,jitter:E(m.stat("googJitterReceived")),packetsDiscarded:void 0,packetsLost:a(m,"packetsLost"),packetsReceived:a(m,"packetsReceived"),packetsRepaired:void 0,roundTripTime:E(m.stat("googRtt")),type:"inbound-rtp"}),d}function _(m){var d=s(m,!1);return Object.assign(d,{bytesSent:a(m,"bytesSent"),framesEncoded:a(m,"framesEncoded"),packetsSent:a(m,"packetsSent"),remoteTimestamp:void 0,targetBitrate:void 0,type:"outbound-rtp"}),d}function C(m,d){return{candidateType:h(m.stat("candidateType")),deleted:void 0,id:m.id,ip:m.stat("ipAddress"),isRemote:d,port:a(m,"portNumber"),priority:u(m,"priority"),protocol:m.stat("transport"),relayProtocol:void 0,timestamp:Date.parse(m.timestamp),transportId:void 0,type:d?"remote-candidate":"local-candidate",url:void 0}}function g(m){return{availableIncomingBitrate:void 0,availableOutgoingBitrate:void 0,bytesReceived:a(m,"bytesReceived"),bytesSent:a(m,"bytesSent"),consentRequestsSent:a(m,"consentRequestsSent"),currentRoundTripTime:E(m.stat("googRtt")),id:m.id,lastPacketReceivedTimestamp:void 0,lastPacketSentTimestamp:void 0,localCandidateId:m.stat("localCandidateId"),nominated:void 0,priority:void 0,readable:void 0,remoteCandidateId:m.stat("remoteCandidateId"),requestsReceived:a(m,"requestsReceived"),requestsSent:a(m,"requestsSent"),responsesReceived:a(m,"responsesReceived"),responsesSent:a(m,"responsesSent"),retransmissionsReceived:void 0,retransmissionsSent:void 0,state:void 0,timestamp:Date.parse(m.timestamp),totalRoundTripTime:void 0,transportId:m.stat("googChannelId"),type:"candidate-pair",writable:p(m,"googWritable")}}function y(m){return{base64Certificate:m.stat("googDerBase64"),fingerprint:m.stat("googFingerprint"),fingerprintAlgorithm:m.stat("googFingerprintAlgorithm"),id:m.id,issuerCertificateId:m.stat("googIssuerId"),timestamp:Date.parse(m.timestamp),type:"certificate"}}function b(m){return{bytesReceived:void 0,bytesSent:void 0,datachannelid:m.stat("datachannelid"),id:m.id,label:m.stat("label"),messagesReceived:void 0,messagesSent:void 0,protocol:m.stat("protocol"),state:m.stat("state"),timestamp:Date.parse(m.timestamp),transportId:m.stat("transportId"),type:"data-channel"}}function E(m){return isNaN(m)||m===""?void 0:parseInt(m,10)/1e3}function h(m){switch(m){case"peerreflexive":return"prflx";case"serverreflexive":return"srflx";case"host":case"relay":default:return m}}function a(m,d){var l=m.stat(d);return f(m,d)?parseInt(l,10):void 0}function u(m,d){var l=m.stat(d);return f(m,d)?parseFloat(l):void 0}function p(m,d){var l=m.stat(d);return f(m,d)?l==="true"||l===!0:void 0}function f(m,d){var l=m.stat(d);return typeof l<"u"&&l!==""}return Bn.default=n,Bn}var Ro;function ya(){if(Ro)return Pt;Ro=1;var e=Pt&&Pt.__spreadArray||function(y,b,E){if(E||arguments.length===2)for(var h=0,a=b.length,u;h<a;h++)(u||!(h in b))&&(u||(u=Array.prototype.slice.call(b,0,h)),u[h]=b[h]);return y.concat(u||Array.prototype.slice.call(b))};Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.getRTCStats=c,Pt.getRTCIceCandidateStatsReport=_;var t=we(),n=Ol(),r="PeerConnection is null",i="WebRTC statistics are unsupported";function o(y,b){return typeof y.get=="function"?y.get(b):y.find(function(E){return E.id===b})}function s(y){if(!y)return Promise.reject(new t.InvalidArgumentError(r));if(typeof y.getStats!="function")return Promise.reject(new t.NotSupportedError(i));var b;try{b=y.getStats()}catch{b=new Promise(function(h){return y.getStats(h)}).then(n.default.fromRTCStatsResponse)}return b}function c(y,b){return b=Object.assign({createRTCSample:g},b),s(y).then(b.createRTCSample)}function _(y){return s(y).then(function(b){var E=Array.from(b.values()).reduce(function(d,l){switch(["candidatePairs","localCandidates","remoteCandidates"].forEach(function(S){d[S]||(d[S]=[])}),l.type){case"candidate-pair":d.candidatePairs.push(l);break;case"local-candidate":d.localCandidates.push(l);break;case"remote-candidate":d.remoteCandidates.push(l);break;case"transport":l.selectedCandidatePairId&&(d.transport=l);break}return d},{}),h=E.candidatePairs,a=E.localCandidates,u=E.remoteCandidates,p=E.transport,f=h.find(function(d){return d.selected||p&&d.id===p.selectedCandidatePairId}),m;return f&&(m={localCandidate:a.find(function(d){return d.id===f.localCandidateId}),remoteCandidate:u.find(function(d){return d.id===f.remoteCandidateId})}),{iceCandidateStats:e(e([],a,!0),u,!0),selectedIceCandidatePairStats:m}})}function C(){}function g(y){var b=null,E=new C,h;Array.from(y.values()).forEach(function(m){if(!m.isRemote){var d=m.type.replace("-","");if(h=h||m.timestamp,m.remoteId){var l=o(y,m.remoteId);l&&l.roundTripTime&&(E.rtt=l.roundTripTime*1e3)}switch(d){case"inboundrtp":E.timestamp=E.timestamp||m.timestamp,E.jitter=m.jitter*1e3,E.packetsLost=m.packetsLost,E.packetsReceived=m.packetsReceived,E.bytesReceived=m.bytesReceived;break;case"outboundrtp":if(E.timestamp=m.timestamp,E.packetsSent=m.packetsSent,E.bytesSent=m.bytesSent,m.codecId){var S=o(y,m.codecId);E.codecName=S?S.mimeType&&S.mimeType.match(/(.*\/)?(.*)/)[2]:m.codecId}break;case"transport":b=m.id;break}}}),E.timestamp||(E.timestamp=h);var a=o(y,b);if(!a)return E;var u=o(y,a.selectedCandidatePairId);if(!u)return E;var p=o(y,u.localCandidateId),f=o(y,u.remoteCandidateId);return E.rtt||(E.rtt=u&&u.currentRoundTripTime*1e3),Object.assign(E,{localAddress:p&&(p.address||p.ip),remoteAddress:f&&(f.address||f.ip)}),E}return Pt}var xo;function ba(){if(xo)return xe;xo=1;var e=xe&&xe.__extends||(function(){var b=function(E,h){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(a[p]=u[p])},b(E,h)};return function(E,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");b(E,h);function a(){this.constructor=E}E.prototype=h===null?Object.create(h):(a.prototype=h.prototype,new a)}})(),t=xe&&xe.__assign||function(){return t=Object.assign||function(b){for(var E,h=1,a=arguments.length;h<a;h++){E=arguments[h];for(var u in E)Object.prototype.hasOwnProperty.call(E,u)&&(b[u]=E[u])}return b},t.apply(this,arguments)},n=xe&&xe.__awaiter||function(b,E,h,a){function u(p){return p instanceof h?p:new h(function(f){f(p)})}return new(h||(h=Promise))(function(p,f){function m(S){try{l(a.next(S))}catch(I){f(I)}}function d(S){try{l(a.throw(S))}catch(I){f(I)}}function l(S){S.done?p(S.value):u(S.value).then(m,d)}l((a=a.apply(b,E||[])).next())})},r=xe&&xe.__generator||function(b,E){var h={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},a,u,p,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=m(0),f.throw=m(1),f.return=m(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(l){return function(S){return d([l,S])}}function d(l){if(a)throw new TypeError("Generator is already executing.");for(;f&&(f=0,l[0]&&(h=0)),h;)try{if(a=1,u&&(p=l[0]&2?u.return:l[0]?u.throw||((p=u.return)&&p.call(u),0):u.next)&&!(p=p.call(u,l[1])).done)return p;switch(u=0,p&&(l=[l[0]&2,p.value]),l[0]){case 0:case 1:p=l;break;case 4:return h.label++,{value:l[1],done:!1};case 5:h.label++,u=l[1],l=[0];continue;case 7:l=h.ops.pop(),h.trys.pop();continue;default:if(p=h.trys,!(p=p.length>0&&p[p.length-1])&&(l[0]===6||l[0]===2)){h=0;continue}if(l[0]===3&&(!p||l[1]>p[0]&&l[1]<p[3])){h.label=l[1];break}if(l[0]===6&&h.label<p[1]){h.label=p[1],p=l;break}if(p&&h.label<p[2]){h.label=p[2],h.ops.push(l);break}p[2]&&h.ops.pop(),h.trys.pop();continue}l=E.call(b,h)}catch(S){l=[6,S],u=0}finally{a=p=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(xe,"__esModule",{value:!0}),xe.PreflightTest=void 0;var i=We(),o=Ii(),s=yr(),c=we(),_=qe(),C=ya(),g=Zt(),y=(function(b){e(E,b);function E(h,a){var u=b.call(this)||this;u._hasInsightsErrored=!1,u._log=new _.default("PreflightTest"),u._networkTiming={},u._options={codecPreferences:[o.default.Codec.PCMU,o.default.Codec.Opus],edge:"roaming",fakeMicInput:!1,logLevel:"error",signalingTimeoutMs:1e4},u._status=E.Status.Connecting,Object.assign(u._options,a),u._samples=[],u._warnings=[],u._startTime=Date.now(),u._initDevice(h,t(t({},u._options),{fileInputStream:u._options.fakeMicInput?u._getStreamFromFile():void 0}));var p=["codecPreferences","edge","fakeMicInput","logLevel","signalingTimeoutMs"],f=["audioContext","deviceFactory","fileInputStream","getRTCIceCandidateStatsReport","iceServers","rtcConfiguration"];if(typeof a=="object"){var m=t({},a);Object.keys(m).forEach(function(d){!p.includes(d)&&!f.includes(d)&&delete m[d],f.includes(d)&&(m[d]=!0)}),u._log.debug(".constructor",JSON.stringify(m))}return u}return E.prototype.stop=function(){var h=this;this._log.debug(".stop");var a=new c.GeneralErrors.CallCancelledError;this._device?(this._device.once(s.default.EventName.Unregistered,function(){return h._onFailed(a)}),this._device.destroy()):this._onFailed(a)},E.prototype._emitWarning=function(h,a,u){var p={name:h,description:a};u&&(p.rtcWarning=u),this._warnings.push(p),this._log.debug("#".concat(E.Events.Warning),JSON.stringify(p)),this.emit(E.Events.Warning,p)},E.prototype._getCallQuality=function(h){return h>4.2?E.CallQuality.Excellent:h>=4.1&&h<=4.2?E.CallQuality.Great:h>=3.7&&h<=4?E.CallQuality.Good:h>=3.1&&h<=3.6?E.CallQuality.Fair:E.CallQuality.Degraded},E.prototype._getReport=function(){var h,a,u,p=this._getRTCStats(),f={start:this._startTime};this._endTime&&(f.end=this._endTime,f.duration=this._endTime-this._startTime);var m={callSid:this._callSid,edge:this._edge,iceCandidateStats:(a=(h=this._rtcIceCandidateStatsReport)===null||h===void 0?void 0:h.iceCandidateStats)!==null&&a!==void 0?a:[],networkTiming:this._networkTiming,samples:this._samples,selectedEdge:this._options.edge,stats:p,testTiming:f,totals:this._getRTCSampleTotals(),warnings:this._warnings},d=(u=this._rtcIceCandidateStatsReport)===null||u===void 0?void 0:u.selectedIceCandidatePairStats;return d&&(m.selectedIceCandidatePairStats=d,m.isTurnRequired=d.localCandidate.candidateType==="relay"||d.remoteCandidate.candidateType==="relay"),p&&(m.callQuality=this._getCallQuality(p.mos.average)),m},E.prototype._getRTCSampleTotals=function(){if(this._latestSample)return t({},this._latestSample.totals)},E.prototype._getRTCStats=function(){var h=this._samples.findIndex(function(u){return typeof u.mos=="number"&&u.mos>0}),a=h>=0?this._samples.slice(h):[];if(!(!a||!a.length))return["jitter","mos","rtt"].reduce(function(u,p){var f,m=a.map(function(d){return d[p]});return t(t({},u),(f={},f[p]={average:Number((m.reduce(function(d,l){return d+l})/m.length).toPrecision(5)),max:Math.max.apply(Math,m),min:Math.min.apply(Math,m)},f))},{})},E.prototype._getStreamFromFile=function(){var h=this._options.audioContext;if(!h)throw new c.NotSupportedError("Cannot fake input audio stream: AudioContext is not supported by this browser.");var a=new Audio(g.COWBELL_AUDIO_URL);a.addEventListener("canplaythrough",function(){return a.play()}),typeof a.setAttribute=="function"&&a.setAttribute("crossorigin","anonymous");var u=h.createMediaElementSource(a),p=h.createMediaStreamDestination();return u.connect(p),p.stream},E.prototype._initDevice=function(h,a){var u=this;try{this._device=new(a.deviceFactory||s.default)(h,{chunderw:a.chunderw,codecPreferences:a.codecPreferences,edge:a.edge,eventgw:a.eventgw,fileInputStream:a.fileInputStream,logLevel:a.logLevel,preflight:!0}),this._device.once(s.default.EventName.Registered,function(){u._onDeviceRegistered()}),this._device.once(s.default.EventName.Error,function(p){u._onDeviceError(p)}),this._device.register()}catch(p){setTimeout(function(){u._onFailed(p)});return}this._signalingTimeoutTimer=setTimeout(function(){u._onDeviceError(new c.SignalingErrors.ConnectionError("WebSocket Connection Timeout"))},a.signalingTimeoutMs)},E.prototype._onDeviceError=function(h){this._device.destroy(),this._onFailed(h)},E.prototype._onDeviceRegistered=function(){return n(this,void 0,void 0,function(){var h,a,u,p=this;return r(this,function(f){switch(f.label){case 0:return clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),h=this,[4,this._device.connect({rtcConfiguration:this._options.rtcConfiguration})];case 1:return h._call=f.sent(),this._networkTiming.signaling={start:Date.now()},this._setupCallHandlers(this._call),this._edge=this._device.edge||void 0,this._options.fakeMicInput&&(this._echoTimer=setTimeout(function(){return p._device.disconnectAll()},g.ECHO_TEST_DURATION),a=this._device.audio,a&&(a.disconnect(!1),a.outgoing(!1))),this._call.once("disconnect",function(){p._device.once(s.default.EventName.Unregistered,function(){return p._onUnregistered()}),p._device.destroy()}),u=this._call._publisher,u.on("error",function(){p._hasInsightsErrored||p._emitWarning("insights-connection-error","Received an error when attempting to connect to Insights gateway"),p._hasInsightsErrored=!0}),[2]}})})},E.prototype._onFailed=function(h){clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=E.Status.Failed,this._log.debug("#".concat(E.Events.Failed),h),this.emit(E.Events.Failed,h)},E.prototype._onUnregistered=function(){var h=this;setTimeout(function(){h._status!==E.Status.Failed&&(clearTimeout(h._echoTimer),clearTimeout(h._signalingTimeoutTimer),h._releaseHandlers(),h._endTime=Date.now(),h._status=E.Status.Completed,h._report=h._getReport(),h._log.debug("#".concat(E.Events.Completed),JSON.stringify(h._report)),h.emit(E.Events.Completed,h._report))},10)},E.prototype._releaseHandlers=function(){[this._device,this._call].forEach(function(h){h&&h.eventNames().forEach(function(a){return h.removeAllListeners(a)})})},E.prototype._setupCallHandlers=function(h){var a=this;this._options.fakeMicInput&&h.once("volume",function(){h._mediaHandler.outputs.forEach(function(u){return u.audio.muted=!0})}),h.on("warning",function(u,p){a._emitWarning(u,"Received an RTCWarning. See .rtcWarning for the RTCWarning",p)}),h.once("accept",function(){a._callSid=h._mediaHandler.callSid,a._status=E.Status.Connected,a._log.debug("#".concat(E.Events.Connected)),a.emit(E.Events.Connected)}),h.on("sample",function(u){return n(a,void 0,void 0,function(){var p;return r(this,function(f){switch(f.label){case 0:return this._latestSample?[3,2]:(p=this,[4,(this._options.getRTCIceCandidateStatsReport||C.getRTCIceCandidateStatsReport)(h._mediaHandler.version.pc)]);case 1:p._rtcIceCandidateStatsReport=f.sent(),f.label=2;case 2:return this._latestSample=u,this._samples.push(u),this._log.debug("#".concat(E.Events.Sample),JSON.stringify(u)),this.emit(E.Events.Sample,u),[2]}})})}),[{reportLabel:"peerConnection",type:"pcconnection"},{reportLabel:"ice",type:"iceconnection"},{reportLabel:"dtls",type:"dtlstransport"},{reportLabel:"signaling",type:"signaling"}].forEach(function(u){var p=u.type,f=u.reportLabel,m="on".concat(p,"statechange"),d=h._mediaHandler[m];h._mediaHandler[m]=function(l){var S=a._networkTiming[f]=a._networkTiming[f]||{start:0};l==="connecting"||l==="checking"?S.start=Date.now():(l==="connected"||l==="stable")&&!S.duration&&(S.end=Date.now(),S.duration=S.end-S.start),d(l)}})},Object.defineProperty(E.prototype,"callSid",{get:function(){return this._callSid},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"endTime",{get:function(){return this._endTime},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"latestSample",{get:function(){return this._latestSample},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"report",{get:function(){return this._report},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"startTime",{get:function(){return this._startTime},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),E})(i.EventEmitter);return xe.PreflightTest=y,(function(b){(function(E){E.Excellent="excellent",E.Great="great",E.Good="good",E.Fair="fair",E.Degraded="degraded"})(b.CallQuality||(b.CallQuality={})),(function(E){E.Completed="completed",E.Connected="connected",E.Failed="failed",E.Sample="sample",E.Warning="warning"})(b.Events||(b.Events={})),(function(E){E.Connecting="connecting",E.Connected="connected",E.Completed="completed",E.Failed="failed"})(b.Status||(b.Status={}))})(y||(xe.PreflightTest=y={})),xe}var Ht={},Qe={},Oo;function kl(){if(Oo)return Qe;Oo=1;var e=Qe&&Qe.__extends||(function(){var u=function(p,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,d){m.__proto__=d}||function(m,d){for(var l in d)Object.prototype.hasOwnProperty.call(d,l)&&(m[l]=d[l])},u(p,f)};return function(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(p,f);function m(){this.constructor=p}p.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}})(),t=Qe&&Qe.__assign||function(){return t=Object.assign||function(u){for(var p,f=1,m=arguments.length;f<m;f++){p=arguments[f];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(u[d]=p[d])}return u},t.apply(this,arguments)};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.WSTransportState=void 0;var n=We(),r=ma(),i=we(),o=qe(),s=globalThis.WebSocket,c=1e4,_=5e3,C=15e3,g=15e3,y=1/0,b=1e3,E=2e4,h;(function(u){u.Connecting="connecting",u.Closed="closed",u.Open="open"})(h||(Qe.WSTransportState=h={}));var a=(function(u){e(p,u);function p(f,m){m===void 0&&(m={});var d=u.call(this)||this;return d.state=h.Closed,d._backoffStartTime={preferred:null,primary:null},d._connectedUri=null,d._log=new o.default("WSTransport"),d._shouldFallback=!1,d._uriIndex=0,d._moveUriIndex=function(){d._uriIndex++,d._uriIndex>=d._uris.length&&(d._uriIndex=0)},d._onSocketClose=function(l){if(d._log.error("Received websocket close event code: ".concat(l.code,". Reason: ").concat(l.reason)),l.code===1006||l.code===1015){d.emit("error",{code:31005,message:l.reason||"Websocket connection to Twilio's signaling servers were unexpectedly ended. If this is happening consistently, there may be an issue resolving the hostname provided. If a region or an edge is being specified in Device setup, ensure it is valid.",twilioError:new i.SignalingErrors.ConnectionError});var S=d.state===h.Open||d._previousState===h.Open;(d._shouldFallback||!S)&&d._moveUriIndex(),d._shouldFallback=!0}d._closeSocket()},d._onSocketError=function(l){d._log.error("WebSocket received error: ".concat(l.message)),d.emit("error",{code:31e3,message:l.message||"WSTransport socket error",twilioError:new i.SignalingErrors.ConnectionDisconnected})},d._onSocketMessage=function(l){if(d._setHeartbeatTimeout(),d._socket&&l.data===`
`){d._socket.send(`
`),d._log.debug("heartbeat");return}l&&typeof l.data=="string"&&d._log.debug("Received: ".concat(l.data)),d.emit("message",l)},d._onSocketOpen=function(){d._log.info("WebSocket opened successfully."),d._timeOpened=Date.now(),d._shouldFallback=!1,d._setState(h.Open),clearTimeout(d._connectTimeout),d._resetBackoffs(),d._setHeartbeatTimeout(),d.emit("open")},d._options=t(t({},p.defaultConstructorOptions),m),d._uris=f,d._backoff=d._setupBackoffs(),d}return p.prototype.close=function(){this._log.info("WSTransport.close() called..."),this._close()},p.prototype.open=function(){if(this._log.info("WSTransport.open() called..."),this._socket&&(this._socket.readyState===s.CONNECTING||this._socket.readyState===s.OPEN)){this._log.info("WebSocket already open.");return}this._preferredUri?this._connect(this._preferredUri):this._connect(this._uris[this._uriIndex])},p.prototype.send=function(f){if(this._log.debug("Sending: ".concat(f)),!this._socket||this._socket.readyState!==s.OPEN)return this._log.debug("Cannot send message. WebSocket is not open."),!1;try{this._socket.send(f)}catch(m){return this._log.error("Error while sending message:",m.message),this._closeSocket(),!1}return!0},p.prototype.updatePreferredURI=function(f){this._preferredUri=f},p.prototype.updateURIs=function(f){typeof f=="string"&&(f=[f]),this._uris=f,this._uriIndex=0},p.prototype._close=function(){this._setState(h.Closed),this._closeSocket()},p.prototype._closeSocket=function(){if(clearTimeout(this._connectTimeout),clearTimeout(this._heartbeatTimeout),this._log.info("Closing and cleaning up WebSocket..."),!this._socket){this._log.info("No WebSocket to clean up.");return}this._socket.removeEventListener("close",this._onSocketClose),this._socket.removeEventListener("error",this._onSocketError),this._socket.removeEventListener("message",this._onSocketMessage),this._socket.removeEventListener("open",this._onSocketOpen),(this._socket.readyState===s.CONNECTING||this._socket.readyState===s.OPEN)&&this._socket.close(),this._timeOpened&&Date.now()-this._timeOpened>c&&this._resetBackoffs(),this.state!==h.Closed&&this._performBackoff(),delete this._socket,this.emit("close")},p.prototype._connect=function(f,m){var d=this;this._log.info(typeof m=="number"?"Attempting to reconnect (retry #".concat(m,")..."):"Attempting to connect..."),this._closeSocket(),this._setState(h.Connecting),this._connectedUri=f;try{this._socket=new this._options.WebSocket(this._connectedUri)}catch(l){this._log.error("Could not connect to endpoint:",l.message),this._close(),this.emit("error",{code:31e3,message:l.message||"Could not connect to ".concat(this._connectedUri),twilioError:new i.SignalingErrors.ConnectionDisconnected});return}this._socket.addEventListener("close",this._onSocketClose),this._socket.addEventListener("error",this._onSocketError),this._socket.addEventListener("message",this._onSocketMessage),this._socket.addEventListener("open",this._onSocketOpen),delete this._timeOpened,this._connectTimeout=setTimeout(function(){d._log.info("WebSocket connection attempt timed out."),d._moveUriIndex(),d._closeSocket()},this._options.connectTimeoutMs)},p.prototype._performBackoff=function(){this._preferredUri?(this._log.info("Preferred URI set; backing off."),this._backoff.preferred.backoff()):(this._log.info("Preferred URI not set; backing off."),this._backoff.primary.backoff())},p.prototype._resetBackoffs=function(){this._backoff.preferred.reset(),this._backoff.primary.reset(),this._backoffStartTime.preferred=null,this._backoffStartTime.primary=null},p.prototype._setHeartbeatTimeout=function(){var f=this;clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=setTimeout(function(){f._log.info("No messages received in ".concat(C/1e3," seconds. Reconnecting...")),f._shouldFallback=!0,f._closeSocket()},C)},p.prototype._setState=function(f){this._previousState=this.state,this.state=f},p.prototype._setupBackoffs=function(){var f=this,m={factor:2,jitter:.4,max:this._options.maxPreferredDelayMs,min:100};this._log.info("Initializing preferred transport backoff using config: ",m);var d=new r.default(m);d.on("backoff",function(I,w){if(f.state===h.Closed){f._log.info("Preferred backoff initiated but transport state is closed; not attempting a connection.");return}f._log.info("Will attempt to reconnect Websocket to preferred URI in ".concat(w,"ms")),I===0&&(f._backoffStartTime.preferred=Date.now(),f._log.info("Preferred backoff start; ".concat(f._backoffStartTime.preferred)))}),d.on("ready",function(I,w){if(f.state===h.Closed){f._log.info("Preferred backoff ready but transport state is closed; not attempting a connection.");return}if(f._backoffStartTime.preferred===null){f._log.info("Preferred backoff start time invalid; not attempting a connection.");return}if(Date.now()-f._backoffStartTime.preferred>f._options.maxPreferredDurationMs){f._log.info("Max preferred backoff attempt time exceeded; falling back to primary backoff."),f._preferredUri=null,f._backoff.primary.backoff();return}if(typeof f._preferredUri!="string"){f._log.info("Preferred URI cleared; falling back to primary backoff."),f._preferredUri=null,f._backoff.primary.backoff();return}f._connect(f._preferredUri,I+1)});var l={factor:2,jitter:.4,max:this._options.maxPrimaryDelayMs,min:this._uris&&this._uris.length>1?Math.floor(Math.random()*4001)+1e3:100};this._log.info("Initializing primary transport backoff using config: ",l);var S=new r.default(l);return S.on("backoff",function(I,w){if(f.state===h.Closed){f._log.info("Primary backoff initiated but transport state is closed; not attempting a connection.");return}f._log.info("Will attempt to reconnect WebSocket in ".concat(w,"ms")),I===0&&(f._backoffStartTime.primary=Date.now(),f._log.info("Primary backoff start; ".concat(f._backoffStartTime.primary)))}),S.on("ready",function(I,w){if(f.state===h.Closed){f._log.info("Primary backoff ready but transport state is closed; not attempting a connection.");return}if(f._backoffStartTime.primary===null){f._log.info("Primary backoff start time invalid; not attempting a connection.");return}if(Date.now()-f._backoffStartTime.primary>f._options.maxPrimaryDurationMs){f._log.info("Max primary backoff attempt time exceeded; not attempting a connection.");return}f._connect(f._uris[f._uriIndex],I+1)}),{preferred:d,primary:S}},Object.defineProperty(p.prototype,"uri",{get:function(){return this._connectedUri},enumerable:!1,configurable:!0}),p.defaultConstructorOptions={WebSocket:s,connectTimeoutMs:_,maxPreferredDelayMs:b,maxPreferredDurationMs:g,maxPrimaryDelayMs:E,maxPrimaryDurationMs:y},p})(n.EventEmitter);return Qe.default=a,Qe}var ko;function Dl(){if(ko)return Ht;ko=1;var e=Ht&&Ht.__extends||(function(){var g=function(y,b){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,h){E.__proto__=h}||function(E,h){for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&(E[a]=h[a])},g(y,b)};return function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");g(y,b);function E(){this.constructor=y}y.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}})();Object.defineProperty(Ht,"__esModule",{value:!0});var t=We(),n=Zt(),r=we(),i=qe(),o=kl(),s="1.6",c=30,_=(function(g){e(y,g);function y(b,E,h){var a=g.call(this)||this;if(!(a instanceof y))return new y(b,E,h);var u={TransportFactory:o.default};h=h||{};for(var p in u)p in h||(h[p]=u[p]);a.options=h,a.token=b||"",a.status="disconnected",a.gateway=null,a.region=null,a._messageQueue=[],a._preferredUri=null,a._uris=E,a._handleTransportClose=a._handleTransportClose.bind(a),a._handleTransportError=a._handleTransportError.bind(a),a._handleTransportMessage=a._handleTransportMessage.bind(a),a._handleTransportOpen=a._handleTransportOpen.bind(a),a._log=new i.default("PStream"),a.on("error",function(){a._log.warn("Unexpected error handled in pstream")});var f=a;return a.addListener("ready",function(){f.status="ready"}),a.addListener("offline",function(){f.status="offline"}),a.addListener("close",function(){f._log.info('Received "close" from server. Destroying PStream...'),f._destroy()}),a.transport=new a.options.TransportFactory(a._uris,{backoffMaxMs:a.options.backoffMaxMs,maxPreferredDurationMs:a.options.maxPreferredDurationMs}),Object.defineProperties(a,{uri:{enumerable:!0,get:function(){return this.transport.uri}}}),a.transport.on("close",a._handleTransportClose),a.transport.on("error",a._handleTransportError),a.transport.on("message",a._handleTransportMessage),a.transport.on("open",a._handleTransportOpen),a.transport.open(),a}return y})(t.EventEmitter);_.prototype._handleTransportClose=function(){this.emit("transportClose"),this.status!=="disconnected"&&(this.status!=="offline"&&this.emit("offline",this),this.status="disconnected")},_.prototype._handleTransportError=function(g){if(!g){this.emit("error",{error:{code:31e3,message:"Websocket closed without a provided reason",twilioError:new r.SignalingErrors.ConnectionDisconnected}});return}this.emit("error",typeof g.code<"u"?{error:g}:g)},_.prototype._handleTransportMessage=function(g){if(!(!g||!g.data||typeof g.data!="string")){var y=JSON.parse(g.data),b=y.type,E=y.payload,h=E===void 0?{}:E;this.gateway=h.gateway||this.gateway,this.region=h.region||this.region,b==="error"&&h.error&&(h.error.twilioError=new r.SignalingErrors.ConnectionError),this.emit(b,h)}},_.prototype._handleTransportOpen=function(){var g=this;this.status="connected",this.setToken(this.token),this.emit("transportOpen");var y=this._messageQueue.splice(0,this._messageQueue.length);y.forEach(function(b){return g._publish.apply(g,b)})},_.toString=function(){return"[Twilio.PStream class]"},_.prototype.toString=function(){return"[Twilio.PStream instance]"},_.prototype.setToken=function(g){this._log.info("Setting token and publishing listen"),this.token=g;var y=0,b=this.options.maxPreferredDurationMs;this._log.info("maxPreferredDurationMs:".concat(b)),typeof b=="number"&&b>=0&&(y=Math.min(Math.ceil(b/1e3),c)),this._log.info("reconnectTimeout:".concat(y));var E={browserinfo:C(),reconnectTimeout:y,token:g};this._publish("listen",E)},_.prototype.sendMessage=function(g,y,b,E,h){b===void 0&&(b="application/json");var a={callsid:g,content:y,contenttype:b,messagetype:E,voiceeventsid:h};this._publish("message",a,!0)},_.prototype.register=function(g){var y={media:g};this._publish("register",y,!0)},_.prototype.invite=function(g,y,b){var E={callsid:y,sdp:g,twilio:b?{params:b}:{}};this._publish("invite",E,!0)},_.prototype.reconnect=function(g,y,b){var E={callsid:y,reconnect:b,sdp:g,twilio:{}};this._publish("invite",E,!0)},_.prototype.answer=function(g,y){this._publish("answer",{sdp:g,callsid:y},!0)},_.prototype.dtmf=function(g,y){this._publish("dtmf",{callsid:g,dtmf:y},!0)},_.prototype.hangup=function(g,y){var b=y?{callsid:g,message:y}:{callsid:g};this._publish("hangup",b,!0)},_.prototype.reject=function(g){this._publish("reject",{callsid:g},!0)},_.prototype.reinvite=function(g,y){this._publish("reinvite",{sdp:g,callsid:y},!1)},_.prototype._destroy=function(){this.transport.removeListener("close",this._handleTransportClose),this.transport.removeListener("error",this._handleTransportError),this.transport.removeListener("message",this._handleTransportMessage),this.transport.removeListener("open",this._handleTransportOpen),this.transport.close(),this.emit("offline",this)},_.prototype.destroy=function(){return this._log.info("PStream.destroy() called..."),this._destroy(),this},_.prototype.updatePreferredURI=function(g){this._preferredUri=g,this.transport.updatePreferredURI(g)},_.prototype.updateURIs=function(g){this._uris=g,this.transport.updateURIs(this._uris)},_.prototype.publish=function(g,y){return this._publish(g,y,!0)},_.prototype._publish=function(g,y,b){var E=JSON.stringify({payload:y,type:g,version:s}),h=!!this.transport.send(E);h||(this.emit("error",{error:{code:31009,message:"No transport available to send or receive messages",twilioError:new r.GeneralErrors.TransportError}}),b&&this._messageQueue.push([g,y,!0]))};function C(){var g=typeof navigator<"u"?navigator:{},y={browser:{platform:g.platform||"unknown",userAgent:g.userAgent||"unknown"},p:"browser",plugin:"rtc",v:n.RELEASE_VERSION};return y}return Ht.default=_,Ht}var Fr={},Do;function Ml(){return Do||(Do=1,(function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.defaultEdge=e.regionToEdge=e.regionShortcodes=e.Region=e.Edge=void 0,e.createEventGatewayURI=c,e.createSignalingEndpointURL=_,e.getChunderURIs=C,e.getRegionShortcode=g;var n=we(),r;(function(y){y.Sydney="sydney",y.SaoPaulo="sao-paulo",y.Dublin="dublin",y.Frankfurt="frankfurt",y.Tokyo="tokyo",y.Singapore="singapore",y.Ashburn="ashburn",y.Umatilla="umatilla",y.Roaming="roaming",y.AshburnIx="ashburn-ix",y.SanJoseIx="san-jose-ix",y.LondonIx="london-ix",y.FrankfurtIx="frankfurt-ix",y.SingaporeIx="singapore-ix",y.SydneyIx="sydney-ix",y.TokyoIx="tokyo-ix"})(r||(e.Edge=r={}));var i;(function(y){y.Au1="au1",y.Au1Ix="au1-ix",y.Br1="br1",y.De1="de1",y.De1Ix="de1-ix",y.Gll="gll",y.Ie1="ie1",y.Ie1Ix="ie1-ix",y.Ie1Tnx="ie1-tnx",y.Jp1="jp1",y.Jp1Ix="jp1-ix",y.Sg1="sg1",y.Sg1Ix="sg1-ix",y.Sg1Tnx="sg1-tnx",y.Us1="us1",y.Us1Ix="us1-ix",y.Us1Tnx="us1-tnx",y.Us2="us2",y.Us2Ix="us2-ix",y.Us2Tnx="us2-tnx"})(i||(e.Region=i={})),e.regionShortcodes={ASIAPAC_SINGAPORE:i.Sg1,ASIAPAC_SYDNEY:i.Au1,ASIAPAC_TOKYO:i.Jp1,EU_FRANKFURT:i.De1,EU_IRELAND:i.Ie1,SOUTH_AMERICA_SAO_PAULO:i.Br1,US_EAST_VIRGINIA:i.Us1,US_WEST_OREGON:i.Us2},e.regionToEdge=(t={},t[i.Au1]=r.Sydney,t[i.Br1]=r.SaoPaulo,t[i.Ie1]=r.Dublin,t[i.De1]=r.Frankfurt,t[i.Jp1]=r.Tokyo,t[i.Sg1]=r.Singapore,t[i.Us1]=r.Ashburn,t[i.Us2]=r.Umatilla,t[i.Gll]=r.Roaming,t[i.Us1Ix]=r.AshburnIx,t[i.Us2Ix]=r.SanJoseIx,t[i.Ie1Ix]=r.LondonIx,t[i.De1Ix]=r.FrankfurtIx,t[i.Sg1Ix]=r.SingaporeIx,t[i.Au1Ix]=r.SydneyIx,t[i.Jp1Ix]=r.TokyoIx,t[i.Us1Tnx]=r.AshburnIx,t[i.Us2Tnx]=r.AshburnIx,t[i.Ie1Tnx]=r.LondonIx,t[i.Sg1Tnx]=r.SingaporeIx,t),e.defaultEdge=r.Roaming;var o="eventgw.twilio.com";function s(y){return"voice-js.".concat(y,".twilio.com")}function c(y){return y?"eventgw.".concat(y,".twilio.com"):o}function _(y){return"wss://".concat(y,"/signal")}function C(y){if(y&&typeof y!="string"&&!Array.isArray(y))throw new n.InvalidArgumentError("If `edge` is provided, it must be of type `string` or an array of strings.");var b;if(y){var E=Array.isArray(y)?y:[y];b=E.map(function(h){return s(h)})}else b=[s(e.defaultEdge)];return b}function g(y){return e.regionShortcodes[y]||null}})(Fr)),Fr}var It={},Hn={},qn={},At={},Mo;function Pi(){if(Mo)return At;Mo=1,Object.defineProperty(At,"__esModule",{value:!0}),At.getPreferredCodecInfo=o,At.setCodecPreferences=_,At.setIceAggressiveNomination=s,At.setMaxAverageBitrate=c;var e=wt(),t={0:"PCMU",8:"PCMA"},n=111,r=51e4,i=6e3;function o(a){var u=/a=rtpmap:(\d+) (\S+)/m.exec(a)||[null,"",""],p=u[1],f=u[2],m=new RegExp("a=fmtp:".concat(p," (\\S+)"),"m"),d=m.exec(a)||[null,""],l=d[1];return{codecName:f,codecParams:l}}function s(a){return e.isChrome(window,window.navigator)?a.split(`
`).filter(function(u){return u.indexOf("a=ice-lite")===-1}).join(`
`):a}function c(a,u){if(typeof u!="number"||u<i||u>r)return a;var p=/a=rtpmap:(\d+) opus/m.exec(a),f=p&&p.length?p[1]:n,m=new RegExp("a=fmtp:".concat(f)),d=a.split(`
`).map(function(l){return m.test(l)?l+";maxaveragebitrate=".concat(u):l});return d.join(`
`)}function _(a,u){var p=C(a),f=a.split(`\r
m=`)[0];return[f].concat(p.map(function(m){if(!/^m=(audio|video)/.test(m))return m;var d=m.match(/^m=(audio|video)/)[1],l=g(m),S=y(l,u),I=b(S,m),w=l.get("pcma")||[],N=l.get("pcmu")||[],P=d==="audio"?new Set(w.concat(N)):new Set;return P.has(S[0])?I.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):I})).join(`\r
`)}function C(a,u,p){return a.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(function(f){return"m=".concat(f)}).filter(function(f){var m=new RegExp("m=".concat(".*"),"gm"),d=new RegExp("a=".concat(".*"),"gm");return m.test(f)&&d.test(f)})}function g(a){return Array.from(E(a)).reduce(function(u,p){var f=p[0],m=p[1],d=u.get(m)||[];return u.set(m,d.concat(f))},new Map)}function y(a,u){u=u.map(function(d){return d.toLowerCase()});var p=e.flatMap(u,function(d){return a.get(d)||[]}),f=e.difference(Array.from(a.keys()),u),m=e.flatMap(f,function(d){return a.get(d)});return p.concat(m)}function b(a,u){var p=u.split(`\r
`),f=p[0],m=p.slice(1);return f=f.replace(/([0-9]+\s?)+$/,a.join(" ")),[f].concat(m).join(`\r
`)}function E(a){return h(a).reduce(function(u,p){var f=new RegExp("a=rtpmap:".concat(p," ([^/]+)")),m=a.match(f),d=m?m[1].toLowerCase():t[p]?t[p].toLowerCase():"";return u.set(p,d)},new Map)}function h(a){var u=a.split(`\r
`)[0],p=u.match(/([0-9]+)/g);return p?p.slice(1).map(function(f){return parseInt(f,10)}):[]}return At}var Lo;function Sa(){if(Lo)return qn;Lo=1,Object.defineProperty(qn,"__esModule",{value:!0});var e=qe(),t=wt(),n=Pi();function r(c){if(this.log=new e.default("RTCPC"),typeof window>"u"){this.log.info("No RTCPeerConnection implementation available. The window object was not found.");return}c&&c.RTCPeerConnection?this.RTCPeerConnection=c.RTCPeerConnection:typeof window.RTCPeerConnection=="function"?this.RTCPeerConnection=window.RTCPeerConnection:typeof window.webkitRTCPeerConnection=="function"?this.RTCPeerConnection=webkitRTCPeerConnection:typeof window.mozRTCPeerConnection=="function"?(this.RTCPeerConnection=mozRTCPeerConnection,window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate):this.log.info("No RTCPeerConnection implementation available")}r.prototype.create=function(c){this.pc=new this.RTCPeerConnection(c)},r.prototype.createModernConstraints=function(c){if(typeof c>"u")return null;var _=Object.assign({},c);return typeof webkitRTCPeerConnection<"u"&&!t.isLegacyEdge()?(_.mandatory={},typeof c.audio<"u"&&(_.mandatory.OfferToReceiveAudio=c.audio),typeof c.video<"u"&&(_.mandatory.OfferToReceiveVideo=c.video)):(typeof c.audio<"u"&&(_.offerToReceiveAudio=c.audio),typeof c.video<"u"&&(_.offerToReceiveVideo=c.video)),delete _.audio,delete _.video,_},r.prototype.createOffer=function(c,_,C,g){var y=this;return _=this.createModernConstraints(_),o(this.pc.createOffer,this.pc)(_).then(function(b){if(!y.pc)return Promise.resolve();var E=(0,n.setMaxAverageBitrate)(b.sdp,c);return s(y.pc.setLocalDescription,y.pc)(new RTCSessionDescription({sdp:E,type:"offer"}))}).then(C,g)},r.prototype.createAnswer=function(c,_,C,g){var y=this;return _=this.createModernConstraints(_),o(this.pc.createAnswer,this.pc)(_).then(function(b){if(!y.pc)return Promise.resolve();var E=(0,n.setMaxAverageBitrate)(b.sdp,c);return s(y.pc.setLocalDescription,y.pc)(new RTCSessionDescription({sdp:E,type:"answer"}))}).then(C,g)},r.prototype.processSDP=function(c,_,C,g,y,b){var E=this;C=(0,n.setCodecPreferences)(C,_);var h=new RTCSessionDescription({sdp:C,type:"offer"});return s(this.pc.setRemoteDescription,this.pc)(h).then(function(){E.createAnswer(c,g,y,b)})},r.prototype.getSDP=function(){return this.pc.localDescription.sdp},r.prototype.processAnswer=function(c,_,C,g){return this.pc?(_=(0,n.setCodecPreferences)(_,c),s(this.pc.setRemoteDescription,this.pc)(new RTCSessionDescription({sdp:_,type:"answer"})).then(C,g)):Promise.resolve()},r.test=function(){if(typeof navigator=="object"){var c=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;if(t.isLegacyEdge(navigator))return!1;if(c&&typeof window.RTCPeerConnection=="function")return!0;if(c&&typeof window.webkitRTCPeerConnection=="function")return!0;if(c&&typeof window.mozRTCPeerConnection=="function"){try{var _=new window.mozRTCPeerConnection;if(typeof _.getLocalStreams!="function")return!1}catch{return!1}return!0}else if(typeof RTCIceGatherer<"u")return!0}return!1};function i(c,_,C,g){return function(){var y=Array.prototype.slice.call(arguments);return new Promise(function(b){var E=c.apply(_,y);if(!g){b(E);return}if(typeof E=="object"&&typeof E.then=="function")b(E);else throw new Error}).catch(function(){return new Promise(function(b,E){c.apply(_,C?[b,E].concat(y):y.concat([b,E]))})})}}function o(c,_){return i(c,_,!0,!0)}function s(c,_){return i(c,_,!1,!1)}return qn.default=r,qn}var jo;function Ll(){if(jo)return Hn;jo=1,Object.defineProperty(Hn,"__esModule",{value:!0});var e=we(),t=qe(),n=wt(),r=Sa(),i=Pi(),o=15e3,s="none",c="timeout",_="new",C=50;function g(a,u,p){if(!a||!u)throw new e.InvalidArgumentError("Audiohelper, and pstream are required arguments");if(!(this instanceof g))return new g(a,u,p);this._log=new t.default("PeerConnection");function f(){this._log.warn("Unexpected noop call in peerconnection")}this.onaudio=f,this.onopen=f,this.onerror=f,this.onclose=f,this.ondisconnected=f,this.onfailed=f,this.onconnected=f,this.onreconnected=f,this.onsignalingstatechange=f,this.ondtlstransportstatechange=f,this.onicegatheringfailure=f,this.onicegatheringstatechange=f,this.oniceconnectionstatechange=f,this.onpcconnectionstatechange=f,this.onicecandidate=f,this.onselectedcandidatepairchange=f,this.onvolume=f,this.version=null,this.pstream=u,this.stream=null,this.sinkIds=new Set(["default"]),this.outputs=new Map,this.status="connecting",this.callSid=null,this.isMuted=!1;var m=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);return this._isSinkSupported=!!m&&typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId,this._audioContext=m&&a._audioContext,this._audioHelper=a,this._hasIceCandidates=!1,this._hasIceGatheringFailures=!1,this._iceGatheringTimeoutId=null,this._masterAudio=null,this._masterAudioDeviceId=null,this._mediaStreamSource=null,this._dtmfSender=null,this._dtmfSenderUnsupported=!1,this._callEvents=[],this._nextTimeToPublish=Date.now(),this._onAnswerOrRinging=f,this._onHangup=f,this._remoteStream=null,this._shouldManageStream=!0,this._iceState=_,this._isUnifiedPlan=p.isUnifiedPlan,this.options=p=p||{},this.navigator=p.navigator||(typeof navigator<"u"?navigator:null),this.util=p.util||n,this.codecPreferences=p.codecPreferences,this}g.prototype.uri=function(){return this._uri},g.prototype.openDefaultDeviceWithConstraints=function(a){return this._audioHelper._openDefaultDeviceWithConstraints(a).then(this._setInputTracksFromStream.bind(this,!1))},g.prototype.setInputTracksFromStream=function(a){var u=this;return this._setInputTracksFromStream(!0,a).then(function(){u._shouldManageStream=!1})},g.prototype._createAnalyser=function(a,u){u=Object.assign({fftSize:32,smoothingTimeConstant:.3},u);var p=a.createAnalyser();for(var f in u)p[f]=u[f];return p},g.prototype._setVolumeHandler=function(a){this.onvolume=a},g.prototype._startPollingVolume=function(){if(!(!this._audioContext||!this.stream||!this._remoteStream)){var a=this._audioContext,u=this._inputAnalyser=this._createAnalyser(a),p=u.frequencyBinCount,f=new Uint8Array(p);this._inputAnalyser2=this._createAnalyser(a,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0});var m=this._outputAnalyser=this._createAnalyser(a),d=m.frequencyBinCount,l=new Uint8Array(d);this._outputAnalyser2=this._createAnalyser(a,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0}),this._updateInputStreamSource(this.stream),this._updateOutputStreamSource(this._remoteStream);var S=this;setTimeout(function I(){if(S._audioContext){if(S.status==="closed"){S._inputAnalyser.disconnect(),S._outputAnalyser.disconnect(),S._inputAnalyser2.disconnect(),S._outputAnalyser2.disconnect();return}}else return;S._inputAnalyser.getByteFrequencyData(f);var w=S.util.average(f);S._inputAnalyser2.getByteFrequencyData(f);var N=S.util.average(f);S._outputAnalyser.getByteFrequencyData(l);var P=S.util.average(l);S._outputAnalyser2.getByteFrequencyData(l);var A=S.util.average(l);S.onvolume(w/255,P/255,N,A),setTimeout(I,C)},C)}},g.prototype._stopStream=function(){this._shouldManageStream&&this._audioHelper._stopDefaultInputDeviceStream()},g.prototype._updateInputStreamSource=function(a){this._inputStreamSource&&this._inputStreamSource.disconnect();try{this._inputStreamSource=this._audioContext.createMediaStreamSource(a),this._inputStreamSource.connect(this._inputAnalyser),this._inputStreamSource.connect(this._inputAnalyser2)}catch(u){this._log.warn("Unable to update input MediaStreamSource",u),this._inputStreamSource=null}},g.prototype._updateOutputStreamSource=function(a){this._outputStreamSource&&this._outputStreamSource.disconnect();try{this._outputStreamSource=this._audioContext.createMediaStreamSource(a),this._outputStreamSource.connect(this._outputAnalyser),this._outputStreamSource.connect(this._outputAnalyser2)}catch(u){this._log.warn("Unable to update output MediaStreamSource",u),this._outputStreamSource=null}},g.prototype._setInputTracksFromStream=function(a,u){return this._isUnifiedPlan?this._setInputTracksForUnifiedPlan(a,u):this._setInputTracksForPlanB(a,u)},g.prototype._setInputTracksForPlanB=function(a,u){var p=this;if(!u)return Promise.reject(new e.InvalidArgumentError("Can not set input stream to null while in a call"));if(!u.getAudioTracks().length)return Promise.reject(new e.InvalidArgumentError("Supplied input stream has no audio tracks"));var f=this.stream;return f?(this._stopStream(),E(this.version.pc,f),f.getAudioTracks().forEach(f.removeTrack,f),u.getAudioTracks().forEach(f.addTrack,f),y(this.version.pc,u),this._updateInputStreamSource(this.stream)):this.stream=a?b(u):u,this.mute(this.isMuted),this.version?new Promise(function(m,d){p.version.createOffer(p.options.maxAverageBitrate,{audio:!0},function(){p.version.processAnswer(p.codecPreferences,p._answerSdp,function(){m(p.stream)},d)},d)}):Promise.resolve(this.stream)},g.prototype._setInputTracksForUnifiedPlan=function(a,u){var p=this;if(!u)return Promise.reject(new e.InvalidArgumentError("Can not set input stream to null while in a call"));if(!u.getAudioTracks().length)return Promise.reject(new e.InvalidArgumentError("Supplied input stream has no audio tracks"));var f=this.stream,m=function(){return p.mute(p.isMuted),Promise.resolve(p.stream)};if(!f)this.stream=a?b(u,this.options.MediaStream):u;else return this._shouldManageStream&&this._stopStream(),this._sender||(this._sender=this.version.pc.getSenders()[0]),this._sender.replaceTrack(u.getAudioTracks()[0]).then(function(){return p._updateInputStreamSource(u),p.stream=a?b(u,p.options.MediaStream):u,m()});return m()},g.prototype._onInputDevicesChanged=function(){if(this.stream){var a=this.stream.getAudioTracks().every(function(u){return u.readyState==="ended"});a&&this._shouldManageStream&&this.openDefaultDeviceWithConstraints({audio:!0})}},g.prototype._onIceGatheringFailure=function(a){this._hasIceGatheringFailures=!0,this.onicegatheringfailure(a)},g.prototype._onMediaConnectionStateChange=function(a){var u=this._iceState;if(!(u===a||a!=="connected"&&a!=="disconnected"&&a!=="failed")){this._iceState=a;var p;switch(a){case"connected":u==="disconnected"||u==="failed"?(p="ICE liveliness check succeeded. Connection with Twilio restored",this._log.info(p),this.onreconnected(p)):(p="Media connection established.",this._log.info(p),this.onconnected(p)),this._stopIceGatheringTimeout(),this._hasIceGatheringFailures=!1;break;case"disconnected":p="ICE liveliness check failed. May be having trouble connecting to Twilio",this._log.warn(p),this.ondisconnected(p);break;case"failed":p="Connection with Twilio was interrupted.",this._log.warn(p),this.onfailed(p);break}}},g.prototype._setSinkIds=function(a){return this._isSinkSupported?(this.sinkIds=new Set(a.forEach?a:[a]),this.version?this._updateAudioOutputs():Promise.resolve()):Promise.reject(new e.NotSupportedError("Audio output selection is not supported by this browser"))},g.prototype._startIceGatheringTimeout=function(){var u=this;this._stopIceGatheringTimeout(),this._iceGatheringTimeoutId=setTimeout(function(){u._onIceGatheringFailure(c)},o)},g.prototype._stopIceGatheringTimeout=function(){clearInterval(this._iceGatheringTimeoutId)},g.prototype._updateAudioOutputs=function(){var u=Array.from(this.sinkIds).filter(function(d){return!this.outputs.has(d)},this),p=Array.from(this.outputs.keys()).filter(function(d){return!this.sinkIds.has(d)},this),f=this,m=u.map(this._createAudioOutput,this);return Promise.all(m).then(function(){return Promise.all(p.map(f._removeAudioOutput,f))})},g.prototype._createAudio=function(u){var p=new Audio(u);return this.onaudio(p),p},g.prototype._createAudioOutput=function(u){var p=null;this._mediaStreamSource&&(p=this._audioContext.createMediaStreamDestination(),this._mediaStreamSource.connect(p));var f=this._createAudio();h(f,p&&p.stream?p.stream:this.pcStream);var m=this;return f.setSinkId(u).then(function(){return f.play()}).then(function(){m.outputs.set(u,{audio:f,dest:p})})},g.prototype._removeAudioOutputs=function(){return this._masterAudio&&typeof this._masterAudioDeviceId<"u"&&(this._disableOutput(this,this._masterAudioDeviceId),this.outputs.delete(this._masterAudioDeviceId),this._masterAudioDeviceId=null,this._masterAudio.paused||this._masterAudio.pause(),typeof this._masterAudio.srcObject<"u"?this._masterAudio.srcObject=null:this._masterAudio.src="",this._masterAudio=null),Array.from(this.outputs.keys()).map(this._removeAudioOutput,this)},g.prototype._disableOutput=function(u,p){var f=u.outputs.get(p);f&&(f.audio&&(f.audio.pause(),f.audio.src=""),f.dest&&f.dest.disconnect())},g.prototype._reassignMasterOutput=function(u,p){var f=u.outputs.get(p);u.outputs.delete(p);var m=this,d=Array.from(u.outputs.keys())[0],l=typeof d=="string"?d:"default";return f.audio.setSinkId(l).then(function(){m._disableOutput(u,l),u.outputs.set(l,f),u._masterAudioDeviceId=l}).catch(function(){u.outputs.set(p,f),m._log.info("Could not reassign master output. Attempted to roll back.")})},g.prototype._removeAudioOutput=function(u){return this._masterAudioDeviceId===u?this._reassignMasterOutput(this,u):(this._disableOutput(this,u),this.outputs.delete(u),Promise.resolve())},g.prototype._onAddTrack=function(u,p){var f=u._masterAudio=this._createAudio();h(f,p),f.play();var m=Array.from(u.outputs.keys())[0],d=typeof m=="string"?m:"default";u._masterAudioDeviceId=d,u.outputs.set(d,{audio:f});try{u._mediaStreamSource=u._audioContext.createMediaStreamSource(p)}catch(l){this._log.warn("Unable to create a MediaStreamSource from onAddTrack",l),this._mediaStreamSource=null}u.pcStream=p,u._updateAudioOutputs()},g.prototype._fallbackOnAddTrack=function(u,p){var f=document&&document.createElement("audio");f.autoplay=!0,h(f,p)||u._log.info("Error attaching stream to element."),u.outputs.set("default",{audio:f})},g.prototype._setEncodingParameters=function(a){if(!(!a||!this._sender||typeof this._sender.getParameters!="function"||typeof this._sender.setParameters!="function")){var u=this._sender.getParameters();!u.priority&&!(u.encodings&&u.encodings.length)||(u.priority="high",u.encodings&&u.encodings.length&&u.encodings.forEach(function(p){p.priority="high",p.networkPriority="high"}),this._sender.setParameters(u))}},g.prototype._setupPeerConnection=function(a){var u=this,p=this,f=new(this.options.rtcpcFactory||r.default)({RTCPeerConnection:this.options.RTCPeerConnection});f.create(a),y(f.pc,this.stream);var m=RTCRtpReceiver.getCapabilities("audio").codecs;this._log.debug("sorting codecs",m,this.codecPreferences);var d=n.sortByMimeTypes(m,this.codecPreferences),l=f.pc.getTransceivers()[0];this._log.debug("setting sorted codecs",d),l.setCodecPreferences(d);var S="ontrack"in f.pc?"ontrack":"onaddstream";return f.pc[S]=function(I){var w=p._remoteStream=I.stream||I.streams[0];typeof f.pc.getSenders=="function"&&(u._sender=f.pc.getSenders()[0]),p._isSinkSupported?p._onAddTrack(p,w):p._fallbackOnAddTrack(p,w),p._startPollingVolume()},f},g.prototype._maybeSetIceAggressiveNomination=function(a){return this.options.forceAggressiveIceNomination?(0,i.setIceAggressiveNomination)(a):a},g.prototype._setupChannel=function(){var a=this,u=this.version.pc;this.version.pc.onopen=function(){a.status="open",a.onopen()},this.version.pc.onstatechange=function(){a.version.pc&&a.version.pc.readyState==="stable"&&(a.status="open",a.onopen())},this.version.pc.onsignalingstatechange=function(){var p=u.signalingState;a._log.info('signalingState is "'.concat(p,'"')),a.version.pc&&a.version.pc.signalingState==="stable"&&(a.status="open",a.onopen()),a.onsignalingstatechange(u.signalingState)},u.onconnectionstatechange=function(p){var f=u.connectionState;if(!f&&p&&p.target){var m=p.target;f=m.connectionState||m.connectionState_,a._log.info("pc.connectionState not detected. Using target PC. State=".concat(f))}f?a._log.info('pc.connectionState is "'.concat(f,'"')):a._log.warn('onconnectionstatechange detected but state is "'.concat(f,'"')),a.onpcconnectionstatechange(f),a._onMediaConnectionStateChange(f)},u.onicecandidate=function(p){var f=p.candidate;f&&(a._hasIceCandidates=!0,a.onicecandidate(f),a._setupRTCIceTransportListener()),a._log.info("ICE Candidate: ".concat(JSON.stringify(f)))},u.onicegatheringstatechange=function(){var p=u.iceGatheringState;p==="gathering"?a._startIceGatheringTimeout():p==="complete"&&(a._stopIceGatheringTimeout(),a._hasIceCandidates||a._onIceGatheringFailure(s),a._hasIceCandidates&&a._hasIceGatheringFailures&&a._startIceGatheringTimeout()),a._log.info('pc.iceGatheringState is "'.concat(u.iceGatheringState,'"')),a.onicegatheringstatechange(p)},u.oniceconnectionstatechange=function(){a._log.info('pc.iceConnectionState is "'.concat(u.iceConnectionState,'"')),a.oniceconnectionstatechange(u.iceConnectionState),a._onMediaConnectionStateChange(u.iceConnectionState)}},g.prototype._initializeMediaStream=function(a){return this.status==="open"?!1:this.pstream.status==="disconnected"?(this.onerror({info:{code:31e3,message:"Cannot establish connection. Client is disconnected",twilioError:new e.SignalingErrors.ConnectionDisconnected}}),this.close(),!1):(this.version=this._setupPeerConnection(a),this._setupChannel(),!0)},g.prototype._removeReconnectionListeners=function(){this.pstream&&(this.pstream.removeListener("answer",this._onAnswerOrRinging),this.pstream.removeListener("hangup",this._onHangup))},g.prototype._setupRTCDtlsTransportListener=function(){var a=this,u=this.getRTCDtlsTransport();if(!(!u||u.onstatechange)){var p=function(){a._log.info('dtlsTransportState is "'.concat(u.state,'"')),a.ondtlstransportstatechange(u.state)};p(),u.onstatechange=p}},g.prototype._setupRTCIceTransportListener=function(){var a=this,u=this._getRTCIceTransport();!u||u.onselectedcandidatepairchange||(u.onselectedcandidatepairchange=function(){return a.onselectedcandidatepairchange(u.getSelectedCandidatePair())})},g.prototype.iceRestart=function(){var a=this;this._log.info("Attempting to restart ICE..."),this._hasIceCandidates=!1,this.version.createOffer(this.options.maxAverageBitrate,{iceRestart:!0}).then(function(){a._removeReconnectionListeners(),a._onAnswerOrRinging=function(u){if(a._removeReconnectionListeners(),!u.sdp||a.version.pc.signalingState!=="have-local-offer"){var p="Invalid state or param during ICE Restart:"+"hasSdp:".concat(!!u.sdp,", signalingState:").concat(a.version.pc.signalingState);a._log.warn(p);return}var f=a._maybeSetIceAggressiveNomination(u.sdp);a._answerSdp=f,a.status!=="closed"&&a.version.processAnswer(a.codecPreferences,f,null,function(m){var d=m&&m.message?m.message:m;a._log.error("Failed to process answer during ICE Restart. Error: ".concat(d))})},a._onHangup=function(){a._log.info("Received hangup during ICE Restart"),a._removeReconnectionListeners()},a.pstream.on("answer",a._onAnswerOrRinging),a.pstream.on("hangup",a._onHangup),a.pstream.reinvite(a.version.getSDP(),a.callSid)}).catch(function(u){var p=u&&u.message?u.message:u;a._log.error("Failed to createOffer during ICE Restart. Error: ".concat(p)),a.onfailed(p)})},g.prototype.makeOutgoingCall=function(a,u,p,f,m){var d=this;if(!this._initializeMediaStream(f))return;var l=this;this.callSid=p;function S(){l.options&&l._setEncodingParameters(l.options.dscp),m(l.version.pc)}function I(P){var A=P.message||P;l.onerror({info:{code:31e3,message:"Error processing answer: ".concat(A),twilioError:new e.MediaErrors.ClientRemoteDescFailed}})}this._onAnswerOrRinging=function(P){if(P.sdp){var A=d._maybeSetIceAggressiveNomination(P.sdp);l._answerSdp=A,l.status!=="closed"&&l.version.processAnswer(d.codecPreferences,A,S,I),l.pstream.removeListener("answer",l._onAnswerOrRinging),l.pstream.removeListener("ringing",l._onAnswerOrRinging)}},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("ringing",this._onAnswerOrRinging);function w(){l.status!=="closed"&&(u?l.pstream.reconnect(l.version.getSDP(),l.callSid,u):l.pstream.invite(l.version.getSDP(),l.callSid,a),l._setupRTCDtlsTransportListener())}function N(P){var A=P.message||P;l.onerror({info:{code:31e3,message:"Error creating the offer: ".concat(A),twilioError:new e.MediaErrors.ClientLocalDescFailed}})}this.version.createOffer(this.options.maxAverageBitrate,{audio:!0},w,N)},g.prototype.answerIncomingCall=function(a,u,p,f){if(!this._initializeMediaStream(p))return;u=this._maybeSetIceAggressiveNomination(u),this._answerSdp=u.replace(/^a=setup:actpass$/gm,"a=setup:passive"),this.callSid=a;var m=this;function d(){m.status!=="closed"&&(m.pstream.answer(m.version.getSDP(),a),m.options&&m._setEncodingParameters(m.options.dscp),f(m.version.pc),m._setupRTCDtlsTransportListener())}function l(S){var I=S.message||S;m.onerror({info:{code:31e3,message:"Error creating the answer: ".concat(I),twilioError:new e.MediaErrors.ClientRemoteDescFailed}})}this.version.processSDP(this.options.maxAverageBitrate,this.codecPreferences,u,{audio:!0},d,l)},g.prototype.close=function(){this.version&&this.version.pc&&(this.version.pc.signalingState!=="closed"&&this.version.pc.close(),this.version.pc=null),this.stream&&(this.mute(!1),this._stopStream()),this.stream=null,this._removeReconnectionListeners(),this._stopIceGatheringTimeout(),Promise.all(this._removeAudioOutputs()).catch(function(){}),this._mediaStreamSource&&this._mediaStreamSource.disconnect(),this._inputAnalyser&&this._inputAnalyser.disconnect(),this._outputAnalyser&&this._outputAnalyser.disconnect(),this._inputAnalyser2&&this._inputAnalyser2.disconnect(),this._outputAnalyser2&&this._outputAnalyser2.disconnect(),this.status="closed",this.onclose()},g.prototype.reject=function(a){this.callSid=a},g.prototype.ignore=function(a){this.callSid=a},g.prototype.mute=function(a){if(this.isMuted=a,!!this.stream)if(this._sender&&this._sender.track)this._sender.track.enabled=!a;else{var u=typeof this.stream.getAudioTracks=="function"?this.stream.getAudioTracks():this.stream.audioTracks;u.forEach(function(p){p.enabled=!a})}},g.prototype.getOrCreateDTMFSender=function(){if(this._dtmfSender||this._dtmfSenderUnsupported)return this._dtmfSender||null;var u=this,p=this.version.pc;if(!p)return this._log.warn("No RTCPeerConnection available to call createDTMFSender on"),null;if(typeof p.getSenders=="function"&&(typeof RTCDTMFSender=="function"||typeof RTCDtmfSender=="function")){var f=p.getSenders().find(function(d){return d.dtmf});if(f)return this._log.info("Using RTCRtpSender#dtmf"),this._dtmfSender=f.dtmf,this._dtmfSender}if(typeof p.createDTMFSender=="function"&&typeof p.getLocalStreams=="function"){var m=p.getLocalStreams().map(function(d){var l=u._getAudioTracks(d);return l&&l[0]})[0];return m?(this._log.info("Creating RTCDTMFSender"),this._dtmfSender=p.createDTMFSender(m),this._dtmfSender):(this._log.warn("No local audio MediaStreamTrack available on the RTCPeerConnection to pass to createDTMFSender"),null)}return this._log.info("RTCPeerConnection does not support RTCDTMFSender"),this._dtmfSenderUnsupported=!0,null},g.prototype.getRTCDtlsTransport=function(){var u=this.version&&this.version.pc&&typeof this.version.pc.getSenders=="function"&&this.version.pc.getSenders()[0];return u&&u.transport||null},g.prototype._canStopMediaStreamTrack=function(){return typeof MediaStreamTrack.prototype.stop=="function"},g.prototype._getAudioTracks=function(a){return typeof a.getAudioTracks=="function"?a.getAudioTracks():a.audioTracks},g.prototype._getRTCIceTransport=function(){var u=this.getRTCDtlsTransport();return u&&u.iceTransport||null},g.protocol=(function(){return r.default.test()?new r.default:null})();function y(a,u){typeof a.addTrack=="function"?u.getAudioTracks().forEach(function(p){a.addTrack(p,u)}):a.addStream(u)}function b(a,u){var p;return u?p=new u:typeof MediaStream<"u"?p=new MediaStream:p=new webkitMediaStream,a.getAudioTracks().forEach(p.addTrack,p),p}function E(a,u){typeof a.removeTrack=="function"?a.getSenders().forEach(function(p){a.removeTrack(p)}):a.removeStream(u)}function h(a,u){if(typeof a.srcObject<"u")a.srcObject=u;else if(typeof a.mozSrcObject<"u")a.mozSrcObject=u;else if(typeof a.src<"u"){var p=a.options.window||window;a.src=(p.URL||p.webkitURL).createObjectURL(u)}else return!1;return!0}return g.enabled=r.default.test(),Hn.default=g,Hn}var No;function wa(){if(No)return It;No=1,Object.defineProperty(It,"__esModule",{value:!0}),It.PeerConnection=void 0,It.enabled=n,It.getMediaEngine=r;var e=Ll();It.PeerConnection=e.default;var t=Sa();function n(){return t.default.test()}function r(){return typeof RTCIceGatherer<"u"?"ORTC":"WebRTC"}return It}var Vn={},Uo;function jl(){if(Uo)return Vn;Uo=1,Object.defineProperty(Vn,"__esModule",{value:!0});var e=we(),t=wt();function n(r,i){return i=i||{},i.util=i.util||t,i.navigator=i.navigator||(typeof navigator<"u"?navigator:null),new Promise(function(o,s){if(!i.navigator)throw new e.NotSupportedError("getUserMedia is not supported");switch("function"){case typeof(i.navigator.mediaDevices&&i.navigator.mediaDevices.getUserMedia):return o(i.navigator.mediaDevices.getUserMedia(r));case typeof i.navigator.webkitGetUserMedia:return i.navigator.webkitGetUserMedia(r,o,s);case typeof i.navigator.mozGetUserMedia:return i.navigator.mozGetUserMedia(r,o,s);case typeof i.navigator.getUserMedia:return i.navigator.getUserMedia(r,o,s);default:throw new e.NotSupportedError("getUserMedia is not supported")}}).catch(function(o){throw i.util.isFirefox()&&o.name==="NotReadableError"?new e.NotSupportedError(`Firefox does not currently support opening multiple audio input trackssimultaneously, even across different tabs.
Related Bugzilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324`):o})}return Vn.default=n,Vn}var Wn={},Fo;function Ca(){if(Fo)return Wn;Fo=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.generateVoiceEventSid=n;var e=we();function t(){if(typeof window!="object")throw new e.NotSupportedError("This platform is not supported.");var r=window.crypto;if(typeof r!="object")throw new e.NotSupportedError("The `crypto` module is not available on this platform.");if(typeof r.getRandomValues!="function")throw new e.NotSupportedError("The function `crypto.getRandomValues` is not available on this platform.");if(typeof window.Uint8Array!="function")throw new e.NotSupportedError("The `Uint8Array` module is not available on this platform.");return r.getRandomValues(new window.Uint8Array(16)).reduce(function(i,o){return"".concat(i).concat(o.toString(16).padStart(2,"0"))},"")}function n(){return"KX".concat(t())}return Wn}var Gn={},at={},$n={},Bo;function Nl(){if(Bo)return $n;Bo=1,Object.defineProperty($n,"__esModule",{value:!0});var e=(function(){function t(){var n=this;this._promise=new Promise(function(r,i){n._resolve=r,n._reject=i})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.reject=function(n){this._reject(n)},t.prototype.resolve=function(n){this._resolve(n)},t})();return $n.default=e,$n}var Ho;function Ul(){if(Ho)return at;Ho=1;var e=at&&at.__awaiter||function(i,o,s,c){function _(C){return C instanceof s?C:new s(function(g){g(C)})}return new(s||(s=Promise))(function(C,g){function y(h){try{E(c.next(h))}catch(a){g(a)}}function b(h){try{E(c.throw(h))}catch(a){g(a)}}function E(h){h.done?C(h.value):_(h.value).then(y,b)}E((c=c.apply(i,o||[])).next())})},t=at&&at.__generator||function(i,o){var s={label:0,sent:function(){if(C[0]&1)throw C[1];return C[1]},trys:[],ops:[]},c,_,C,g=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return g.next=y(0),g.throw=y(1),g.return=y(2),typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(E){return function(h){return b([E,h])}}function b(E){if(c)throw new TypeError("Generator is already executing.");for(;g&&(g=0,E[0]&&(s=0)),s;)try{if(c=1,_&&(C=E[0]&2?_.return:E[0]?_.throw||((C=_.return)&&C.call(_),0):_.next)&&!(C=C.call(_,E[1])).done)return C;switch(_=0,C&&(E=[E[0]&2,C.value]),E[0]){case 0:case 1:C=E;break;case 4:return s.label++,{value:E[1],done:!1};case 5:s.label++,_=E[1],E=[0];continue;case 7:E=s.ops.pop(),s.trys.pop();continue;default:if(C=s.trys,!(C=C.length>0&&C[C.length-1])&&(E[0]===6||E[0]===2)){s=0;continue}if(E[0]===3&&(!C||E[1]>C[0]&&E[1]<C[3])){s.label=E[1];break}if(E[0]===6&&s.label<C[1]){s.label=C[1],C=E;break}if(C&&s.label<C[2]){s.label=C[2],s.ops.push(E);break}C[2]&&s.ops.pop(),s.trys.pop();continue}E=o.call(i,s)}catch(h){E=[6,h],_=0}finally{c=C=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}};Object.defineProperty(at,"__esModule",{value:!0}),at.AsyncQueue=void 0;var n=Nl(),r=(function(){function i(){this._operations=[]}return i.prototype.enqueue=function(o){var s=!!this._operations.length,c=new n.default;return this._operations.push({deferred:c,callback:o}),s||this._processQueue(),c.promise},i.prototype._processQueue=function(){return e(this,void 0,void 0,function(){var o,s,c,_,C,g,y;return t(this,function(b){switch(b.label){case 0:if(!this._operations.length)return[3,5];o=this._operations[0],s=o.deferred,c=o.callback,_=void 0,C=void 0,g=void 0,b.label=1;case 1:return b.trys.push([1,3,,4]),[4,c()];case 2:return _=b.sent(),g=!0,[3,4];case 3:return y=b.sent(),C=y,[3,4];case 4:return this._operations.shift(),g?s.resolve(_):s.reject(C),[3,0];case 5:return[2]}})})},i})();return at.AsyncQueue=r,at}var Ye={},zn={},qo;function Fl(){if(qo)return zn;qo=1,Object.defineProperty(zn,"__esModule",{value:!0});var e=(function(){function t(){var n=this;this.promise=new Promise(function(r,i){n._resolve=r,n._reject=i})}return Object.defineProperty(t.prototype,"reject",{get:function(){return this._reject},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolve",{get:function(){return this._resolve},enumerable:!1,configurable:!0}),t})();return zn.default=e,zn}var qt={},Vo;function Bl(){if(Vo)return qt;Vo=1;var e=qt&&qt.__spreadArray||function(r,i,o){if(o||arguments.length===2)for(var s=0,c=i.length,_;s<c;s++)(_||!(s in i))&&(_||(_=Array.prototype.slice.call(i,0,s)),_[s]=i[s]);return r.concat(_||Array.prototype.slice.call(i))};Object.defineProperty(qt,"__esModule",{value:!0});var t=We(),n=(function(){function r(){this._eventEmitter=new t.EventEmitter}return r.prototype.addEventListener=function(i,o){return this._eventEmitter.addListener(i,o)},r.prototype.dispatchEvent=function(i){for(var o,s=[],c=1;c<arguments.length;c++)s[c-1]=arguments[c];return(o=this._eventEmitter).emit.apply(o,e([i],s,!1))},r.prototype.removeEventListener=function(i,o){return this._eventEmitter.removeListener(i,o)},r})();return qt.default=n,qt}var Wo;function Hl(){if(Wo)return Ye;Wo=1;var e=Ye&&Ye.__extends||(function(){var c=function(_,C){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(g[b]=y[b])},c(_,C)};return function(_,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");c(_,C);function g(){this.constructor=_}_.prototype=C===null?Object.create(C):(g.prototype=C.prototype,new g)}})(),t=Ye&&Ye.__awaiter||function(c,_,C,g){function y(b){return b instanceof C?b:new C(function(E){E(b)})}return new(C||(C=Promise))(function(b,E){function h(p){try{u(g.next(p))}catch(f){E(f)}}function a(p){try{u(g.throw(p))}catch(f){E(f)}}function u(p){p.done?b(p.value):y(p.value).then(h,a)}u((g=g.apply(c,_||[])).next())})},n=Ye&&Ye.__generator||function(c,_){var C={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},g,y,b,E=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return E.next=h(0),E.throw=h(1),E.return=h(2),typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function h(u){return function(p){return a([u,p])}}function a(u){if(g)throw new TypeError("Generator is already executing.");for(;E&&(E=0,u[0]&&(C=0)),C;)try{if(g=1,y&&(b=u[0]&2?y.return:u[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,u[1])).done)return b;switch(y=0,b&&(u=[u[0]&2,b.value]),u[0]){case 0:case 1:b=u;break;case 4:return C.label++,{value:u[1],done:!1};case 5:C.label++,y=u[1],u=[0];continue;case 7:u=C.ops.pop(),C.trys.pop();continue;default:if(b=C.trys,!(b=b.length>0&&b[b.length-1])&&(u[0]===6||u[0]===2)){C=0;continue}if(u[0]===3&&(!b||u[1]>b[0]&&u[1]<b[3])){C.label=u[1];break}if(u[0]===6&&C.label<b[1]){C.label=b[1],b=u;break}if(b&&C.label<b[2]){C.label=b[2],C.ops.push(u);break}b[2]&&C.ops.pop(),C.trys.pop();continue}u=_.call(c,C)}catch(p){u=[6,p],y=0}finally{g=b=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ye,"__esModule",{value:!0});var r=Fl(),i=Bl(),o=(function(c){e(_,c);function _(C,g,y){g===void 0&&(g={}),y===void 0&&(y={});var b=c.call(this)||this;return b._audioNode=null,b._loop=!1,b._pendingPlayDeferreds=[],b._sinkId="default",b._src="",typeof g!="string"&&(y=g),b._audioContext=C,b._audioElement=new(y.AudioFactory||Audio),b._bufferPromise=b._createPlayDeferred().promise,b._destination=b._audioContext.destination,b._gainNode=b._audioContext.createGain(),b._gainNode.connect(b._destination),b._XMLHttpRequest=y.XMLHttpRequestFactory||XMLHttpRequest,b.addEventListener("canplaythrough",function(){b._resolvePlayDeferreds()}),typeof g=="string"&&(b.src=g),b}return Object.defineProperty(_.prototype,"destination",{get:function(){return this._destination},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"loop",{get:function(){return this._loop},set:function(C){var g=this;function y(){g._audioNode.removeEventListener("ended",y),g.pause()}!C&&this.loop&&!this.paused&&this._audioNode.addEventListener("ended",y),this._loop=C},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"muted",{get:function(){return this._gainNode.gain.value===0},set:function(C){this._gainNode.gain.value=C?0:1},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"paused",{get:function(){return this._audioNode===null},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"src",{get:function(){return this._src},set:function(C){this._load(C)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"srcObject",{get:function(){return this._audioElement.srcObject},set:function(C){this._audioElement.srcObject=C},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"sinkId",{get:function(){return this._sinkId},enumerable:!1,configurable:!0}),_.prototype.load=function(){this._load(this._src)},_.prototype.pause=function(){this.paused||(this._audioElement.pause(),this._audioNode.stop(),this._audioNode.disconnect(this._gainNode),this._audioNode=null,this._rejectPlayDeferreds(new Error("The play() request was interrupted by a call to pause().")))},_.prototype.play=function(){return t(this,void 0,void 0,function(){var C,g=this;return n(this,function(y){switch(y.label){case 0:return this.paused?[3,2]:[4,this._bufferPromise];case 1:if(y.sent(),!this.paused)return[2];throw new Error("The play() request was interrupted by a call to pause().");case 2:return this._audioNode=this._audioContext.createBufferSource(),this._audioNode.loop=this.loop,this._audioNode.addEventListener("ended",function(){g._audioNode&&g._audioNode.loop||g.dispatchEvent("ended")}),[4,this._bufferPromise];case 3:if(C=y.sent(),this.paused)throw new Error("The play() request was interrupted by a call to pause().");return this._audioNode.buffer=C,this._audioNode.connect(this._gainNode),this._audioNode.start(),this._audioElement.srcObject?[2,this._audioElement.play()]:[2]}})})},_.prototype.setSinkId=function(C){return t(this,void 0,void 0,function(){return n(this,function(g){switch(g.label){case 0:if(typeof this._audioElement.setSinkId!="function")throw new Error("This browser does not support setSinkId.");return C===this.sinkId?[2]:C==="default"?(this.paused||this._gainNode.disconnect(this._destination),this._audioElement.srcObject=null,this._destination=this._audioContext.destination,this._gainNode.connect(this._destination),this._sinkId=C,[2]):[4,this._audioElement.setSinkId(C)];case 1:return g.sent(),this._audioElement.srcObject?[2]:(this._gainNode.disconnect(this._audioContext.destination),this._destination=this._audioContext.createMediaStreamDestination(),this._audioElement.srcObject=this._destination.stream,this._sinkId=C,this._gainNode.connect(this._destination),[2])}})})},_.prototype._createPlayDeferred=function(){var C=new r.default;return this._pendingPlayDeferreds.push(C),C},_.prototype._load=function(C){var g=this;this._src&&this._src!==C&&this.pause(),this._src=C,this._bufferPromise=new Promise(function(y,b){return t(g,void 0,void 0,function(){var E;return n(this,function(h){switch(h.label){case 0:return C?[4,s(this._audioContext,this._XMLHttpRequest,C)]:[2,this._createPlayDeferred().promise];case 1:return E=h.sent(),this.dispatchEvent("canplaythrough"),y(E),[2]}})})})},_.prototype._rejectPlayDeferreds=function(C){var g=this._pendingPlayDeferreds;g.splice(0,g.length).forEach(function(y){var b=y.reject;return b(C)})},_.prototype._resolvePlayDeferreds=function(C){var g=this._pendingPlayDeferreds;g.splice(0,g.length).forEach(function(y){var b=y.resolve;return b(C)})},_})(i.default);function s(c,_,C){return t(this,void 0,void 0,function(){var g,y;return n(this,function(b){switch(b.label){case 0:return g=new _,g.open("GET",C,!0),g.responseType="arraybuffer",[4,new Promise(function(E){g.addEventListener("load",E),g.send()})];case 1:y=b.sent();try{return[2,c.decodeAudioData(y.target.response)]}catch{return[2,new Promise(function(h){c.decodeAudioData(y.target.response,h)})]}return[2]}})})}return Ye.default=o,Ye}var Go;function ql(){if(Go)return Gn;Go=1,Object.defineProperty(Gn,"__esModule",{value:!0});var e=Ul(),t=Hl(),n=we();function r(o,s,c){if(!(this instanceof r))return new r(o,s,c);if(!o||!s)throw new n.InvalidArgumentError("name and url are required arguments");c=Object.assign({AudioFactory:typeof Audio<"u"?Audio:null,maxDuration:0,shouldLoop:!1},c),c.AudioPlayer=c.audioContext?t.default.bind(t.default,c.audioContext):c.AudioFactory,Object.defineProperties(this,{_Audio:{value:c.AudioPlayer},_activeEls:{value:new Map},_isSinkSupported:{value:c.AudioFactory!==null&&typeof c.AudioFactory.prototype.setSinkId=="function"},_maxDuration:{value:c.maxDuration},_maxDurationTimeout:{value:null,writable:!0},_operations:{value:new e.AsyncQueue},_playPromise:{value:null,writable:!0},_shouldLoop:{value:c.shouldLoop},_sinkIds:{value:["default"]},isPlaying:{enumerable:!0,get:function(){return!!this._playPromise}},name:{enumerable:!0,value:o},url:{enumerable:!0,value:s}}),this._Audio&&this._play(!0,!1)}function i(o){o&&(o.pause(),o.src="",o.srcObject=null,o.load())}return r.prototype._playAudioElement=function(s,c,_){var C=this,g=this._activeEls.get(s);if(!g)throw new n.InvalidArgumentError('sinkId: "'.concat(s,`" doesn't have an audio element`));return g.muted=!!c,g.loop=!!_,g.play().then(function(){return g}).catch(function(y){throw i(g),C._activeEls.delete(s),y})},r.prototype._play=function(s,c){this.isPlaying&&this._stop(),this._maxDuration>0&&(this._maxDurationTimeout=setTimeout(this._stop.bind(this),this._maxDuration)),c=typeof c=="boolean"?c:this._shouldLoop;var _=this,C=this._playPromise=Promise.all(this._sinkIds.map(function(y){if(!_._Audio)return Promise.resolve();var b=_._activeEls.get(y);return b?_._playAudioElement(y,s,c):(b=new _._Audio(_.url),typeof b.setAttribute=="function"&&b.setAttribute("crossorigin","anonymous"),new Promise(function(E){b.addEventListener("canplaythrough",E)}).then(function(){return(_._isSinkSupported?b.setSinkId(y):Promise.resolve()).then(function(){return _._activeEls.set(y,b),_._playPromise?_._playAudioElement(y,s,c):Promise.resolve()})}))}));return C},r.prototype._stop=function(){var s=this;this._activeEls.forEach(function(c,_){s._sinkIds.includes(_)?(c.pause(),c.currentTime=0):(i(c),s._activeEls.delete(_))}),clearTimeout(this._maxDurationTimeout),this._playPromise=null,this._maxDurationTimeout=null},r.prototype.setSinkIds=function(s){this._isSinkSupported&&(s=s.forEach?s:[s],[].splice.apply(this._sinkIds,[0,this._sinkIds.length].concat(s)))},r.prototype.stop=function(){var s=this;this._operations.enqueue(function(){return s._stop(),Promise.resolve()})},r.prototype.play=function(){var s=this;return this._operations.enqueue(function(){return s._play()})},Gn.default=r,Gn}var $o;function yr(){if($o)return Be;$o=1;var e=Be&&Be.__extends||(function(){var A=function(T,x){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,F){v.__proto__=F}||function(v,F){for(var R in F)Object.prototype.hasOwnProperty.call(F,R)&&(v[R]=F[R])},A(T,x)};return function(T,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");A(T,x);function v(){this.constructor=T}T.prototype=x===null?Object.create(x):(v.prototype=x.prototype,new v)}})(),t=Be&&Be.__assign||function(){return t=Object.assign||function(A){for(var T,x=1,v=arguments.length;x<v;x++){T=arguments[x];for(var F in T)Object.prototype.hasOwnProperty.call(T,F)&&(A[F]=T[F])}return A},t.apply(this,arguments)},n=Be&&Be.__awaiter||function(A,T,x,v){function F(R){return R instanceof x?R:new x(function(q){q(R)})}return new(x||(x=Promise))(function(R,q){function k(L){try{M(v.next(L))}catch(K){q(K)}}function H(L){try{M(v.throw(L))}catch(K){q(K)}}function M(L){L.done?R(L.value):F(L.value).then(k,H)}M((v=v.apply(A,T||[])).next())})},r=Be&&Be.__generator||function(A,T){var x={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},v,F,R,q=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return q.next=k(0),q.throw=k(1),q.return=k(2),typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function k(M){return function(L){return H([M,L])}}function H(M){if(v)throw new TypeError("Generator is already executing.");for(;q&&(q=0,M[0]&&(x=0)),x;)try{if(v=1,F&&(R=M[0]&2?F.return:M[0]?F.throw||((R=F.return)&&R.call(F),0):F.next)&&!(R=R.call(F,M[1])).done)return R;switch(F=0,R&&(M=[M[0]&2,R.value]),M[0]){case 0:case 1:R=M;break;case 4:return x.label++,{value:M[1],done:!1};case 5:x.label++,F=M[1],M=[0];continue;case 7:M=x.ops.pop(),x.trys.pop();continue;default:if(R=x.trys,!(R=R.length>0&&R[R.length-1])&&(M[0]===6||M[0]===2)){x=0;continue}if(M[0]===3&&(!R||M[1]>R[0]&&M[1]<R[3])){x.label=M[1];break}if(M[0]===6&&x.label<R[1]){x.label=R[1],R=M;break}if(R&&x.label<R[2]){x.label=R[2],x.ops.push(M);break}R[2]&&x.ops.pop(),x.trys.pop();continue}M=T.call(A,x)}catch(L){M=[6,L],F=0}finally{v=R=0}if(M[0]&5)throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}};Object.defineProperty(Be,"__esModule",{value:!0});var i=We(),o=va(),s=Pl(),c=Il(),_=Ii(),C=Zt(),g=Al(),y=we(),b=xl(),E=qe(),h=ba(),a=Dl(),u=Ml(),p=wa(),f=jl(),m=Ca(),d=ql(),l=wt(),S=3e4,I=2e3,w="twilio-js-sdk",N='Parameter "token" must be of type "string".',P=(function(A){e(T,A);function T(x,v){var F;v===void 0&&(v={});var R=A.call(this)||this;if(R._activeCall=null,R._audio=null,R._audioProcessorEventObserver=null,R._callInputStream=null,R._calls=[],R._callSinkIds=["default"],R._chunderURIs=[],R._defaultOptions={allowIncomingWhileBusy:!1,closeProtection:!1,codecPreferences:[_.default.Codec.PCMU,_.default.Codec.Opus],dscp:!0,enableImprovedSignalingErrorPrecision:!1,forceAggressiveIceNomination:!1,logLevel:o.levels.ERROR,maxCallSignalingTimeoutMs:0,preflight:!1,sounds:{},tokenRefreshMs:1e4,voiceEventSidGenerator:m.generateVoiceEventSid},R._edge=null,R._home=null,R._identity=null,R._log=new E.default("Device"),R._makeCallPromise=null,R._options={},R._preferredURI=null,R._publisher=null,R._region=null,R._regTimer=null,R._shouldReRegister=!1,R._soundcache=new Map,R._state=T.State.Unregistered,R._stateEventMapping=(F={},F[T.State.Destroyed]=T.EventName.Destroyed,F[T.State.Unregistered]=T.EventName.Unregistered,F[T.State.Registering]=T.EventName.Registering,F[T.State.Registered]=T.EventName.Registered,F),R._stream=null,R._streamConnectedPromise=null,R._tokenWillExpireTimeout=null,R._createDefaultPayload=function(M){var L={aggressive_nomination:R._options.forceAggressiveIceNomination,browser_extension:R._isBrowserExtension,dscp:!!R._options.dscp,ice_restart_enabled:!0,platform:p.getMediaEngine(),sdk_version:C.RELEASE_VERSION};function K(te,ie){ie&&(L[te]=ie)}if(M){var B=M.parameters.CallSid;K("call_sid",/^TJ/.test(B)?void 0:B),K("temp_call_sid",M.outboundConnectionId),K("audio_codec",M.codec),L.direction=M.direction}return K("gateway",R._stream&&R._stream.gateway),K("region",R._stream&&R._stream.region),L},R._onSignalingClose=function(){R._stream=null,R._streamConnectedPromise=null},R._onSignalingConnected=function(M){var L,K=(0,u.getRegionShortcode)(M.region);if(R._edge=M.edge||u.regionToEdge[K]||M.region,R._region=K||M.region,R._home=M.home,(L=R._publisher)===null||L===void 0||L.setHost((0,u.createEventGatewayURI)(M.home)),M.token&&(R._identity=M.token.identity,typeof M.token.ttl=="number"&&typeof R._options.tokenRefreshMs=="number")){var B=M.token.ttl*1e3,te=Math.max(0,B-R._options.tokenRefreshMs);R._tokenWillExpireTimeout=setTimeout(function(){R._log.debug("#tokenWillExpire"),R.emit("tokenWillExpire",R),R._tokenWillExpireTimeout&&(clearTimeout(R._tokenWillExpireTimeout),R._tokenWillExpireTimeout=null)},te)}var ie=R._getChunderws()||(0,u.getChunderURIs)(R._edge);if(ie.length>0){var se=ie[0];R._preferredURI=(0,u.createSignalingEndpointURL)(se)}else R._log.warn("Could not parse a preferred URI from the stream#connected event.");R._shouldReRegister&&R.register()},R._onSignalingError=function(M){if(typeof M!="object"){R._log.warn("Invalid signaling error payload",M);return}var L=M.error,K=M.callsid,B=M.voiceeventsid;if(typeof L!="object"||B){R._log.warn("Ignoring signaling error payload",{originalError:L,voiceeventsid:B});return}var te=typeof K=="string"&&R._findCall(K)||void 0,ie=L.code,se=L.message,ce=L.twilioError;if(typeof ie=="number")if(ie===31201)ce=new y.AuthorizationErrors.AuthenticationFailed(L);else if(ie===31204)ce=new y.AuthorizationErrors.AccessTokenInvalid(L);else if(ie===31205)R._stopRegistrationTimer(),ce=new y.AuthorizationErrors.AccessTokenExpired(L);else{var _e=(0,y.getPreciseSignalingErrorByCode)(!!R._options.enableImprovedSignalingErrorPrecision,ie);typeof _e<"u"&&(ce=new _e(L))}ce||(R._log.error("Unknown signaling error: ",L),ce=new y.GeneralErrors.UnknownError(se,L)),R._log.error("Received error: ",ce),R._log.debug("#error",L),R.emit(T.EventName.Error,ce,te)},R._onSignalingInvite=function(M){return n(R,void 0,void 0,function(){var L,K,B,te,ie,se=this,ce;return r(this,function(_e){switch(_e.label){case 0:if(L=!!this._activeCall,L&&!this._options.allowIncomingWhileBusy)return this._log.info("Device busy; ignoring incoming invite"),[2];if(!M.callsid||!M.sdp)return this._log.debug("#error",M),this.emit(T.EventName.Error,new y.ClientErrors.BadRequest("Malformed invite from gateway")),[2];K=M.parameters||{},K.CallSid=K.CallSid||M.callsid,B=Object.assign({},(0,l.queryToJson)(K.Params)),this._makeCallPromise=this._makeCall(B,{callParameters:K,enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,offerSdp:M.sdp,reconnectToken:M.reconnect,voiceEventSidGenerator:this._options.voiceEventSidGenerator}),_e.label=1;case 1:return _e.trys.push([1,,3,4]),[4,this._makeCallPromise];case 2:return te=_e.sent(),[3,4];case 3:return this._makeCallPromise=null,[7];case 4:return this._calls.push(te),te.once("accept",function(){se._soundcache.get(T.SoundName.Incoming).stop(),se._publishNetworkChange()}),ie=!((ce=this._audio)===null||ce===void 0)&&ce.incoming()&&!L?function(){return se._soundcache.get(T.SoundName.Incoming).play()}:function(){return Promise.resolve()},this._showIncomingCall(te,ie),[2]}})})},R._onSignalingOffline=function(){R._log.info("Stream is offline"),R._edge=null,R._region=null,R._shouldReRegister=R.state!==T.State.Unregistered,R._setState(T.State.Unregistered)},R._onSignalingReady=function(){R._log.info("Stream is ready"),R._setState(T.State.Registered)},R._publishNetworkChange=function(){R._activeCall&&R._networkInformation&&R._publisher.info("network-information","network-change",{connection_type:R._networkInformation.type,downlink:R._networkInformation.downlink,downlinkMax:R._networkInformation.downlinkMax,effective_type:R._networkInformation.effectiveType,rtt:R._networkInformation.rtt},R._activeCall)},R._updateInputStream=function(M){var L=R._activeCall;return L&&!M?Promise.reject(new y.InvalidStateError("Cannot unset input device while a call is in progress.")):(R._callInputStream=M,L?L._setInputTracksFromStream(M):Promise.resolve())},R._updateSinkIds=function(M,L){var K=M==="ringtone"?R._updateRingtoneSinkIds(L):R._updateSpeakerSinkIds(L);return K.then(function(){R._publisher.info("audio","".concat(M,"-devices-set"),{audio_device_ids:L},R._activeCall)},function(B){throw R._publisher.error("audio","".concat(M,"-devices-set-failed"),{audio_device_ids:L,message:B.message},R._activeCall),B})},R._setupLoglevel(v.logLevel),R._logOptions("constructor",v),R.updateToken(x),(0,l.isLegacyEdge)())throw new y.NotSupportedError("Microsoft Edge Legacy (https://support.microsoft.com/en-us/help/4533505/what-is-microsoft-edge-legacy) is deprecated and will not be able to connect to Twilio to make or receive calls after September 1st, 2020. Please see this documentation for a list of supported browsers https://www.twilio.com/docs/voice/client/javascript#supported-browsers");if(!T.isSupported&&v.ignoreBrowserSupport)throw window&&window.location&&window.location.protocol==="http:"?new y.NotSupportedError("twilio.js wasn't able to find WebRTC browser support.           This is most likely because this page is served over http rather than https,           which does not support WebRTC in many browsers. Please load this page over https and           try again."):new y.NotSupportedError("twilio.js 1.3+ SDKs require WebRTC browser support.         For more information, see <https://www.twilio.com/docs/api/client/twilio-js>.         If you have any questions about this announcement, please contact         Twilio Support at <help@twilio.com>.");var q=globalThis,k=q.msBrowser||q.browser||q.chrome;if(R._isBrowserExtension=!!k&&!!k.runtime&&!!k.runtime.id||!!q.safari&&!!q.safari.extension,R._isBrowserExtension&&R._log.info("Running as browser extension."),navigator){var H=navigator;R._networkInformation=H.connection||H.mozConnection||H.webkitConnection}return R._networkInformation&&typeof R._networkInformation.addEventListener=="function"&&R._networkInformation.addEventListener("change",R._publishNetworkChange),T._getOrCreateAudioContext(),T._audioContext&&(T._dialtonePlayer||(T._dialtonePlayer=new g.default(T._audioContext))),typeof T._isUnifiedPlanDefault>"u"&&(T._isUnifiedPlanDefault=typeof window<"u"&&typeof RTCPeerConnection<"u"&&typeof RTCRtpTransceiver<"u"?(0,l.isUnifiedPlanDefault)(window,window.navigator,RTCPeerConnection,RTCRtpTransceiver):!1),R._boundDestroy=R.destroy.bind(R),R._boundConfirmClose=R._confirmClose.bind(R),typeof window<"u"&&window.addEventListener&&(window.addEventListener("unload",R._boundDestroy),window.addEventListener("pagehide",R._boundDestroy)),R.updateOptions(v),R}return Object.defineProperty(T,"audioContext",{get:function(){return T._audioContext},enumerable:!1,configurable:!0}),Object.defineProperty(T,"extension",{get:function(){var x=typeof document<"u"?document.createElement("audio"):{canPlayType:!1},v;try{v=x.canPlayType&&!!x.canPlayType("audio/mpeg").replace(/no/,"")}catch{v=!1}var F;try{F=x.canPlayType&&!!x.canPlayType("audio/ogg;codecs='vorbis'").replace(/no/,"")}catch{F=!1}return F&&!v?"ogg":"mp3"},enumerable:!1,configurable:!0}),Object.defineProperty(T,"isSupported",{get:function(){return p.enabled()},enumerable:!1,configurable:!0}),Object.defineProperty(T,"packageName",{get:function(){return C.PACKAGE_NAME},enumerable:!1,configurable:!0}),T.runPreflight=function(x,v){return new h.PreflightTest(x,t({audioContext:T._getOrCreateAudioContext()},v))},T.toString=function(){return"[Twilio.Device class]"},Object.defineProperty(T,"version",{get:function(){return C.RELEASE_VERSION},enumerable:!1,configurable:!0}),T._getOrCreateAudioContext=function(){return T._audioContext||(typeof AudioContext<"u"?T._audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(T._audioContext=new webkitAudioContext)),T._audioContext},Object.defineProperty(T.prototype,"audio",{get:function(){return this._audio},enumerable:!1,configurable:!0}),T.prototype.connect=function(){return n(this,arguments,void 0,function(x){var v,F,R,q,k,H,M,L,K;return x===void 0&&(x={}),r(this,function(B){switch(B.label){case 0:if(this._log.debug(".connect",JSON.stringify(x)),this._throwIfDestroyed(),this._activeCall)throw new y.InvalidStateError("A Call is already active");if(x.connectToken){try{q=JSON.parse(decodeURIComponent(atob(x.connectToken))),v=q.customParameters,F=q.parameters,R=q.signalingReconnectToken}catch{throw new y.InvalidArgumentError("Cannot parse connectToken")}if(!F||!F.CallSid||!R)throw new y.InvalidArgumentError("Invalid connectToken")}k=!1,H={},M={enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,rtcConfiguration:x.rtcConfiguration,voiceEventSidGenerator:this._options.voiceEventSidGenerator},R&&F?(k=!0,M.callParameters=F,M.reconnectCallSid=F.CallSid,M.reconnectToken=R,H=v||H):H=x.params||H,this._makeCallPromise=this._makeCall(H,M,k),B.label=1;case 1:return B.trys.push([1,,3,4]),K=this,[4,this._makeCallPromise];case 2:return L=K._activeCall=B.sent(),[3,4];case 3:return this._makeCallPromise=null,[7];case 4:return this._calls.splice(0).forEach(function(te){return te.ignore()}),this._soundcache.get(T.SoundName.Incoming).stop(),L.accept({rtcConstraints:x.rtcConstraints}),this._publishNetworkChange(),[2,L]}})})},Object.defineProperty(T.prototype,"calls",{get:function(){return this._calls},enumerable:!1,configurable:!0}),T.prototype.destroy=function(){var x;this._log.debug(".destroy"),this._log.debug("Rejecting any incoming calls");var v=this._calls.slice(0);v.forEach(function(F){return F.reject()}),this.disconnectAll(),this._stopRegistrationTimer(),this._destroyStream(),this._destroyAudioHelper(),(x=this._audioProcessorEventObserver)===null||x===void 0||x.destroy(),this._destroyPublisher(),this._networkInformation&&typeof this._networkInformation.removeEventListener=="function"&&this._networkInformation.removeEventListener("change",this._publishNetworkChange),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.removeEventListener("unload",this._boundDestroy),window.removeEventListener("pagehide",this._boundDestroy)),this._setState(T.State.Destroyed),i.EventEmitter.prototype.removeAllListeners.call(this)},T.prototype.disconnectAll=function(){this._log.debug(".disconnectAll");var x=this._calls.splice(0);x.forEach(function(v){return v.disconnect()}),this._activeCall&&this._activeCall.disconnect()},Object.defineProperty(T.prototype,"edge",{get:function(){return this._edge},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"home",{get:function(){return this._home},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"identity",{get:function(){return this._identity},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"isBusy",{get:function(){return!!this._activeCall},enumerable:!1,configurable:!0}),T.prototype.register=function(){return n(this,void 0,void 0,function(){return r(this,function(x){switch(x.label){case 0:if(this._log.debug(".register"),this.state!==T.State.Unregistered)throw new y.InvalidStateError('Attempt to register when device is in state "'.concat(this.state,'". ')+'Must be "'.concat(T.State.Unregistered,'".'));return this._shouldReRegister=!1,this._setState(T.State.Registering),[4,this._streamConnectedPromise||this._setupStream()];case 1:return x.sent(),[4,this._sendPresence(!0)];case 2:return x.sent(),[4,(0,l.promisifyEvents)(this,T.State.Registered,T.State.Unregistered)];case 3:return x.sent(),[2]}})})},Object.defineProperty(T.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),T.prototype.toString=function(){return"[Twilio.Device instance]"},T.prototype.unregister=function(){return n(this,void 0,void 0,function(){var x,v;return r(this,function(F){switch(F.label){case 0:if(this._log.debug(".unregister"),this.state!==T.State.Registered)throw new y.InvalidStateError('Attempt to unregister when device is in state "'.concat(this.state,'". ')+'Must be "'.concat(T.State.Registered,'".'));return this._shouldReRegister=!1,[4,this._streamConnectedPromise];case 1:return x=F.sent(),v=new Promise(function(R){x.on("offline",R)}),[4,this._sendPresence(!1)];case 2:return F.sent(),[4,v];case 3:return F.sent(),[2]}})})},T.prototype.updateOptions=function(x){if(x===void 0&&(x={}),this._logOptions("updateOptions",x),this.state===T.State.Destroyed)throw new y.InvalidStateError('Attempt to "updateOptions" when device is in state "'.concat(this.state,'".'));this._options=t(t(t({},this._defaultOptions),this._options),x);var v=new Set(this._chunderURIs),F=this._chunderURIs=(this._getChunderws()||(0,u.getChunderURIs)(this._options.edge)).map(u.createSignalingEndpointURL),R=v.size!==F.length;if(!R)for(var q=0,k=F;q<k.length;q++){var H=k[q];if(!v.has(H)){R=!0;break}}if(this.isBusy&&R)throw new y.InvalidStateError("Cannot change Edge while on an active Call");this._setupLoglevel(this._options.logLevel);for(var M=0,L=Object.keys(T._defaultSounds);M<L.length;M++){var K=L[M],B=T._defaultSounds[K],te="".concat(C.SOUNDS_BASE_URL,"/").concat(B.filename,".").concat(T.extension)+"?cache=".concat(C.RELEASE_VERSION),ie=this._options.sounds&&this._options.sounds[K]||te,se=new(this._options.Sound||d.default)(K,ie,{audioContext:this._options.disableAudioContextSounds?null:T.audioContext,maxDuration:B.maxDuration,shouldLoop:B.shouldLoop});this._soundcache.set(K,se)}this._setupAudioHelper(),this._setupPublisher(),R&&this._streamConnectedPromise&&this._setupStream(),typeof window<"u"&&typeof window.addEventListener=="function"&&this._options.closeProtection&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.addEventListener("beforeunload",this._boundConfirmClose))},T.prototype.updateToken=function(x){if(this._log.debug(".updateToken"),this.state===T.State.Destroyed)throw new y.InvalidStateError('Attempt to "updateToken" when device is in state "'.concat(this.state,'".'));if(typeof x!="string")throw new y.InvalidArgumentError(N);this._token=x,this._stream&&this._stream.setToken(this._token),this._publisher&&this._publisher.setToken(this._token)},T.prototype._confirmClose=function(x){if(!this._activeCall)return"";var v=this._options.closeProtection||!1,F=typeof v!="string"?"A call is currently in-progress. Leaving or reloading this page will end the call.":v;return(x||window.event).returnValue=F,F},T.prototype._destroyAudioHelper=function(){this._audio&&(this._audio._destroy(),this._audio=null)},T.prototype._destroyPublisher=function(){this._publisher&&(this._publisher=null)},T.prototype._destroyStream=function(){this._stream&&(this._stream.removeListener("close",this._onSignalingClose),this._stream.removeListener("connected",this._onSignalingConnected),this._stream.removeListener("error",this._onSignalingError),this._stream.removeListener("invite",this._onSignalingInvite),this._stream.removeListener("offline",this._onSignalingOffline),this._stream.removeListener("ready",this._onSignalingReady),this._stream.destroy(),this._stream=null),this._onSignalingOffline(),this._streamConnectedPromise=null},T.prototype._findCall=function(x){return this._calls.find(function(v){return v.parameters.CallSid===x||v.outboundConnectionId===x})||null},T.prototype._getChunderws=function(){return typeof this._options.chunderw=="string"?[this._options.chunderw]:Array.isArray(this._options.chunderw)?this._options.chunderw:null},T.prototype._logOptions=function(x,v){v===void 0&&(v={});var F=["allowIncomingWhileBusy","appName","appVersion","closeProtection","codecPreferences","disableAudioContextSounds","dscp","edge","enableImprovedSignalingErrorPrecision","forceAggressiveIceNomination","logLevel","maxAverageBitrate","maxCallSignalingTimeoutMs","sounds","tokenRefreshMs"],R=["RTCPeerConnection","enumerateDevices","getUserMedia","MediaStream"];if(typeof v=="object"){var q=t({},v);Object.keys(q).forEach(function(k){!F.includes(k)&&!R.includes(k)&&delete q[k],R.includes(k)&&(q[k]=!0)}),this._log.debug(".".concat(x),JSON.stringify(q))}},T.prototype._makeCall=function(x,v){return n(this,arguments,void 0,function(F,R,q){var k,H,M,L,K,B=this,te;return q===void 0&&(q=!1),r(this,function(ie){switch(ie.label){case 0:if(typeof T._isUnifiedPlanDefault>"u")throw new y.InvalidStateError("Device has not been initialized.");return k=(te=this._audio)===null||te===void 0?void 0:te._getInputDevicePromise(),k?(this._log.debug("inputDevicePromise detected, waiting..."),[4,k]):[3,2];case 1:ie.sent(),this._log.debug("inputDevicePromise resolved"),ie.label=2;case 2:return K={audioHelper:this._audio,isUnifiedPlanDefault:T._isUnifiedPlanDefault,onIgnore:function(){B._soundcache.get(T.SoundName.Incoming).stop()}},[4,this._streamConnectedPromise||this._setupStream()];case 3:return H=(K.pstream=ie.sent(),K.publisher=this._publisher,K.soundcache=this._soundcache,K),R=Object.assign({MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,beforeAccept:function(se){!B._activeCall||B._activeCall===se||(B._activeCall.disconnect(),B._removeCall(B._activeCall))},codecPreferences:this._options.codecPreferences,customSounds:this._options.sounds,dialtonePlayer:T._dialtonePlayer,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,getInputStream:function(){return B._options.fileInputStream||B._callInputStream},getSinkIds:function(){return B._callSinkIds},maxAverageBitrate:this._options.maxAverageBitrate,preflight:this._options.preflight,rtcConstraints:this._options.rtcConstraints,shouldPlayDisconnect:function(){var se;return(se=B._audio)===null||se===void 0?void 0:se.disconnect()},twimlParams:F,voiceEventSidGenerator:this._options.voiceEventSidGenerator},R),M=function(){if(!B._stream){B._log.warn("UnsetPreferredUri called without a stream");return}B._activeCall===null&&B._calls.length===0&&B._stream.updatePreferredURI(null)},L=new(this._options.Call||_.default)(H,R),this._publisher.info("settings","init",{MediaStream:!!this._options.MediaStream,RTCPeerConnection:!!this._options.RTCPeerConnection,enumerateDevices:!!this._options.enumerateDevices,getUserMedia:!!this._options.getUserMedia},L),L.once("accept",function(){var se,ce,_e;B._stream.updatePreferredURI(B._preferredURI),B._removeCall(L),B._activeCall=L,B._audio&&B._audio._maybeStartPollingVolume(),L.direction===_.default.CallDirection.Outgoing&&(!((se=B._audio)===null||se===void 0)&&se.outgoing())&&!q&&B._soundcache.get(T.SoundName.Outgoing).play();var Fe={edge:B._edge||B._region};B._options.edge&&(Fe.selected_edge=Array.isArray(B._options.edge)?B._options.edge:[B._options.edge]),B._publisher.info("settings","edge",Fe,L),!((ce=B._audio)===null||ce===void 0)&&ce.processedStream&&((_e=B._audioProcessorEventObserver)===null||_e===void 0||_e.emit("enabled"))}),L.addListener("error",function(se){L.status()==="closed"&&(B._removeCall(L),M()),B._audio&&B._audio._maybeStopPollingVolume(),B._maybeStopIncomingSound()}),L.once("cancel",function(){B._log.info("Canceled: ".concat(L.parameters.CallSid)),B._removeCall(L),M(),B._audio&&B._audio._maybeStopPollingVolume(),B._maybeStopIncomingSound()}),L.once("disconnect",function(){B._audio&&B._audio._maybeStopPollingVolume(),B._removeCall(L),M(),B._maybeStopIncomingSound()}),L.once("reject",function(){B._log.info("Rejected: ".concat(L.parameters.CallSid)),B._audio&&B._audio._maybeStopPollingVolume(),B._removeCall(L),M(),B._maybeStopIncomingSound()}),L.on("transportClose",function(){L.status()===_.default.State.Pending&&(B._audio&&B._audio._maybeStopPollingVolume(),B._removeCall(L),B._maybeStopIncomingSound())}),[2,L]}})})},T.prototype._maybeStopIncomingSound=function(){this._calls.length||this._soundcache.get(T.SoundName.Incoming).stop()},T.prototype._removeCall=function(x){this._activeCall===x&&(this._activeCall=null,this._makeCallPromise=null);for(var v=this._calls.length-1;v>=0;v--)x===this._calls[v]&&this._calls.splice(v,1)},T.prototype._sendPresence=function(x){return n(this,void 0,void 0,function(){var v;return r(this,function(F){switch(F.label){case 0:return[4,this._streamConnectedPromise];case 1:return v=F.sent(),v?(v.register({audio:x}),x?this._startRegistrationTimer():this._stopRegistrationTimer(),[2]):[2]}})})},T.prototype._setState=function(x){if(x!==this.state){this._state=x;var v=this._stateEventMapping[x];this._log.debug("#".concat(v)),this.emit(v)}},T.prototype._setupAudioHelper=function(){var x=this;this._audioProcessorEventObserver||(this._audioProcessorEventObserver=new c.AudioProcessorEventObserver,this._audioProcessorEventObserver.on("event",function(F){var R=F.name,q=F.group;x._publisher.info(q,R,{},x._activeCall)}));var v={audioContext:T.audioContext,audioProcessorEventObserver:this._audioProcessorEventObserver,beforeSetInputDevice:function(){return x._makeCallPromise?(x._log.debug("beforeSetInputDevice pause detected"),x._makeCallPromise):(x._log.debug("beforeSetInputDevice pause not detected, setting default"),Promise.resolve())},enumerateDevices:this._options.enumerateDevices,getUserMedia:this._options.getUserMedia||f.default};if(this._audio){this._log.info("Found existing audio helper; updating options..."),this._audio._updateUserOptions(v);return}this._audio=new(this._options.AudioHelper||s.default)(this._updateSinkIds,this._updateInputStream,v),this._audio.on("deviceChange",function(F){var R=x._activeCall,q=F.map(function(k){return k.deviceId});x._publisher.info("audio","device-change",{lost_active_device_ids:q},R),R&&R._mediaHandler._onInputDevicesChanged()})},T.prototype._setupLoglevel=function(x){var v=typeof x=="number"||typeof x=="string"?x:o.levels.ERROR;this._log.setDefaultLevel(v),this._log.info("Set logger default level to",v)},T.prototype._setupPublisher=function(){var x=this;this._publisher&&(this._log.info("Found existing publisher; destroying..."),this._destroyPublisher());var v={defaultPayload:this._createDefaultPayload,metadata:{app_name:this._options.appName,app_version:this._options.appVersion}};return this._options.eventgw&&(v.host=this._options.eventgw),this._home&&(v.host=(0,u.createEventGatewayURI)(this._home)),this._publisher=new(this._options.Publisher||b.default)(w,this.token,v),this._options.publishEvents===!1?this._publisher.disable():this._publisher.on("error",function(F){x._log.warn("Cannot connect to insights.",F)}),this._publisher},T.prototype._setupStream=function(){var x=this;return this._stream&&(this._log.info("Found existing stream; destroying..."),this._destroyStream()),this._log.info("Setting up VSP"),this._stream=new(this._options.PStream||a.default)(this.token,this._chunderURIs,{backoffMaxMs:this._options.backoffMaxMs,maxPreferredDurationMs:this._options.maxCallSignalingTimeoutMs}),this._stream.addListener("close",this._onSignalingClose),this._stream.addListener("connected",this._onSignalingConnected),this._stream.addListener("error",this._onSignalingError),this._stream.addListener("invite",this._onSignalingInvite),this._stream.addListener("offline",this._onSignalingOffline),this._stream.addListener("ready",this._onSignalingReady),this._streamConnectedPromise=(0,l.promisifyEvents)(this._stream,"connected","close").then(function(){return x._stream})},T.prototype._showIncomingCall=function(x,v){var F=this,R;return Promise.race([v(),new Promise(function(q,k){R=setTimeout(function(){var H="Playing incoming ringtone took too long; it might not play. Continuing execution...";k(new Error(H))},I)})]).catch(function(q){F._log.warn(q.message)}).then(function(){clearTimeout(R),F._log.debug("#incoming",JSON.stringify({customParameters:x.customParameters,parameters:x.parameters})),F.emit(T.EventName.Incoming,x)})},T.prototype._startRegistrationTimer=function(){var x=this;this._stopRegistrationTimer(),this._regTimer=setTimeout(function(){x._sendPresence(!0)},S)},T.prototype._stopRegistrationTimer=function(){this._regTimer&&clearTimeout(this._regTimer)},T.prototype._throwIfDestroyed=function(){if(this.state===T.State.Destroyed)throw new y.InvalidStateError("Device has been destroyed.")},T.prototype._updateRingtoneSinkIds=function(x){return Promise.resolve(this._soundcache.get(T.SoundName.Incoming).setSinkIds(x))},T.prototype._updateSpeakerSinkIds=function(x){Array.from(this._soundcache.entries()).filter(function(F){return F[0]!==T.SoundName.Incoming}).forEach(function(F){return F[1].setSinkIds(x)}),this._callSinkIds=x;var v=this._activeCall;return v?v._setSinkIds(x):Promise.resolve()},T._defaultSounds={disconnect:{filename:"disconnect",maxDuration:3e3},dtmf0:{filename:"dtmf-0",maxDuration:1e3},dtmf1:{filename:"dtmf-1",maxDuration:1e3},dtmf2:{filename:"dtmf-2",maxDuration:1e3},dtmf3:{filename:"dtmf-3",maxDuration:1e3},dtmf4:{filename:"dtmf-4",maxDuration:1e3},dtmf5:{filename:"dtmf-5",maxDuration:1e3},dtmf6:{filename:"dtmf-6",maxDuration:1e3},dtmf7:{filename:"dtmf-7",maxDuration:1e3},dtmf8:{filename:"dtmf-8",maxDuration:1e3},dtmf9:{filename:"dtmf-9",maxDuration:1e3},dtmfh:{filename:"dtmf-hash",maxDuration:1e3},dtmfs:{filename:"dtmf-star",maxDuration:1e3},incoming:{filename:"incoming",shouldLoop:!0},outgoing:{filename:"outgoing",maxDuration:3e3}},T})(i.EventEmitter);return(function(A){(function(T){T.Error="error",T.Incoming="incoming",T.Destroyed="destroyed",T.Unregistered="unregistered",T.Registering="registering",T.Registered="registered",T.TokenWillExpire="tokenWillExpire"})(A.EventName||(A.EventName={})),(function(T){T.Destroyed="destroyed",T.Unregistered="unregistered",T.Registering="registering",T.Registered="registered"})(A.State||(A.State={})),(function(T){T.Incoming="incoming",T.Outgoing="outgoing",T.Disconnect="disconnect",T.Dtmf0="dtmf0",T.Dtmf1="dtmf1",T.Dtmf2="dtmf2",T.Dtmf3="dtmf3",T.Dtmf4="dtmf4",T.Dtmf5="dtmf5",T.Dtmf6="dtmf6",T.Dtmf7="dtmf7",T.Dtmf8="dtmf8",T.Dtmf9="dtmf9",T.DtmfS="dtmfs",T.DtmfH="dtmfh"})(A.SoundName||(A.SoundName={}))})(P||(P={})),Be.default=P,Be}var un={},zo;function Vl(){if(zo)return un;zo=1,Object.defineProperty(un,"__esModule",{value:!0}),un.IceCandidate=void 0;var e=(function(){function t(n,r){r===void 0&&(r=!1),this.deleted=!1;var i,o=n.candidate.split("network-cost ");o[1]&&(i=parseInt(o[1],10)),this.candidateType=n.type,this.ip=n.ip||n.address,this.isRemote=r,this.networkCost=i,this.port=n.port,this.priority=n.priority,this.protocol=n.protocol,this.relatedAddress=n.relatedAddress,this.relatedPort=n.relatedPort,this.tcpType=n.tcpType,this.transportId=n.sdpMid}return t.prototype.toPayload=function(){return{candidate_type:this.candidateType,deleted:this.deleted,ip:this.ip,is_remote:this.isRemote,"network-cost":this.networkCost,port:this.port,priority:this.priority,protocol:this.protocol,related_address:this.relatedAddress,related_port:this.relatedPort,tcp_type:this.tcpType,transport_id:this.transportId}},t})();return un.IceCandidate=e,un}var Ze={},Vt={},Jo;function Wl(){if(Jo)return Vt;Jo=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.calculate=t,Vt.isNonNegativeNumber=n;var e=94.768;function t(r,i,o){if(typeof r!="number"||typeof i!="number"||typeof o!="number"||!n(r)||!n(i)||!n(o))return null;var s=r+i*2+10,c=0;switch(!0){case s<160:c=e-s/40;break;case s<1e3:c=e-(s-120)/10;break}switch(!0){case o<=c/2.5:c=Math.max(c-o*2.5,6.52);break;default:c=0;break}var _=1+.035*c+7e-6*c*(c-60)*(100-c);return _}function n(r){return typeof r=="number"&&!isNaN(r)&&isFinite(r)&&r>=0}return Vt.default={calculate:t,isNonNegativeNumber:n},Vt}var Ko;function Gl(){if(Ko)return Ze;Ko=1;var e=Ze&&Ze.__extends||(function(){var m=function(d,l){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,I){S.__proto__=I}||function(S,I){for(var w in I)Object.prototype.hasOwnProperty.call(I,w)&&(S[w]=I[w])},m(d,l)};return function(d,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");m(d,l);function S(){this.constructor=d}d.prototype=l===null?Object.create(l):(S.prototype=l.prototype,new S)}})(),t=Ze&&Ze.__assign||function(){return t=Object.assign||function(m){for(var d,l=1,S=arguments.length;l<S;l++){d=arguments[l];for(var I in d)Object.prototype.hasOwnProperty.call(d,I)&&(m[I]=d[I])}return m},t.apply(this,arguments)},n=Ze&&Ze.__spreadArray||function(m,d,l){if(l||arguments.length===2)for(var S=0,I=d.length,w;S<I;S++)(w||!(S in d))&&(w||(w=Array.prototype.slice.call(d,0,S)),w[S]=d[S]);return m.concat(w||Array.prototype.slice.call(d))};Object.defineProperty(Ze,"__esModule",{value:!0});var r=We(),i=we(),o=Wl(),s=ya(),c=wt(),_=5,C=0,g=3,y=1e3,b=5*1e3,E={audioInputLevel:{minStandardDeviation:327.67,sampleCount:10},audioOutputLevel:{minStandardDeviation:327.67,sampleCount:10},bytesReceived:{clearCount:2,min:1,raiseCount:3,sampleCount:3},bytesSent:{clearCount:2,min:1,raiseCount:3,sampleCount:3},jitter:{max:30},mos:{min:3},packetsLostFraction:[{max:1},{clearValue:1,maxAverage:3,sampleCount:7}],rtt:{max:400}};function h(m,d){return d.reduce(function(l,S){return l+=S>m?1:0},0)}function a(m,d){return d.reduce(function(l,S){return l+=S<m?1:0},0)}function u(m){if(m.length<=0)return null;var d=m.reduce(function(I,w){return I+w},0)/m.length,l=m.map(function(I){return Math.pow(I-d,2)}),S=Math.sqrt(l.reduce(function(I,w){return I+w},0)/l.length);return S}function p(m){return m.reduce(function(d,l){return n(n([],d,!0),l,!0)},[])}var f=(function(m){e(d,m);function d(l){var S=m.call(this)||this;S._activeWarnings=new Map,S._currentStreaks=new Map,S._inputVolumes=[],S._outputVolumes=[],S._sampleBuffer=[],S._supplementalSampleBuffers={audioInputLevel:[],audioOutputLevel:[]},S._warningsEnabled=!0,l=l||{},S._getRTCStats=l.getRTCStats||s.getRTCStats,S._mos=l.Mos||o.default,S._peerConnection=l.peerConnection,S._thresholds=t(t({},E),l.thresholds);var I=Object.values(S._thresholds).map(function(w){return w.sampleCount}).filter(function(w){return!!w});return S._maxSampleCount=Math.max.apply(Math,n([_],I,!1)),S._peerConnection&&S.enable(S._peerConnection),S}return d.prototype.addVolumes=function(l,S){this._inputVolumes.push(l),this._outputVolumes.push(S)},d.prototype.disable=function(){return this._sampleInterval&&(clearInterval(this._sampleInterval),delete this._sampleInterval),this},d.prototype.disableWarnings=function(){return this._warningsEnabled&&this._activeWarnings.clear(),this._warningsEnabled=!1,this},d.prototype.enable=function(l){if(l){if(this._peerConnection&&l!==this._peerConnection)throw new i.InvalidArgumentError("Attempted to replace an existing PeerConnection in StatsMonitor.enable");this._peerConnection=l}if(!this._peerConnection)throw new i.InvalidArgumentError("Can not enable StatsMonitor without a PeerConnection");return this._sampleInterval=this._sampleInterval||setInterval(this._fetchSample.bind(this),y),this},d.prototype.enableWarnings=function(){return this._warningsEnabled=!0,this},d.prototype.hasActiveWarning=function(l,S){var I="".concat(l,":").concat(S);return!!this._activeWarnings.get(I)},d.prototype._addSample=function(l){var S=this._sampleBuffer;S.push(l),S.length>this._maxSampleCount&&S.splice(0,S.length-this._maxSampleCount)},d.prototype._clearWarning=function(l,S,I){var w="".concat(l,":").concat(S),N=this._activeWarnings.get(w);!N||Date.now()-N.timeRaised<b||(this._activeWarnings.delete(w),this.emit("warning-cleared",t(t({},I),{name:l,threshold:{name:S,value:this._thresholds[l][S]}})))},d.prototype._createSample=function(l,S){var I=S&&S.totals.bytesSent||0,w=S&&S.totals.bytesReceived||0,N=S&&S.totals.packetsSent||0,P=S&&S.totals.packetsReceived||0,A=S&&S.totals.packetsLost||0,T=l.bytesSent-I,x=l.bytesReceived-w,v=l.packetsSent-N,F=l.packetsReceived-P,R=l.packetsLost-A,q=F+R,k=q>0?R/q*100:0,H=l.packetsReceived+l.packetsLost,M=H>0?l.packetsLost/H*100:100,L=typeof l.rtt=="number"||!S?l.rtt:S.rtt,K=this._inputVolumes.splice(0);this._supplementalSampleBuffers.audioInputLevel.push(K);var B=this._outputVolumes.splice(0);return this._supplementalSampleBuffers.audioOutputLevel.push(B),{audioInputLevel:Math.round((0,c.average)(K)),audioOutputLevel:Math.round((0,c.average)(B)),bytesReceived:x,bytesSent:T,codecName:l.codecName,jitter:l.jitter,mos:this._mos.calculate(L,l.jitter,S&&k),packetsLost:R,packetsLostFraction:k,packetsReceived:F,packetsSent:v,rtt:L,timestamp:l.timestamp,totals:{bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,packetsLost:l.packetsLost,packetsLostFraction:M,packetsReceived:l.packetsReceived,packetsSent:l.packetsSent}}},d.prototype._fetchSample=function(){var l=this;this._getSample().then(function(S){l._addSample(S),l._raiseWarnings(),l.emit("sample",S)}).catch(function(S){l.disable(),l.emit("error",S)})},d.prototype._getSample=function(){var l=this;return this._getRTCStats(this._peerConnection).then(function(S){var I=null;return l._sampleBuffer.length&&(I=l._sampleBuffer[l._sampleBuffer.length-1]),l._createSample(S,I)})},d.prototype._raiseWarning=function(l,S,I){var w="".concat(l,":").concat(S);if(!this._activeWarnings.has(w)){this._activeWarnings.set(w,{timeRaised:Date.now()});var N=this._thresholds[l],P;if(Array.isArray(N)){var A=N.find(function(T){return S in T});A&&(P=A[S])}else P=this._thresholds[l][S];this.emit("warning",t(t({},I),{name:l,threshold:{name:S,value:P}}))}},d.prototype._raiseWarnings=function(){var l=this;this._warningsEnabled&&Object.keys(this._thresholds).forEach(function(S){return l._raiseWarningsForStat(S)})},d.prototype._raiseWarningsForStat=function(l){var S=this,I=Array.isArray(this._thresholds[l])?this._thresholds[l]:[this._thresholds[l]];I.forEach(function(w){var N=S._sampleBuffer,P=w.clearCount||C,A=w.raiseCount||g,T=w.sampleCount||S._maxSampleCount,x=N.slice(-T),v=x.map(function(te){return te[l]}),F=v.some(function(te){return typeof te>"u"||te===null});if(!F){var R;if(typeof w.max=="number"&&(R=h(w.max,v),R>=A?S._raiseWarning(l,"max",{values:v,samples:x}):R<=P&&S._clearWarning(l,"max",{values:v,samples:x})),typeof w.min=="number"&&(R=a(w.min,v),R>=A?S._raiseWarning(l,"min",{values:v,samples:x}):R<=P&&S._clearWarning(l,"min",{values:v,samples:x})),typeof w.maxDuration=="number"&&N.length>1){x=N.slice(-2);var q=x[0][l],k=x[1][l],H=S._currentStreaks.get(l)||0,M=q===k?H+1:0;S._currentStreaks.set(l,M),M>=w.maxDuration?S._raiseWarning(l,"maxDuration",{value:M}):M===0&&S._clearWarning(l,"maxDuration",{value:H})}if(typeof w.minStandardDeviation=="number"){var L=S._supplementalSampleBuffers[l];if(!L||L.length<w.sampleCount)return;L.length>w.sampleCount&&L.splice(0,L.length-w.sampleCount);var K=p(L.slice(-T)),B=u(K);if(typeof B!="number")return;B<w.minStandardDeviation?S._raiseWarning(l,"minStandardDeviation",{value:B}):S._clearWarning(l,"minStandardDeviation",{value:B})}[["maxAverage",function(te,ie){return te>ie}],["minAverage",function(te,ie){return te<ie}]].forEach(function(te){var ie=te[0],se=te[1];if(typeof w[ie]=="number"&&v.length>=T){var ce=(0,c.average)(v);se(ce,w[ie])?S._raiseWarning(l,ie,{values:v,samples:x}):se(ce,w.clearValue||w[ie])||S._clearWarning(l,ie,{values:v,samples:x})}})}})},d})(r.EventEmitter);return Ze.default=f,Ze}var Xo;function Ii(){if(Xo)return _t;Xo=1;var e=_t&&_t.__extends||(function(){var P=function(A,T){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,v){x.__proto__=v}||function(x,v){for(var F in v)Object.prototype.hasOwnProperty.call(v,F)&&(x[F]=v[F])},P(A,T)};return function(A,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");P(A,T);function x(){this.constructor=A}A.prototype=T===null?Object.create(T):(x.prototype=T.prototype,new x)}})(),t=_t&&_t.__assign||function(){return t=Object.assign||function(P){for(var A,T=1,x=arguments.length;T<x;T++){A=arguments[T];for(var v in A)Object.prototype.hasOwnProperty.call(A,v)&&(P[v]=A[v])}return P},t.apply(this,arguments)};Object.defineProperty(_t,"__esModule",{value:!0});var n=We(),r=ma(),i=yr(),o=we(),s=qe(),c=wa(),_=Vl(),C=Pi(),g=Ca(),y=Gl(),b=wt(),E=Zt(),h={factor:1.1,jitter:.5,max:3e4,min:1},a=70,u=500,p=160,f=10,m=5e3,d={disconnect:!0,info:{code:31003,message:"Connection with Twilio was interrupted.",twilioError:new o.MediaErrors.ConnectionError}},l={packetsLostFraction:{max:"packet-loss",maxAverage:"packets-lost-fraction"}},S={audioInputLevel:"audio-input-level",audioOutputLevel:"audio-output-level",bytesReceived:"bytes-received",bytesSent:"bytes-sent",jitter:"jitter",mos:"mos",rtt:"rtt"},I={max:"high-",maxAverage:"high-",maxDuration:"constant-",min:"low-",minStandardDeviation:"constant-"},w=(function(P){e(A,P);function A(T,x){var v=P.call(this)||this;v.parameters={},v._inputVolumeStreak=0,v._isAnswered=!1,v._isCancelled=!1,v._isRejected=!1,v._latestInputVolume=0,v._latestOutputVolume=0,v._log=new s.default("Call"),v._mediaStatus=A.State.Pending,v._messages=new Map,v._metricsSamples=[],v._options={MediaHandler:c.PeerConnection,MediaStream:null,enableImprovedSignalingErrorPrecision:!1,offerSdp:null,shouldPlayDisconnect:function(){return!0},voiceEventSidGenerator:g.generateVoiceEventSid},v._outputVolumeStreak=0,v._shouldSendHangup=!0,v._signalingStatus=A.State.Pending,v._soundcache=new Map,v._status=A.State.Pending,v._wasConnected=!1,v.toString=function(){return"[Twilio.Call instance]"},v._emitWarning=function(k,H,M,L,K,B){var te=K?"-cleared":"-raised",ie="".concat(k,"warning").concat(te);if(!(H==="constant-audio-input-level"&&v.isMuted())){var se=K?"info":"warning";H==="constant-audio-output-level"&&(se="info");var ce={threshold:M};if(L&&(L instanceof Array?ce.values=L.map(function(Fe){return typeof Fe=="number"?Math.round(Fe*100)/100:L}):ce.value=L),v._publisher.post(se,ie,H,{data:ce},v),H!=="constant-audio-output-level"){var _e=K?"warning-cleared":"warning";v._log.debug("#".concat(_e),H),v.emit(_e,H,B&&!K?B:null)}}},v._onAck=function(k){var H=k.acktype,M=k.callsid,L=k.voiceeventsid;if(v.parameters.CallSid!==M){v._log.warn("Received ack from a different callsid: ".concat(M));return}H==="message"&&v._onMessageSent(L)},v._onAnswer=function(k){typeof k.reconnect=="string"&&(v._signalingReconnectToken=k.reconnect),!(v._isAnswered&&v._status!==A.State.Reconnecting)&&(v._setCallSid(k),v._isAnswered=!0,v._maybeTransitionToOpen())},v._onCancel=function(k){var H=k.callsid;v.parameters.CallSid===H&&(v._isCancelled=!0,v._publisher.info("connection","cancel",null,v),v._cleanupEventListeners(),v._mediaHandler.close(),v._status=A.State.Closed,v._log.debug("#cancel"),v.emit("cancel"),v._pstream.removeListener("cancel",v._onCancel))},v._onConnected=function(){v._log.info("Received connected from pstream"),v._signalingReconnectToken&&v._mediaHandler.version&&v._pstream.reconnect(v._mediaHandler.version.getSDP(),v.parameters.CallSid,v._signalingReconnectToken)},v._onHangup=function(k){if(v.status()!==A.State.Closed){if(k.callsid&&(v.parameters.CallSid||v.outboundConnectionId)){if(k.callsid!==v.parameters.CallSid&&k.callsid!==v.outboundConnectionId)return}else if(k.callsid)return;if(v._log.info("Received HANGUP from gateway"),k.error){var H=k.error.code,M=(0,o.getPreciseSignalingErrorByCode)(v._options.enableImprovedSignalingErrorPrecision,H),L=typeof M<"u"?new M(k.error.message):new o.GeneralErrors.ConnectionError("Error sent from gateway in HANGUP",k.error);v._log.error("Received an error from the gateway:",L),v._log.debug("#error",L),v.emit("error",L)}v._shouldSendHangup=!1,v._publisher.info("connection","disconnected-by-remote",null,v),v._disconnect(null,!0),v._cleanupEventListeners()}},v._onMediaFailure=function(k){var H=A.MediaFailure,M=H.ConnectionDisconnected,L=H.ConnectionFailed,K=H.IceGatheringFailed,B=H.LowBytes,te=k===L||k===K;if(!(0,b.isChrome)(window,window.navigator)&&k===L)return v._mediaHandler.onerror(d);if(v._mediaStatus===A.State.Reconnecting){if(te){if(Date.now()-v._mediaReconnectStartTime>h.max)return v._log.warn("Exceeded max ICE retries"),v._mediaHandler.onerror(d);try{v._mediaReconnectBackoff.backoff()}catch(Fe){if(!(Fe.message&&Fe.message==="Backoff in progress."))throw Fe}}return}var ie=v._mediaHandler.version.pc,se=ie&&ie.iceConnectionState==="disconnected",ce=v._monitor.hasActiveWarning("bytesSent","min")||v._monitor.hasActiveWarning("bytesReceived","min");if(k===B&&se||k===M&&ce||te){var _e=new o.MediaErrors.ConnectionError("Media connection failed.");v._log.warn("ICE Connection disconnected."),v._publisher.warn("connection","error",_e,v),v._publisher.info("connection","reconnecting",null,v),v._mediaReconnectStartTime=Date.now(),v._status=A.State.Reconnecting,v._mediaStatus=A.State.Reconnecting,v._mediaReconnectBackoff.reset(),v._mediaReconnectBackoff.backoff(),v._log.debug("#reconnecting"),v.emit("reconnecting",_e)}},v._onMediaReconnected=function(){v._mediaStatus===A.State.Reconnecting&&(v._log.info("ICE Connection reestablished."),v._mediaStatus=A.State.Open,v._signalingStatus===A.State.Open&&(v._publisher.info("connection","reconnected",null,v),v._log.debug("#reconnected"),v.emit("reconnected"),v._status=A.State.Open))},v._onMessageReceived=function(k){var H=k.callsid,M=k.content,L=k.contenttype,K=k.messagetype,B=k.voiceeventsid;if(v.parameters.CallSid!==H){v._log.warn("Received a message from a different callsid: ".concat(H));return}var te={content:M,contentType:L,messageType:K,voiceEventSid:B};v._publisher.info("call-message",K,{content_type:L,event_type:"received",voice_event_sid:B},v),v._log.debug("#messageReceived",JSON.stringify(te)),v.emit("messageReceived",te)},v._onMessageSent=function(k){if(!v._messages.has(k)){v._log.warn("Received a messageSent with a voiceEventSid that doesn't exists: ".concat(k));return}var H=v._messages.get(k);v._messages.delete(k),v._publisher.info("call-message",H?.messageType,{content_type:H?.contentType,event_type:"sent",voice_event_sid:k},v),v._log.debug("#messageSent",JSON.stringify(H)),v.emit("messageSent",H)},v._onRinging=function(k){if(v._setCallSid(k),!(v._status!==A.State.Connecting&&v._status!==A.State.Ringing)){var H=!!k.sdp;v._status=A.State.Ringing,v._publisher.info("connection","outgoing-ringing",{hasEarlyMedia:H},v),v._log.debug("#ringing"),v.emit("ringing",H)}},v._onRTCSample=function(k){var H=t(t({},k),{inputVolume:v._latestInputVolume,outputVolume:v._latestOutputVolume});v._codec=H.codecName,v._metricsSamples.push(H),v._metricsSamples.length>=f&&v._publishMetrics(),v.emit("sample",k)},v._onSignalingError=function(k){var H=k.callsid,M=k.voiceeventsid,L=k.error;if(v.parameters.CallSid!==H){v._log.warn("Received an error from a different callsid: ".concat(H));return}if(M&&v._messages.has(M)){v._messages.delete(M),v._log.warn("Received an error while sending a message.",k),v._publisher.error("call-message","error",{code:L.code,message:L.message,voice_event_sid:M},v);var K=void 0,B=(0,o.getPreciseSignalingErrorByCode)(!!v._options.enableImprovedSignalingErrorPrecision,L.code);typeof B<"u"&&(K=new B(L)),K||(v._log.error("Unknown Call Message Error: ",L),K=new o.GeneralErrors.UnknownError(L.message,L)),v._log.debug("#error",L,K),v.emit("error",K)}},v._onSignalingReconnected=function(){v._signalingStatus===A.State.Reconnecting&&(v._log.info("Signaling Connection reestablished."),v._signalingStatus=A.State.Open,v._mediaStatus===A.State.Open&&(v._publisher.info("connection","reconnected",null,v),v._log.debug("#reconnected"),v.emit("reconnected"),v._status=A.State.Open))},v._onTransportClose=function(){v._log.error("Received transportClose from pstream"),v._log.debug("#transportClose"),v.emit("transportClose"),v._signalingReconnectToken?(v._status=A.State.Reconnecting,v._signalingStatus=A.State.Reconnecting,v._log.debug("#reconnecting"),v.emit("reconnecting",new o.SignalingErrors.ConnectionDisconnected)):(v._status=A.State.Closed,v._signalingStatus=A.State.Closed)},v._reemitWarning=function(k,H){var M=/^audio/.test(k.name)?"audio-level-":"network-quality-",L=I[k.threshold.name],K;k.name in l?K=l[k.name][k.threshold.name]:k.name in S&&(K=S[k.name]);var B=L+K;v._emitWarning(M,B,k.threshold.value,k.values||k.value,H,k)},v._reemitWarningCleared=function(k){v._reemitWarning(k,!0)},v._isUnifiedPlanDefault=T.isUnifiedPlanDefault,v._soundcache=T.soundcache,typeof T.onIgnore=="function"&&(v._onIgnore=T.onIgnore);var F=x&&x.twimlParams||{};v.customParameters=new Map(Object.entries(F).map(function(k){var H=k[0],M=k[1];return[H,String(M)]})),Object.assign(v._options,x),v._options.callParameters&&(v.parameters=v._options.callParameters),v._options.reconnectToken&&(v._signalingReconnectToken=v._options.reconnectToken),v._voiceEventSidGenerator=v._options.voiceEventSidGenerator||g.generateVoiceEventSid,v._direction=v.parameters.CallSid&&!v._options.reconnectCallSid?A.CallDirection.Incoming:A.CallDirection.Outgoing,v.parameters?v.callerInfo=v.parameters.StirStatus?{isVerified:v.parameters.StirStatus==="TN-Validation-Passed-A"}:null:v.callerInfo=null,v._mediaReconnectBackoff=new r.default(h),v._mediaReconnectBackoff.on("ready",function(){return v._mediaHandler.iceRestart()}),v.outboundConnectionId=N();var R=v._publisher=T.publisher;v._direction===A.CallDirection.Incoming?R.info("connection","incoming",null,v):R.info("connection","outgoing",{preflight:v._options.preflight,reconnect:!!v._options.reconnectCallSid},v);var q=v._monitor=new(v._options.StatsMonitor||y.default);return q.on("sample",v._onRTCSample),q.disableWarnings(),setTimeout(function(){return q.enableWarnings()},m),q.on("warning",function(k,H){(k.name==="bytesSent"||k.name==="bytesReceived")&&v._onMediaFailure(A.MediaFailure.LowBytes),v._reemitWarning(k,H)}),q.on("warning-cleared",function(k){v._reemitWarningCleared(k)}),v._mediaHandler=new v._options.MediaHandler(T.audioHelper,T.pstream,{MediaStream:v._options.MediaStream,RTCPeerConnection:v._options.RTCPeerConnection,codecPreferences:v._options.codecPreferences,dscp:v._options.dscp,forceAggressiveIceNomination:v._options.forceAggressiveIceNomination,isUnifiedPlan:v._isUnifiedPlanDefault,maxAverageBitrate:v._options.maxAverageBitrate}),v.on("volume",function(k,H){v._inputVolumeStreak=v._checkVolume(k,v._inputVolumeStreak,v._latestInputVolume,"input"),v._outputVolumeStreak=v._checkVolume(H,v._outputVolumeStreak,v._latestOutputVolume,"output"),v._latestInputVolume=k,v._latestOutputVolume=H}),v._mediaHandler.onaudio=function(k){v._log.debug("#audio"),v.emit("audio",k)},v._mediaHandler.onvolume=function(k,H,M,L){q.addVolumes(M/255*32767,L/255*32767),v.emit("volume",k,H)},v._mediaHandler.ondtlstransportstatechange=function(k){var H=k==="failed"?"error":"debug";v._publisher.post(H,"dtls-transport-state",k,null,v)},v._mediaHandler.onpcconnectionstatechange=function(k){var H="debug",M=v._mediaHandler.getRTCDtlsTransport();k==="failed"&&(H=M&&M.state==="failed"?"error":"warning"),v._publisher.post(H,"pc-connection-state",k,null,v)},v._mediaHandler.onicecandidate=function(k){var H=new _.IceCandidate(k).toPayload();v._publisher.debug("ice-candidate","ice-candidate",H,v)},v._mediaHandler.onselectedcandidatepairchange=function(k){var H=new _.IceCandidate(k.local).toPayload(),M=new _.IceCandidate(k.remote,!0).toPayload();v._publisher.debug("ice-candidate","selected-ice-candidate-pair",{local_candidate:H,remote_candidate:M},v)},v._mediaHandler.oniceconnectionstatechange=function(k){var H=k==="failed"?"error":"debug";v._publisher.post(H,"ice-connection-state",k,null,v)},v._mediaHandler.onicegatheringfailure=function(k){v._publisher.warn("ice-gathering-state",k,null,v),v._onMediaFailure(A.MediaFailure.IceGatheringFailed)},v._mediaHandler.onicegatheringstatechange=function(k){v._publisher.debug("ice-gathering-state",k,null,v)},v._mediaHandler.onsignalingstatechange=function(k){v._publisher.debug("signaling-state",k,null,v)},v._mediaHandler.ondisconnected=function(k){v._log.warn(k),v._publisher.warn("network-quality-warning-raised","ice-connectivity-lost",{message:k},v),v._log.debug("#warning","ice-connectivity-lost"),v.emit("warning","ice-connectivity-lost"),v._onMediaFailure(A.MediaFailure.ConnectionDisconnected)},v._mediaHandler.onfailed=function(k){v._onMediaFailure(A.MediaFailure.ConnectionFailed)},v._mediaHandler.onconnected=function(){v._status===A.State.Reconnecting&&v._onMediaReconnected()},v._mediaHandler.onreconnected=function(k){v._log.info(k),v._publisher.info("network-quality-warning-cleared","ice-connectivity-lost",{message:k},v),v._log.debug("#warning-cleared","ice-connectivity-lost"),v.emit("warning-cleared","ice-connectivity-lost"),v._onMediaReconnected()},v._mediaHandler.onerror=function(k){k.disconnect===!0&&v._disconnect(k.info&&k.info.message);var H=k.info.twilioError||new o.GeneralErrors.UnknownError(k.info.message);v._log.error("Received an error from MediaStream:",k),v._log.debug("#error",H),v.emit("error",H)},v._mediaHandler.onopen=function(){v._status===A.State.Open||v._status===A.State.Reconnecting||(v._status===A.State.Ringing||v._status===A.State.Connecting?(v.mute(v._mediaHandler.isMuted),v._mediaStatus=A.State.Open,v._maybeTransitionToOpen()):v._mediaHandler.close())},v._mediaHandler.onclose=function(){v._status=A.State.Closed,v._options.shouldPlayDisconnect&&v._options.shouldPlayDisconnect()&&!v._isCancelled&&!v._isRejected&&v._soundcache.get(i.default.SoundName.Disconnect).play(),q.disable(),v._publishMetrics(),!v._isCancelled&&!v._isRejected&&(v._log.debug("#disconnect"),v.emit("disconnect",v))},v._pstream=T.pstream,v._pstream.on("ack",v._onAck),v._pstream.on("cancel",v._onCancel),v._pstream.on("error",v._onSignalingError),v._pstream.on("ringing",v._onRinging),v._pstream.on("transportClose",v._onTransportClose),v._pstream.on("connected",v._onConnected),v._pstream.on("message",v._onMessageReceived),v.on("error",function(k){v._publisher.error("connection","error",{code:k.code,message:k.message},v),v._pstream&&v._pstream.status==="disconnected"&&v._cleanupEventListeners()}),v.on("disconnect",function(){v._cleanupEventListeners()}),v}return Object.defineProperty(A.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"codec",{get:function(){return this._codec},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"connectToken",{get:function(){var T=this,x=this._signalingReconnectToken,v=this.parameters&&this.parameters.CallSid?this.parameters.CallSid:void 0;if(!(!x||!v)){var F=this.customParameters&&typeof this.customParameters.keys=="function"?Array.from(this.customParameters.keys()).reduce(function(q,k){return q[k]=T.customParameters.get(k),q},{}):{},R=this.parameters||{};return btoa(encodeURIComponent(JSON.stringify({customParameters:F,parameters:R,signalingReconnectToken:x})))}},enumerable:!1,configurable:!0}),A.prototype._setInputTracksFromStream=function(T){return this._mediaHandler.setInputTracksFromStream(T)},A.prototype._setSinkIds=function(T){return this._mediaHandler._setSinkIds(T)},A.prototype.accept=function(T){var x=this;if(this._log.debug(".accept",T),this._status!==A.State.Pending){this._log.debug(".accept noop. status is '".concat(this._status,"'"));return}T=T||{};var v=T.rtcConfiguration||this._options.rtcConfiguration,F=T.rtcConstraints||this._options.rtcConstraints||{},R={audio:typeof F.audio<"u"?F.audio:!0};this._status=A.State.Connecting;var q=function(){if(x._status!==A.State.Connecting){x._cleanupEventListeners(),x._mediaHandler.close();return}var M=function(B){var te=x._direction===A.CallDirection.Incoming?"accepted-by-local":"accepted-by-remote";x._publisher.info("connection",te,null,x);var ie=(0,C.getPreferredCodecInfo)(x._mediaHandler.version.getSDP()),se=ie.codecName,ce=ie.codecParams;x._publisher.info("settings","codec",{codec_params:ce,selected_codec:se},x),x._monitor.enable(B)},L=typeof x._options.getSinkIds=="function"&&x._options.getSinkIds();if(Array.isArray(L)&&x._mediaHandler._setSinkIds(L).catch(function(){}),x._pstream.addListener("hangup",x._onHangup),x._direction===A.CallDirection.Incoming)x._isAnswered=!0,x._pstream.on("answer",x._onAnswer),x._mediaHandler.answerIncomingCall(x.parameters.CallSid,x._options.offerSdp,v,M);else{var K=Array.from(x.customParameters.entries()).map(function(B){return"".concat(encodeURIComponent(B[0]),"=").concat(encodeURIComponent(B[1]))}).join("&");x._pstream.on("answer",x._onAnswer),x._mediaHandler.makeOutgoingCall(K,x._signalingReconnectToken,x._options.reconnectCallSid||x.outboundConnectionId,v,M)}};this._options.beforeAccept&&this._options.beforeAccept(this);var k=typeof this._options.getInputStream=="function"&&this._options.getInputStream(),H=k?this._mediaHandler.setInputTracksFromStream(k):this._mediaHandler.openDefaultDeviceWithConstraints(R);H.then(function(){x._publisher.info("get-user-media","succeeded",{data:{audioConstraints:R}},x),q()},function(M){var L;M.code===31208||["PermissionDeniedError","NotAllowedError"].indexOf(M.name)!==-1?(L=new o.UserMediaErrors.PermissionDeniedError,x._publisher.error("get-user-media","denied",{data:{audioConstraints:R,error:M}},x)):(L=new o.UserMediaErrors.AcquisitionFailedError,x._publisher.error("get-user-media","failed",{data:{audioConstraints:R,error:M}},x)),x._disconnect(),x._log.debug("#error",M),x.emit("error",L)})},A.prototype.disconnect=function(){this._log.debug(".disconnect"),this._disconnect()},A.prototype.getLocalStream=function(){return this._mediaHandler&&this._mediaHandler.stream},A.prototype.getRemoteStream=function(){return this._mediaHandler&&this._mediaHandler._remoteStream},A.prototype.ignore=function(){if(this._log.debug(".ignore"),this._status!==A.State.Pending){this._log.debug(".ignore noop. status is '".concat(this._status,"'"));return}this._status=A.State.Closed,this._mediaHandler.ignore(this.parameters.CallSid),this._publisher.info("connection","ignored-by-local",null,this),this._onIgnore&&this._onIgnore()},A.prototype.isMuted=function(){return this._mediaHandler.isMuted},A.prototype.mute=function(T){T===void 0&&(T=!0),this._log.debug(".mute",T);var x=this._mediaHandler.isMuted;this._mediaHandler.mute(T);var v=this._mediaHandler.isMuted;x!==v&&(this._publisher.info("connection",v?"muted":"unmuted",null,this),this._log.debug("#mute",v),this.emit("mute",v,this))},A.prototype.postFeedback=function(T,x){if(typeof T>"u"||T===null)return this._postFeedbackDeclined();if(!Object.values(A.FeedbackScore).includes(T))throw new o.InvalidArgumentError("Feedback score must be one of: ".concat(Object.values(A.FeedbackScore)));if(typeof x<"u"&&x!==null&&!Object.values(A.FeedbackIssue).includes(x))throw new o.InvalidArgumentError("Feedback issue must be one of: ".concat(Object.values(A.FeedbackIssue)));return this._publisher.info("feedback","received",{issue_name:x,quality_score:T},this,!0)},A.prototype.reject=function(){if(this._log.debug(".reject"),this._status!==A.State.Pending){this._log.debug(".reject noop. status is '".concat(this._status,"'"));return}this._isRejected=!0,this._pstream.reject(this.parameters.CallSid),this._mediaHandler.reject(this.parameters.CallSid),this._publisher.info("connection","rejected-by-local",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=A.State.Closed,this._log.debug("#reject"),this.emit("reject")},A.prototype.sendDigits=function(T){var x=this;if(this._log.debug(".sendDigits",T),T.match(/[^0-9*#w]/))throw new o.InvalidArgumentError("Illegal character passed into sendDigits");var v=this._options.customSounds||{},F=[];T.split("").forEach(function(M){var L=M!=="w"?"dtmf".concat(M):"";L==="dtmf*"&&(L="dtmfs"),L==="dtmf#"&&(L="dtmfh"),F.push(L)});var R=function(){var M=F.shift();M&&(x._options.dialtonePlayer&&!v[M]?x._options.dialtonePlayer.play(M):x._soundcache.get(M).play()),F.length&&setTimeout(function(){return R()},200)};R();var q=this._mediaHandler.getOrCreateDTMFSender();function k(M){if(M.length){var L=M.shift();L&&L.length&&q.insertDTMF(L,p,a),setTimeout(k.bind(null,M),u)}}if(q){if(!("canInsertDTMF"in q)||q.canInsertDTMF){this._log.info("Sending digits using RTCDTMFSender"),k(T.split("w"));return}this._log.info("RTCDTMFSender cannot insert DTMF")}if(this._log.info("Sending digits over PStream"),this._pstream!==null&&this._pstream.status!=="disconnected")this._pstream.dtmf(this.parameters.CallSid,T);else{var H=new o.GeneralErrors.ConnectionError("Could not send DTMF: Signaling channel is disconnected");this._log.debug("#error",H),this.emit("error",H)}},A.prototype.sendMessage=function(T){this._log.debug(".sendMessage",JSON.stringify(T));var x=T.content,v=T.contentType,F=T.messageType;if(typeof x>"u"||x===null)throw new o.InvalidArgumentError("`content` is empty");if(typeof F!="string")throw new o.InvalidArgumentError("`messageType` must be a string.");if(F.length===0)throw new o.InvalidArgumentError("`messageType` must be a non-empty string.");if(this._pstream===null)throw new o.InvalidStateError("Could not send CallMessage; Signaling channel is disconnected");var R=this.parameters.CallSid;if(typeof this.parameters.CallSid>"u")throw new o.InvalidStateError("Could not send CallMessage; Call has no CallSid");var q=this._voiceEventSidGenerator();return this._messages.set(q,{content:x,contentType:v,messageType:F,voiceEventSid:q}),this._pstream.sendMessage(R,x,v,F,q),q},A.prototype.status=function(){return this._status},A.prototype._checkVolume=function(T,x,v,F){var R=x>=10,q=0;return v===T&&(q=x),q>=10?this._emitWarning("audio-level-","constant-audio-".concat(F,"-level"),10,q,!1):R&&this._emitWarning("audio-level-","constant-audio-".concat(F,"-level"),10,q,!0),q},A.prototype._cleanupEventListeners=function(){var T=this,x=function(){T._pstream&&(T._pstream.removeListener("ack",T._onAck),T._pstream.removeListener("answer",T._onAnswer),T._pstream.removeListener("cancel",T._onCancel),T._pstream.removeListener("error",T._onSignalingError),T._pstream.removeListener("hangup",T._onHangup),T._pstream.removeListener("ringing",T._onRinging),T._pstream.removeListener("transportClose",T._onTransportClose),T._pstream.removeListener("connected",T._onConnected),T._pstream.removeListener("message",T._onMessageReceived))};x(),setTimeout(x,0)},A.prototype._createMetricPayload=function(){var T={call_sid:this.parameters.CallSid,dscp:!!this._options.dscp,sdk_version:E.RELEASE_VERSION};return this._options.gateway&&(T.gateway=this._options.gateway),T.direction=this._direction,T},A.prototype._disconnect=function(T,x){if(T=typeof T=="string"?T:null,!(this._status!==A.State.Open&&this._status!==A.State.Connecting&&this._status!==A.State.Reconnecting&&this._status!==A.State.Ringing)){if(this._log.info("Disconnecting..."),this._pstream!==null&&this._pstream.status!=="disconnected"&&this._shouldSendHangup){var v=this.parameters.CallSid||this.outboundConnectionId;v&&this._pstream.hangup(v,T)}this._cleanupEventListeners(),this._mediaHandler.close(),x||this._publisher.info("connection","disconnected-by-local",null,this)}},A.prototype._maybeTransitionToOpen=function(){this._wasConnected,this._isAnswered&&(this._onSignalingReconnected(),this._signalingStatus=A.State.Open,this._mediaHandler&&this._mediaHandler.status==="open"&&(this._status=A.State.Open,this._wasConnected||(this._wasConnected=!0,this._log.debug("#accept"),this.emit("accept",this))))},A.prototype._postFeedbackDeclined=function(){return this._publisher.info("feedback","received-none",null,this,!0)},A.prototype._publishMetrics=function(){var T=this;this._metricsSamples.length!==0&&this._publisher.postMetrics("quality-metrics-samples","metrics-sample",this._metricsSamples.splice(0),this._createMetricPayload(),this).catch(function(x){T._log.warn("Unable to post metrics to Insights. Received error:",x)})},A.prototype._setCallSid=function(T){var x=T.callsid;x&&(this.parameters.CallSid=x,this._mediaHandler.callSid=x)},A.toString=function(){return"[Twilio.Call class]"},A})(n.EventEmitter);(function(P){(function(A){A.Closed="closed",A.Connecting="connecting",A.Open="open",A.Pending="pending",A.Reconnecting="reconnecting",A.Ringing="ringing"})(P.State||(P.State={})),(function(A){A.AudioLatency="audio-latency",A.ChoppyAudio="choppy-audio",A.DroppedCall="dropped-call",A.Echo="echo",A.NoisyCall="noisy-call",A.OneWayAudio="one-way-audio"})(P.FeedbackIssue||(P.FeedbackIssue={})),(function(A){A[A.One=1]="One",A[A.Two=2]="Two",A[A.Three=3]="Three",A[A.Four=4]="Four",A[A.Five=5]="Five"})(P.FeedbackScore||(P.FeedbackScore={})),(function(A){A.Incoming="INCOMING",A.Outgoing="OUTGOING"})(P.CallDirection||(P.CallDirection={})),(function(A){A.Opus="opus",A.PCMU="pcmu"})(P.Codec||(P.Codec={})),(function(A){A.None="none",A.Timeout="timeout"})(P.IceGatheringFailureReason||(P.IceGatheringFailureReason={})),(function(A){A.ConnectionDisconnected="ConnectionDisconnected",A.ConnectionFailed="ConnectionFailed",A.IceGatheringFailed="IceGatheringFailed",A.LowBytes="LowBytes"})(P.MediaFailure||(P.MediaFailure={}))})(w||(w={}));function N(){return"TJSxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(P){var A=Math.random()*16|0,T=P==="x"?A:A&3|8;return T.toString(16)})}return _t.default=w,_t}var Qo;function $l(){return Qo||(Qo=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TwilioError=e.Logger=e.PreflightTest=e.Device=e.Call=void 0;var t=Ii();e.Call=t.default;var n=yr();e.Device=n.default;var r=qe();Object.defineProperty(e,"Logger",{enumerable:!0,get:function(){return r.Logger}});var i=ba();Object.defineProperty(e,"PreflightTest",{enumerable:!0,get:function(){return i.PreflightTest}});var o=we();e.TwilioError=o})(Ur)),Ur}var zl=$l();function Ea(e,t){return function(){return e.apply(t,arguments)}}const{toString:Jl}=Object.prototype,{getPrototypeOf:Ai}=Object,{iterator:br,toStringTag:Ta}=Symbol,Sr=(e=>t=>{const n=Jl.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ge=e=>(e=e.toLowerCase(),t=>Sr(t)===e),wr=e=>t=>typeof t===e,{isArray:en}=Array,Tn=wr("undefined");function An(e){return e!==null&&!Tn(e)&&e.constructor!==null&&!Tn(e.constructor)&&ke(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Pa=Ge("ArrayBuffer");function Kl(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Pa(e.buffer),t}const Xl=wr("string"),ke=wr("function"),Ia=wr("number"),Rn=e=>e!==null&&typeof e=="object",Ql=e=>e===!0||e===!1,Zn=e=>{if(Sr(e)!=="object")return!1;const t=Ai(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Ta in e)&&!(br in e)},Yl=e=>{if(!Rn(e)||An(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Zl=Ge("Date"),ef=Ge("File"),tf=Ge("Blob"),nf=Ge("FileList"),rf=e=>Rn(e)&&ke(e.pipe),of=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ke(e.append)&&((t=Sr(e))==="formdata"||t==="object"&&ke(e.toString)&&e.toString()==="[object FormData]"))},sf=Ge("URLSearchParams"),[af,cf,uf,lf]=["ReadableStream","Request","Response","Headers"].map(Ge),ff=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xn(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),en(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(An(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;let c;for(r=0;r<s;r++)c=o[r],t.call(null,e[c],c,e)}}function Aa(e,t){if(An(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const xt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ra=e=>!Tn(e)&&e!==xt;function ti(){const{caseless:e}=Ra(this)&&this||{},t={},n=(r,i)=>{const o=e&&Aa(t,i)||i;Zn(t[o])&&Zn(r)?t[o]=ti(t[o],r):Zn(r)?t[o]=ti({},r):en(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&xn(arguments[r],n);return t}const df=(e,t,n,{allOwnKeys:r}={})=>(xn(t,(i,o)=>{n&&ke(i)?e[o]=Ea(i,n):e[o]=i},{allOwnKeys:r}),e),pf=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),hf=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},gf=(e,t,n,r)=>{let i,o,s;const c={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],(!r||r(s,e,t))&&!c[s]&&(t[s]=e[s],c[s]=!0);e=n!==!1&&Ai(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},_f=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},mf=e=>{if(!e)return null;if(en(e))return e;let t=e.length;if(!Ia(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},vf=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ai(Uint8Array)),yf=(e,t)=>{const r=(e&&e[br]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},bf=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Sf=Ge("HTMLFormElement"),wf=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Yo=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Cf=Ge("RegExp"),xa=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};xn(n,(i,o)=>{let s;(s=t(i,o,e))!==!1&&(r[o]=s||i)}),Object.defineProperties(e,r)},Ef=e=>{xa(e,(t,n)=>{if(ke(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(ke(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Tf=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return en(e)?r(e):r(String(e).split(t)),n},Pf=()=>{},If=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Af(e){return!!(e&&ke(e.append)&&e[Ta]==="FormData"&&e[br])}const Rf=e=>{const t=new Array(10),n=(r,i)=>{if(Rn(r)){if(t.indexOf(r)>=0)return;if(An(r))return r;if(!("toJSON"in r)){t[i]=r;const o=en(r)?[]:{};return xn(r,(s,c)=>{const _=n(s,i+1);!Tn(_)&&(o[c]=_)}),t[i]=void 0,o}}return r};return n(e,0)},xf=Ge("AsyncFunction"),Of=e=>e&&(Rn(e)||ke(e))&&ke(e.then)&&ke(e.catch),Oa=((e,t)=>e?setImmediate:t?((n,r)=>(xt.addEventListener("message",({source:i,data:o})=>{i===xt&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),xt.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ke(xt.postMessage)),kf=typeof queueMicrotask<"u"?queueMicrotask.bind(xt):typeof process<"u"&&process.nextTick||Oa,Df=e=>e!=null&&ke(e[br]),j={isArray:en,isArrayBuffer:Pa,isBuffer:An,isFormData:of,isArrayBufferView:Kl,isString:Xl,isNumber:Ia,isBoolean:Ql,isObject:Rn,isPlainObject:Zn,isEmptyObject:Yl,isReadableStream:af,isRequest:cf,isResponse:uf,isHeaders:lf,isUndefined:Tn,isDate:Zl,isFile:ef,isBlob:tf,isRegExp:Cf,isFunction:ke,isStream:rf,isURLSearchParams:sf,isTypedArray:vf,isFileList:nf,forEach:xn,merge:ti,extend:df,trim:ff,stripBOM:pf,inherits:hf,toFlatObject:gf,kindOf:Sr,kindOfTest:Ge,endsWith:_f,toArray:mf,forEachEntry:yf,matchAll:bf,isHTMLForm:Sf,hasOwnProperty:Yo,hasOwnProp:Yo,reduceDescriptors:xa,freezeMethods:Ef,toObjectSet:Tf,toCamelCase:wf,noop:Pf,toFiniteNumber:If,findKey:Aa,global:xt,isContextDefined:Ra,isSpecCompliantForm:Af,toJSONObject:Rf,isAsyncFn:xf,isThenable:Of,setImmediate:Oa,asap:kf,isIterable:Df};function re(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}j.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.status}}});const ka=re.prototype,Da={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Da[e]={value:e}});Object.defineProperties(re,Da);Object.defineProperty(ka,"isAxiosError",{value:!0});re.from=(e,t,n,r,i,o)=>{const s=Object.create(ka);return j.toFlatObject(e,s,function(_){return _!==Error.prototype},c=>c!=="isAxiosError"),re.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const Mf=null;function ni(e){return j.isPlainObject(e)||j.isArray(e)}function Ma(e){return j.endsWith(e,"[]")?e.slice(0,-2):e}function Zo(e,t,n){return e?e.concat(t).map(function(i,o){return i=Ma(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function Lf(e){return j.isArray(e)&&!e.some(ni)}const jf=j.toFlatObject(j,{},null,function(t){return/^is[A-Z]/.test(t)});function Cr(e,t,n){if(!j.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=j.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(a,u){return!j.isUndefined(u[a])});const r=n.metaTokens,i=n.visitor||g,o=n.dots,s=n.indexes,_=(n.Blob||typeof Blob<"u"&&Blob)&&j.isSpecCompliantForm(t);if(!j.isFunction(i))throw new TypeError("visitor must be a function");function C(h){if(h===null)return"";if(j.isDate(h))return h.toISOString();if(j.isBoolean(h))return h.toString();if(!_&&j.isBlob(h))throw new re("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(h)||j.isTypedArray(h)?_&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function g(h,a,u){let p=h;if(h&&!u&&typeof h=="object"){if(j.endsWith(a,"{}"))a=r?a:a.slice(0,-2),h=JSON.stringify(h);else if(j.isArray(h)&&Lf(h)||(j.isFileList(h)||j.endsWith(a,"[]"))&&(p=j.toArray(h)))return a=Ma(a),p.forEach(function(m,d){!(j.isUndefined(m)||m===null)&&t.append(s===!0?Zo([a],d,o):s===null?a:a+"[]",C(m))}),!1}return ni(h)?!0:(t.append(Zo(u,a,o),C(h)),!1)}const y=[],b=Object.assign(jf,{defaultVisitor:g,convertValue:C,isVisitable:ni});function E(h,a){if(!j.isUndefined(h)){if(y.indexOf(h)!==-1)throw Error("Circular reference detected in "+a.join("."));y.push(h),j.forEach(h,function(p,f){(!(j.isUndefined(p)||p===null)&&i.call(t,p,j.isString(f)?f.trim():f,a,b))===!0&&E(p,a?a.concat(f):[f])}),y.pop()}}if(!j.isObject(e))throw new TypeError("data must be an object");return E(e),t}function es(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ri(e,t){this._pairs=[],e&&Cr(e,this,t)}const La=Ri.prototype;La.append=function(t,n){this._pairs.push([t,n])};La.toString=function(t){const n=t?function(r){return t.call(this,r,es)}:es;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Nf(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ja(e,t,n){if(!t)return e;const r=n&&n.encode||Nf;j.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(t,n):o=j.isURLSearchParams(t)?t.toString():new Ri(t,n).toString(r),o){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class ts{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){j.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Na={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Uf=typeof URLSearchParams<"u"?URLSearchParams:Ri,Ff=typeof FormData<"u"?FormData:null,Bf=typeof Blob<"u"?Blob:null,Hf={isBrowser:!0,classes:{URLSearchParams:Uf,FormData:Ff,Blob:Bf},protocols:["http","https","file","blob","url","data"]},xi=typeof window<"u"&&typeof document<"u",ri=typeof navigator=="object"&&navigator||void 0,qf=xi&&(!ri||["ReactNative","NativeScript","NS"].indexOf(ri.product)<0),Vf=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Wf=xi&&window.location.href||"http://localhost",Gf=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xi,hasStandardBrowserEnv:qf,hasStandardBrowserWebWorkerEnv:Vf,navigator:ri,origin:Wf},Symbol.toStringTag,{value:"Module"})),Se={...Gf,...Hf};function $f(e,t){return Cr(e,new Se.classes.URLSearchParams,{visitor:function(n,r,i,o){return Se.isNode&&j.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function zf(e){return j.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Jf(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function Ua(e){function t(n,r,i,o){let s=n[o++];if(s==="__proto__")return!0;const c=Number.isFinite(+s),_=o>=n.length;return s=!s&&j.isArray(i)?i.length:s,_?(j.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!c):((!i[s]||!j.isObject(i[s]))&&(i[s]=[]),t(n,r,i[s],o)&&j.isArray(i[s])&&(i[s]=Jf(i[s])),!c)}if(j.isFormData(e)&&j.isFunction(e.entries)){const n={};return j.forEachEntry(e,(r,i)=>{t(zf(r),i,n,0)}),n}return null}function Kf(e,t,n){if(j.isString(e))try{return(t||JSON.parse)(e),j.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const On={transitional:Na,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=j.isObject(t);if(o&&j.isHTMLForm(t)&&(t=new FormData(t)),j.isFormData(t))return i?JSON.stringify(Ua(t)):t;if(j.isArrayBuffer(t)||j.isBuffer(t)||j.isStream(t)||j.isFile(t)||j.isBlob(t)||j.isReadableStream(t))return t;if(j.isArrayBufferView(t))return t.buffer;if(j.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return $f(t,this.formSerializer).toString();if((c=j.isFileList(t))||r.indexOf("multipart/form-data")>-1){const _=this.env&&this.env.FormData;return Cr(c?{"files[]":t}:t,_&&new _,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),Kf(t)):t}],transformResponse:[function(t){const n=this.transitional||On.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(j.isResponse(t)||j.isReadableStream(t))return t;if(t&&j.isString(t)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(c){if(s)throw c.name==="SyntaxError"?re.from(c,re.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Se.classes.FormData,Blob:Se.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};j.forEach(["delete","get","head","post","put","patch"],e=>{On.headers[e]={}});const Xf=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qf=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||t[n]&&Xf[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},ns=Symbol("internals");function ln(e){return e&&String(e).trim().toLowerCase()}function er(e){return e===!1||e==null?e:j.isArray(e)?e.map(er):String(e)}function Yf(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Zf=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Br(e,t,n,r,i){if(j.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!j.isString(t)){if(j.isString(r))return t.indexOf(r)!==-1;if(j.isRegExp(r))return r.test(t)}}function ed(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function td(e,t){const n=j.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,s){return this[r].call(this,t,i,o,s)},configurable:!0})})}let De=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(c,_,C){const g=ln(_);if(!g)throw new Error("header name must be a non-empty string");const y=j.findKey(i,g);(!y||i[y]===void 0||C===!0||C===void 0&&i[y]!==!1)&&(i[y||_]=er(c))}const s=(c,_)=>j.forEach(c,(C,g)=>o(C,g,_));if(j.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if(j.isString(t)&&(t=t.trim())&&!Zf(t))s(Qf(t),n);else if(j.isObject(t)&&j.isIterable(t)){let c={},_,C;for(const g of t){if(!j.isArray(g))throw TypeError("Object iterator must return a key-value pair");c[C=g[0]]=(_=c[C])?j.isArray(_)?[..._,g[1]]:[_,g[1]]:g[1]}s(c,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=ln(t),t){const r=j.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return Yf(i);if(j.isFunction(n))return n.call(this,i,r);if(j.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ln(t),t){const r=j.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Br(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(s){if(s=ln(s),s){const c=j.findKey(r,s);c&&(!n||Br(r,r[c],c,n))&&(delete r[c],i=!0)}}return j.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||Br(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return j.forEach(this,(i,o)=>{const s=j.findKey(r,o);if(s){n[s]=er(i),delete n[o];return}const c=t?ed(o):String(o).trim();c!==o&&delete n[o],n[c]=er(i),r[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return j.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&j.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[ns]=this[ns]={accessors:{}}).accessors,i=this.prototype;function o(s){const c=ln(s);r[c]||(td(i,s),r[c]=!0)}return j.isArray(t)?t.forEach(o):o(t),this}};De.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);j.reduceDescriptors(De.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});j.freezeMethods(De);function Hr(e,t){const n=this||On,r=t||n,i=De.from(r.headers);let o=r.data;return j.forEach(e,function(c){o=c.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function Fa(e){return!!(e&&e.__CANCEL__)}function tn(e,t,n){re.call(this,e??"canceled",re.ERR_CANCELED,t,n),this.name="CanceledError"}j.inherits(tn,re,{__CANCEL__:!0});function Ba(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new re("Request failed with status code "+n.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function nd(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function rd(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,s;return t=t!==void 0?t:1e3,function(_){const C=Date.now(),g=r[o];s||(s=C),n[i]=_,r[i]=C;let y=o,b=0;for(;y!==i;)b+=n[y++],y=y%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),C-s<t)return;const E=g&&C-g;return E?Math.round(b*1e3/E):void 0}}function id(e,t){let n=0,r=1e3/t,i,o;const s=(C,g=Date.now())=>{n=g,i=null,o&&(clearTimeout(o),o=null),e(...C)};return[(...C)=>{const g=Date.now(),y=g-n;y>=r?s(C,g):(i=C,o||(o=setTimeout(()=>{o=null,s(i)},r-y)))},()=>i&&s(i)]}const cr=(e,t,n=3)=>{let r=0;const i=rd(50,250);return id(o=>{const s=o.loaded,c=o.lengthComputable?o.total:void 0,_=s-r,C=i(_),g=s<=c;r=s;const y={loaded:s,total:c,progress:c?s/c:void 0,bytes:_,rate:C||void 0,estimated:C&&c&&g?(c-s)/C:void 0,event:o,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(y)},n)},rs=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},is=e=>(...t)=>j.asap(()=>e(...t)),od=Se.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Se.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Se.origin),Se.navigator&&/(msie|trident)/i.test(Se.navigator.userAgent)):()=>!0,sd=Se.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];j.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),j.isString(r)&&s.push("path="+r),j.isString(i)&&s.push("domain="+i),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ad(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function cd(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ha(e,t,n){let r=!ad(t);return e&&(r||n==!1)?cd(e,t):t}const os=e=>e instanceof De?{...e}:e;function Lt(e,t){t=t||{};const n={};function r(C,g,y,b){return j.isPlainObject(C)&&j.isPlainObject(g)?j.merge.call({caseless:b},C,g):j.isPlainObject(g)?j.merge({},g):j.isArray(g)?g.slice():g}function i(C,g,y,b){if(j.isUndefined(g)){if(!j.isUndefined(C))return r(void 0,C,y,b)}else return r(C,g,y,b)}function o(C,g){if(!j.isUndefined(g))return r(void 0,g)}function s(C,g){if(j.isUndefined(g)){if(!j.isUndefined(C))return r(void 0,C)}else return r(void 0,g)}function c(C,g,y){if(y in t)return r(C,g);if(y in e)return r(void 0,C)}const _={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c,headers:(C,g,y)=>i(os(C),os(g),y,!0)};return j.forEach(Object.keys({...e,...t}),function(g){const y=_[g]||i,b=y(e[g],t[g],g);j.isUndefined(b)&&y!==c||(n[g]=b)}),n}const qa=e=>{const t=Lt({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:s,auth:c}=t;t.headers=s=De.from(s),t.url=ja(Ha(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&s.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let _;if(j.isFormData(n)){if(Se.hasStandardBrowserEnv||Se.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((_=s.getContentType())!==!1){const[C,...g]=_?_.split(";").map(y=>y.trim()).filter(Boolean):[];s.setContentType([C||"multipart/form-data",...g].join("; "))}}if(Se.hasStandardBrowserEnv&&(r&&j.isFunction(r)&&(r=r(t)),r||r!==!1&&od(t.url))){const C=i&&o&&sd.read(o);C&&s.set(i,C)}return t},ud=typeof XMLHttpRequest<"u",ld=ud&&function(e){return new Promise(function(n,r){const i=qa(e);let o=i.data;const s=De.from(i.headers).normalize();let{responseType:c,onUploadProgress:_,onDownloadProgress:C}=i,g,y,b,E,h;function a(){E&&E(),h&&h(),i.cancelToken&&i.cancelToken.unsubscribe(g),i.signal&&i.signal.removeEventListener("abort",g)}let u=new XMLHttpRequest;u.open(i.method.toUpperCase(),i.url,!0),u.timeout=i.timeout;function p(){if(!u)return;const m=De.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),l={data:!c||c==="text"||c==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:m,config:e,request:u};Ba(function(I){n(I),a()},function(I){r(I),a()},l),u=null}"onloadend"in u?u.onloadend=p:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(p)},u.onabort=function(){u&&(r(new re("Request aborted",re.ECONNABORTED,e,u)),u=null)},u.onerror=function(){r(new re("Network Error",re.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let d=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const l=i.transitional||Na;i.timeoutErrorMessage&&(d=i.timeoutErrorMessage),r(new re(d,l.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,e,u)),u=null},o===void 0&&s.setContentType(null),"setRequestHeader"in u&&j.forEach(s.toJSON(),function(d,l){u.setRequestHeader(l,d)}),j.isUndefined(i.withCredentials)||(u.withCredentials=!!i.withCredentials),c&&c!=="json"&&(u.responseType=i.responseType),C&&([b,h]=cr(C,!0),u.addEventListener("progress",b)),_&&u.upload&&([y,E]=cr(_),u.upload.addEventListener("progress",y),u.upload.addEventListener("loadend",E)),(i.cancelToken||i.signal)&&(g=m=>{u&&(r(!m||m.type?new tn(null,e,u):m),u.abort(),u=null)},i.cancelToken&&i.cancelToken.subscribe(g),i.signal&&(i.signal.aborted?g():i.signal.addEventListener("abort",g)));const f=nd(i.url);if(f&&Se.protocols.indexOf(f)===-1){r(new re("Unsupported protocol "+f+":",re.ERR_BAD_REQUEST,e));return}u.send(o||null)})},fd=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const o=function(C){if(!i){i=!0,c();const g=C instanceof Error?C:this.reason;r.abort(g instanceof re?g:new tn(g instanceof Error?g.message:g))}};let s=t&&setTimeout(()=>{s=null,o(new re(`timeout ${t} of ms exceeded`,re.ETIMEDOUT))},t);const c=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(C=>{C.unsubscribe?C.unsubscribe(o):C.removeEventListener("abort",o)}),e=null)};e.forEach(C=>C.addEventListener("abort",o));const{signal:_}=r;return _.unsubscribe=()=>j.asap(c),_}},dd=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},pd=async function*(e,t){for await(const n of hd(e))yield*dd(n,t)},hd=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},ss=(e,t,n,r)=>{const i=pd(e,t);let o=0,s,c=_=>{s||(s=!0,r&&r(_))};return new ReadableStream({async pull(_){try{const{done:C,value:g}=await i.next();if(C){c(),_.close();return}let y=g.byteLength;if(n){let b=o+=y;n(b)}_.enqueue(new Uint8Array(g))}catch(C){throw c(C),C}},cancel(_){return c(_),i.return()}},{highWaterMark:2})},Er=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Va=Er&&typeof ReadableStream=="function",gd=Er&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Wa=(e,...t)=>{try{return!!e(...t)}catch{return!1}},_d=Va&&Wa(()=>{let e=!1;const t=new Request(Se.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),as=64*1024,ii=Va&&Wa(()=>j.isReadableStream(new Response("").body)),ur={stream:ii&&(e=>e.body)};Er&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ur[t]&&(ur[t]=j.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new re(`Response type '${t}' is not supported`,re.ERR_NOT_SUPPORT,r)})})})(new Response);const md=async e=>{if(e==null)return 0;if(j.isBlob(e))return e.size;if(j.isSpecCompliantForm(e))return(await new Request(Se.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(j.isArrayBufferView(e)||j.isArrayBuffer(e))return e.byteLength;if(j.isURLSearchParams(e)&&(e=e+""),j.isString(e))return(await gd(e)).byteLength},vd=async(e,t)=>{const n=j.toFiniteNumber(e.getContentLength());return n??md(t)},yd=Er&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:c,onUploadProgress:_,responseType:C,headers:g,withCredentials:y="same-origin",fetchOptions:b}=qa(e);C=C?(C+"").toLowerCase():"text";let E=fd([i,o&&o.toAbortSignal()],s),h;const a=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let u;try{if(_&&_d&&n!=="get"&&n!=="head"&&(u=await vd(g,r))!==0){let l=new Request(t,{method:"POST",body:r,duplex:"half"}),S;if(j.isFormData(r)&&(S=l.headers.get("content-type"))&&g.setContentType(S),l.body){const[I,w]=rs(u,cr(is(_)));r=ss(l.body,as,I,w)}}j.isString(y)||(y=y?"include":"omit");const p="credentials"in Request.prototype;h=new Request(t,{...b,signal:E,method:n.toUpperCase(),headers:g.normalize().toJSON(),body:r,duplex:"half",credentials:p?y:void 0});let f=await fetch(h,b);const m=ii&&(C==="stream"||C==="response");if(ii&&(c||m&&a)){const l={};["status","statusText","headers"].forEach(N=>{l[N]=f[N]});const S=j.toFiniteNumber(f.headers.get("content-length")),[I,w]=c&&rs(S,cr(is(c),!0))||[];f=new Response(ss(f.body,as,I,()=>{w&&w(),a&&a()}),l)}C=C||"text";let d=await ur[j.findKey(ur,C)||"text"](f,e);return!m&&a&&a(),await new Promise((l,S)=>{Ba(l,S,{data:d,headers:De.from(f.headers),status:f.status,statusText:f.statusText,config:e,request:h})})}catch(p){throw a&&a(),p&&p.name==="TypeError"&&/Load failed|fetch/i.test(p.message)?Object.assign(new re("Network Error",re.ERR_NETWORK,e,h),{cause:p.cause||p}):re.from(p,p&&p.code,e,h)}}),oi={http:Mf,xhr:ld,fetch:yd};j.forEach(oi,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const cs=e=>`- ${e}`,bd=e=>j.isFunction(e)||e===null||e===!1,Ga={getAdapter:e=>{e=j.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let s;if(r=n,!bd(n)&&(r=oi[(s=String(n)).toLowerCase()],r===void 0))throw new re(`Unknown adapter '${s}'`);if(r)break;i[s||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,_])=>`adapter ${c} `+(_===!1?"is not supported by the environment":"is not available in the build"));let s=t?o.length>1?`since :
`+o.map(cs).join(`
`):" "+cs(o[0]):"as no adapter specified";throw new re("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:oi};function qr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tn(null,e)}function us(e){return qr(e),e.headers=De.from(e.headers),e.data=Hr.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ga.getAdapter(e.adapter||On.adapter)(e).then(function(r){return qr(e),r.data=Hr.call(e,e.transformResponse,r),r.headers=De.from(r.headers),r},function(r){return Fa(r)||(qr(e),r&&r.response&&(r.response.data=Hr.call(e,e.transformResponse,r.response),r.response.headers=De.from(r.response.headers))),Promise.reject(r)})}const $a="1.11.0",Tr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Tr[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const ls={};Tr.transitional=function(t,n,r){function i(o,s){return"[Axios v"+$a+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return(o,s,c)=>{if(t===!1)throw new re(i(s," has been removed"+(n?" in "+n:"")),re.ERR_DEPRECATED);return n&&!ls[s]&&(ls[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,s,c):!0}};Tr.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Sd(e,t,n){if(typeof e!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const c=e[o],_=c===void 0||s(c,o,e);if(_!==!0)throw new re("option "+o+" must be "+_,re.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new re("Unknown option "+o,re.ERR_BAD_OPTION)}}const tr={assertOptions:Sd,validators:Tr},et=tr.validators;let Mt=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ts,response:new ts}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Lt(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&tr.assertOptions(r,{silentJSONParsing:et.transitional(et.boolean),forcedJSONParsing:et.transitional(et.boolean),clarifyTimeoutError:et.transitional(et.boolean)},!1),i!=null&&(j.isFunction(i)?n.paramsSerializer={serialize:i}:tr.assertOptions(i,{encode:et.function,serialize:et.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),tr.assertOptions(n,{baseUrl:et.spelling("baseURL"),withXsrfToken:et.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=o&&j.merge(o.common,o[n.method]);o&&j.forEach(["delete","get","head","post","put","patch","common"],h=>{delete o[h]}),n.headers=De.concat(s,o);const c=[];let _=!0;this.interceptors.request.forEach(function(a){typeof a.runWhen=="function"&&a.runWhen(n)===!1||(_=_&&a.synchronous,c.unshift(a.fulfilled,a.rejected))});const C=[];this.interceptors.response.forEach(function(a){C.push(a.fulfilled,a.rejected)});let g,y=0,b;if(!_){const h=[us.bind(this),void 0];for(h.unshift(...c),h.push(...C),b=h.length,g=Promise.resolve(n);y<b;)g=g.then(h[y++],h[y++]);return g}b=c.length;let E=n;for(y=0;y<b;){const h=c[y++],a=c[y++];try{E=h(E)}catch(u){a.call(this,u);break}}try{g=us.call(this,E)}catch(h){return Promise.reject(h)}for(y=0,b=C.length;y<b;)g=g.then(C[y++],C[y++]);return g}getUri(t){t=Lt(this.defaults,t);const n=Ha(t.baseURL,t.url,t.allowAbsoluteUrls);return ja(n,t.params,t.paramsSerializer)}};j.forEach(["delete","get","head","options"],function(t){Mt.prototype[t]=function(n,r){return this.request(Lt(r||{},{method:t,url:n,data:(r||{}).data}))}});j.forEach(["post","put","patch"],function(t){function n(r){return function(o,s,c){return this.request(Lt(c||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}Mt.prototype[t]=n(),Mt.prototype[t+"Form"]=n(!0)});let wd=class za{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const s=new Promise(c=>{r.subscribe(c),o=c}).then(i);return s.cancel=function(){r.unsubscribe(o)},s},t(function(o,s,c){r.reason||(r.reason=new tn(o,s,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new za(function(i){t=i}),cancel:t}}};function Cd(e){return function(n){return e.apply(null,n)}}function Ed(e){return j.isObject(e)&&e.isAxiosError===!0}const si={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(si).forEach(([e,t])=>{si[t]=e});function Ja(e){const t=new Mt(e),n=Ea(Mt.prototype.request,t);return j.extend(n,Mt.prototype,t,{allOwnKeys:!0}),j.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return Ja(Lt(e,i))},n}const me=Ja(On);me.Axios=Mt;me.CanceledError=tn;me.CancelToken=wd;me.isCancel=Fa;me.VERSION=$a;me.toFormData=Cr;me.AxiosError=re;me.Cancel=me.CanceledError;me.all=function(t){return Promise.all(t)};me.spread=Cd;me.isAxiosError=Ed;me.mergeConfig=Lt;me.AxiosHeaders=De;me.formToJSON=e=>Ua(j.isHTMLForm(e)?new FormData(e):e);me.getAdapter=Ga.getAdapter;me.HttpStatusCode=si;me.default=me;const{Axios:Ld,AxiosError:jd,CanceledError:Nd,isCancel:Ud,CancelToken:Fd,VERSION:Bd,all:Hd,Cancel:qd,isAxiosError:Vd,spread:Wd,toFormData:Gd,AxiosHeaders:$d,HttpStatusCode:zd,formToJSON:Jd,getAdapter:Kd,mergeConfig:Xd}=me,Td=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Pd={data(){return{device:null,to:"",status:"Initializing..."}},methods:{async initializeTwilio(){try{const t=(await me.get("/token?identity=test-user")).data.token;this.device=new zl.Device(t,{debug:!0}),this.device.on("ready",()=>{this.status="Ready to call",console.log("Twilio Device is ready")}),this.device.on("error",n=>{this.status="Error: "+n.message,console.error("Twilio Error:",n)}),this.device.on("disconnect",()=>{this.status="Call disconnected",console.log("Call disconnected")}),this.device.on("connect",()=>{this.status="On Call..."}),this.device.on("incoming",n=>{this.status="Incoming call...",n.accept()})}catch(e){this.status="Failed to initialize Twilio",console.error(e)}},async requestMicrophoneAccess(){try{await navigator.mediaDevices.getUserMedia({audio:!0}),console.log("Microphone access granted.")}catch(e){this.status="Microphone access denied.",console.error("Microphone access denied:",e)}},async makeCall(){this.device||await this.initializeTwilio(),this.status=`Calling ${this.to}...`,this.device.connect({to:this.to})},hangUp(){this.device&&(this.device.disconnectAll(),this.status="Call ended")}},async mounted(){await this.requestMicrophoneAccess(),await this.initializeTwilio()}},Id={class:"call-container"},Ad={class:"button-group"},Rd={class:"status"};function xd(e,t,n,r,i,o){return Ou(),Mu("div",Id,[t[4]||(t[4]=ct("h2",null,"📞 Twilio Call Interface",-1)),Uc(ct("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.to=s),placeholder:"Enter phone number",class:"phone-input"},null,512),[[gl,i.to]]),ct("div",Ad,[ct("button",{onClick:t[1]||(t[1]=(...s)=>o.makeCall&&o.makeCall(...s)),class:"call-button"},"Call"),ct("button",{onClick:t[2]||(t[2]=(...s)=>o.hangUp&&o.hangUp(...s)),class:"hangup-button"},"Hang Up")]),ct("div",Rd,[t[3]||(t[3]=ct("strong",null,"Status:",-1)),pa(" "+bs(i.status),1)])])}const Od=Td(Pd,[["render",xd],["__scopeId","data-v-0d433c3c"]]);vl(Od).mount("#app");
